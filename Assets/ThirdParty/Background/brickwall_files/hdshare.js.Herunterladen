!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=58)}([function(e,t,n){(function(e,n){var i;!function(){var r="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},o=r._,a=Array.prototype,s=Object.prototype,l="undefined"!=typeof Symbol?Symbol.prototype:null,c=a.push,u=a.slice,d=s.toString,h=s.hasOwnProperty,f=Array.isArray,p=Object.keys,g=Object.create,m=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};t.nodeType?r._=v:(!n.nodeType&&n.exports&&(t=n.exports=v),t._=v),v.VERSION="1.9.1";var y,w=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return function(){return e.apply(t,arguments)}},b=function(e,t,n){return v.iteratee!==y?v.iteratee(e,t):null==e?v.identity:v.isFunction(e)?w(e,t,n):v.isObject(e)&&!v.isArray(e)?v.matcher(e):v.property(e)};v.iteratee=y=function(e,t){return b(e,t,1/0)};var _=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var o=Array(t+1);for(r=0;r<t;r++)o[r]=arguments[r];return o[t]=i,e.apply(this,o)}},x=function(e){if(!v.isObject(e))return{};if(g)return g(e);m.prototype=e;var t=new m;return m.prototype=null,t},k=function(e){return function(t){return null==t?void 0:t[e]}},E=function(e,t){return null!=e&&h.call(e,t)},S=function(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0},T=Math.pow(2,53)-1,C=k("length"),j=function(e){var t=C(e);return"number"==typeof t&&t>=0&&t<=T};v.each=v.forEach=function(e,t,n){var i,r;if(t=w(t,n),j(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var o=v.keys(e);for(i=0,r=o.length;i<r;i++)t(e[o[i]],o[i],e)}return e},v.map=v.collect=function(e,t,n){t=b(t,n);for(var i=!j(e)&&v.keys(e),r=(i||e).length,o=Array(r),a=0;a<r;a++){var s=i?i[a]:a;o[a]=t(e[s],s,e)}return o};var D=function(e){var t=function(t,n,i,r){var o=!j(t)&&v.keys(t),a=(o||t).length,s=e>0?0:a-1;for(r||(i=t[o?o[s]:s],s+=e);s>=0&&s<a;s+=e){var l=o?o[s]:s;i=n(i,t[l],l,t)}return i};return function(e,n,i,r){var o=arguments.length>=3;return t(e,w(n,r,4),i,o)}};v.reduce=v.foldl=v.inject=D(1),v.reduceRight=v.foldr=D(-1),v.find=v.detect=function(e,t,n){var i=(j(e)?v.findIndex:v.findKey)(e,t,n);if(void 0!==i&&-1!==i)return e[i]},v.filter=v.select=function(e,t,n){var i=[];return t=b(t,n),v.each(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i},v.reject=function(e,t,n){return v.filter(e,v.negate(b(t)),n)},v.every=v.all=function(e,t,n){t=b(t,n);for(var i=!j(e)&&v.keys(e),r=(i||e).length,o=0;o<r;o++){var a=i?i[o]:o;if(!t(e[a],a,e))return!1}return!0},v.some=v.any=function(e,t,n){t=b(t,n);for(var i=!j(e)&&v.keys(e),r=(i||e).length,o=0;o<r;o++){var a=i?i[o]:o;if(t(e[a],a,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,n,i){return j(e)||(e=v.values(e)),("number"!=typeof n||i)&&(n=0),v.indexOf(e,t,n)>=0},v.invoke=_((function(e,t,n){var i,r;return v.isFunction(t)?r=t:v.isArray(t)&&(i=t.slice(0,-1),t=t[t.length-1]),v.map(e,(function(e){var o=r;if(!o){if(i&&i.length&&(e=S(e,i)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)}))})),v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,n){var i,r,o=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=j(e)?e:v.values(e)).length;s<l;s++)null!=(i=e[s])&&i>o&&(o=i);else t=b(t,n),v.each(e,(function(e,n,i){((r=t(e,n,i))>a||r===-1/0&&o===-1/0)&&(o=e,a=r)}));return o},v.min=function(e,t,n){var i,r,o=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=j(e)?e:v.values(e)).length;s<l;s++)null!=(i=e[s])&&i<o&&(o=i);else t=b(t,n),v.each(e,(function(e,n,i){((r=t(e,n,i))<a||r===1/0&&o===1/0)&&(o=e,a=r)}));return o},v.shuffle=function(e){return v.sample(e,1/0)},v.sample=function(e,t,n){if(null==t||n)return j(e)||(e=v.values(e)),e[v.random(e.length-1)];var i=j(e)?v.clone(e):v.values(e),r=C(i);t=Math.max(Math.min(t,r),0);for(var o=r-1,a=0;a<t;a++){var s=v.random(a,o),l=i[a];i[a]=i[s],i[s]=l}return i.slice(0,t)},v.sortBy=function(e,t,n){var i=0;return t=b(t,n),v.pluck(v.map(e,(function(e,n,r){return{value:e,index:i++,criteria:t(e,n,r)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index})),"value")};var O=function(e,t){return function(n,i,r){var o=t?[[],[]]:{};return i=b(i,r),v.each(n,(function(t,r){var a=i(t,r,n);e(o,t,a)})),o}};v.groupBy=O((function(e,t,n){E(e,n)?e[n].push(t):e[n]=[t]})),v.indexBy=O((function(e,t,n){e[n]=t})),v.countBy=O((function(e,t,n){E(e,n)?e[n]++:e[n]=1}));var P=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;v.toArray=function(e){return e?v.isArray(e)?u.call(e):v.isString(e)?e.match(P):j(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:j(e)?e.length:v.keys(e).length},v.partition=O((function(e,t,n){e[n?0:1].push(t)}),!0),v.first=v.head=v.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},v.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},v.compact=function(e){return v.filter(e,Boolean)};var A=function(e,t,n,i){for(var r=(i=i||[]).length,o=0,a=C(e);o<a;o++){var s=e[o];if(j(s)&&(v.isArray(s)||v.isArguments(s)))if(t)for(var l=0,c=s.length;l<c;)i[r++]=s[l++];else A(s,t,n,i),r=i.length;else n||(i[r++]=s)}return i};v.flatten=function(e,t){return A(e,t,!1)},v.without=_((function(e,t){return v.difference(e,t)})),v.uniq=v.unique=function(e,t,n,i){v.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=b(n,i));for(var r=[],o=[],a=0,s=C(e);a<s;a++){var l=e[a],c=n?n(l,a,e):l;t&&!n?(a&&o===c||r.push(l),o=c):n?v.contains(o,c)||(o.push(c),r.push(l)):v.contains(r,l)||r.push(l)}return r},v.union=_((function(e){return v.uniq(A(e,!0,!0))})),v.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=C(e);i<r;i++){var o=e[i];if(!v.contains(t,o)){var a;for(a=1;a<n&&v.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},v.difference=_((function(e,t){return t=A(t,!0,!0),v.filter(e,(function(e){return!v.contains(t,e)}))})),v.unzip=function(e){for(var t=e&&v.max(e,C).length||0,n=Array(t),i=0;i<t;i++)n[i]=v.pluck(e,i);return n},v.zip=_(v.unzip),v.object=function(e,t){for(var n={},i=0,r=C(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n};var M=function(e){return function(t,n,i){n=b(n,i);for(var r=C(t),o=e>0?0:r-1;o>=0&&o<r;o+=e)if(n(t[o],o,t))return o;return-1}};v.findIndex=M(1),v.findLastIndex=M(-1),v.sortedIndex=function(e,t,n,i){for(var r=(n=b(n,i,1))(t),o=0,a=C(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<r?o=s+1:a=s}return o};var I=function(e,t,n){return function(i,r,o){var a=0,s=C(i);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return i[o=n(i,r)]===r?o:-1;if(r!=r)return(o=t(u.call(i,a,s),v.isNaN))>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(i[o]===r)return o;return-1}};v.indexOf=I(1,v.findIndex,v.sortedIndex),v.lastIndexOf=I(-1,v.findLastIndex),v.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),o=0;o<i;o++,e+=n)r[o]=e;return r},v.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],i=0,r=e.length;i<r;)n.push(u.call(e,i,i+=t));return n};var F=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var o=x(e.prototype),a=e.apply(o,r);return v.isObject(a)?a:o};v.bind=_((function(e,t,n){if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var i=_((function(r){return F(e,i,t,this,n.concat(r))}));return i})),v.partial=_((function(e,t){var n=v.partial.placeholder,i=function(){for(var r=0,o=t.length,a=Array(o),s=0;s<o;s++)a[s]=t[s]===n?arguments[r++]:t[s];for(;r<arguments.length;)a.push(arguments[r++]);return F(e,i,this,this,a)};return i})),v.partial.placeholder=v,v.bindAll=_((function(e,t){var n=(t=A(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=v.bind(e[i],e)}})),v.memoize=function(e,t){var n=function(i){var r=n.cache,o=""+(t?t.apply(this,arguments):i);return E(r,o)||(r[o]=e.apply(this,arguments)),r[o]};return n.cache={},n},v.delay=_((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,n){var i,r,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),i=null,a=e.apply(r,o),i||(r=o=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var u=t-(c-s);return r=this,o=arguments,u<=0||u>t?(i&&(clearTimeout(i),i=null),s=c,a=e.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=setTimeout(l,u)),a};return c.cancel=function(){clearTimeout(i),s=0,i=r=o=null},c},v.debounce=function(e,t,n){var i,r,o=function(t,n){i=null,n&&(r=e.apply(t,n))},a=_((function(a){if(i&&clearTimeout(i),n){var s=!i;i=setTimeout(o,t),s&&(r=e.apply(this,a))}else i=v.delay(o,t,this,a);return r}));return a.cancel=function(){clearTimeout(i),i=null},a},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},v.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},v.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},v.once=v.partial(v.before,2),v.restArguments=_;var z=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],N=function(e,t){var n=L.length,i=e.constructor,r=v.isFunction(i)&&i.prototype||s,o="constructor";for(E(e,o)&&!v.contains(t,o)&&t.push(o);n--;)(o=L[n])in e&&e[o]!==r[o]&&!v.contains(t,o)&&t.push(o)};v.keys=function(e){if(!v.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)E(e,n)&&t.push(n);return z&&N(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var n in e)t.push(n);return z&&N(e,t),t},v.values=function(e){for(var t=v.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i},v.mapObject=function(e,t,n){t=b(t,n);for(var i=v.keys(e),r=i.length,o={},a=0;a<r;a++){var s=i[a];o[s]=t(e[s],s,e)}return o},v.pairs=function(e){for(var t=v.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i},v.invert=function(e){for(var t={},n=v.keys(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t},v.functions=v.methods=function(e){var t=[];for(var n in e)v.isFunction(e[n])&&t.push(n);return t.sort()};var V=function(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],a=e(o),s=a.length,l=0;l<s;l++){var c=a[l];t&&void 0!==n[c]||(n[c]=o[c])}return n}};v.extend=V(v.allKeys),v.extendOwn=v.assign=V(v.keys),v.findKey=function(e,t,n){t=b(t,n);for(var i,r=v.keys(e),o=0,a=r.length;o<a;o++)if(t(e[i=r[o]],i,e))return i};var $,R,B=function(e,t,n){return t in n};v.pick=_((function(e,t){var n={},i=t[0];if(null==e)return n;v.isFunction(i)?(t.length>1&&(i=w(i,t[1])),t=v.allKeys(e)):(i=B,t=A(t,!1,!1),e=Object(e));for(var r=0,o=t.length;r<o;r++){var a=t[r],s=e[a];i(s,a,e)&&(n[a]=s)}return n})),v.omit=_((function(e,t){var n,i=t[0];return v.isFunction(i)?(i=v.negate(i),t.length>1&&(n=t[1])):(t=v.map(A(t,!1,!1),String),i=function(e,n){return!v.contains(t,n)}),v.pick(e,i,n)})),v.defaults=V(v.allKeys,!0),v.create=function(e,t){var n=x(e);return t&&v.extendOwn(n,t),n},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var n=v.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),o=0;o<i;o++){var a=n[o];if(t[a]!==r[a]||!(a in r))return!1}return!0},$=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=typeof e;return("function"===r||"object"===r||"object"==typeof t)&&R(e,t,n,i)},R=function(e,t,n,i){e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var r=d.call(e);if(r!==d.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return l.valueOf.call(e)===l.valueOf.call(t)}var o="[object Array]"===r;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(v.isFunction(a)&&a instanceof a&&v.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var c=(n=n||[]).length;c--;)if(n[c]===e)return i[c]===t;if(n.push(e),i.push(t),o){if((c=e.length)!==t.length)return!1;for(;c--;)if(!$(e[c],t[c],n,i))return!1}else{var u,h=v.keys(e);if(c=h.length,v.keys(t).length!==c)return!1;for(;c--;)if(u=h[c],!E(t,u)||!$(e[u],t[u],n,i))return!1}return n.pop(),i.pop(),!0},v.isEqual=function(e,t){return $(e,t)},v.isEmpty=function(e){return null==e||(j(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length)},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=f||function(e){return"[object Array]"===d.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(e){v["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}})),v.isArguments(arguments)||(v.isArguments=function(e){return E(e,"callee")});var q=r.document&&r.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof q&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return!v.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&isNaN(e)},v.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===d.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){if(!v.isArray(t))return E(e,t);for(var n=t.length,i=0;i<n;i++){var r=t[i];if(null==e||!h.call(e,r))return!1;e=e[r]}return!!n},v.noConflict=function(){return r._=o,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=function(e){return v.isArray(e)?function(t){return S(t,e)}:k(e)},v.propertyOf=function(e){return null==e?function(){}:function(t){return v.isArray(t)?S(e,t):e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,n){var i=Array(Math.max(0,e));t=w(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=function(){throw new Error("_.now() shall now longer be used")};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=v.invert(U),W=function(e){var t=function(t){return e[t]},n="(?:"+v.keys(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}};v.escape=W(U),v.unescape=W(H),v.result=function(e,t,n){v.isArray(t)||(t=[t]);var i=t.length;if(!i)return v.isFunction(n)?n.call(e):n;for(var r=0;r<i;r++){var o=null==e?void 0:e[t[r]];void 0===o&&(o=n,r=i),e=v.isFunction(o)?o.call(e):o}return e};var G=0;v.uniqueId=function(e){var t=++G+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,X={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Y=/\\|'|\r|\n|\u2028|\u2029/g,J=function(e){return"\\"+X[e]};v.template=function(e,t,n){!t&&n&&(t=n),t=v.defaults({},t,v.templateSettings);var i,r=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(r,(function(t,n,i,r,s){return a+=e.slice(o,s).replace(Y,J),o=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(a+="';\n"+r+"\n__p+='"),t})),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var s=function(e){return i.call(this,e,v)},l=t.variable||"obj";return s.source="function("+l+"){\n"+a+"}",s},v.chain=function(e){var t=v(e);return t._chain=!0,t};var Q=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){return v.each(v.functions(e),(function(t){var n=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),Q(this,n.apply(v,e))}})),v},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=a[e];v.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Q(this,n)}})),v.each(["concat","join","slice"],(function(e){var t=a[e];v.prototype[e]=function(){return Q(this,t.apply(this._wrapped,arguments))}})),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return String(this._wrapped)},void 0===(i=function(){return v}.apply(t,[]))||(n.exports=i)}()}).call(this,n(60),n(61)(e))},function(e,t,n){var i,r,o;
/*!
 * jQuery JavaScript Library v2.2.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-01-08T20:02Z
 */r="undefined"!=typeof window?window:this,o=function(n,r){var o=[],a=n.document,s=o.slice,l=o.concat,c=o.push,u=o.indexOf,d={},h=d.toString,f=d.hasOwnProperty,p={},g=function(e,t){return new g.fn.init(e,t)},m=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,y=/-([\da-z])/gi,w=function(e,t){return t.toUpperCase()};function b(e){var t=!!e&&"length"in e&&e.length,n=g.type(e);return"function"!==n&&!g.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}g.fn=g.prototype={jquery:"2.2.0",constructor:g,selector:"",length:0,toArray:function(){return s.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:s.call(this)},pushStack:function(e){var t=g.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return g.each(this,e)},map:function(e){return this.pushStack(g.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},g.extend=g.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||g.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(i=e[t])&&(c&&i&&(g.isPlainObject(i)||(r=g.isArray(i)))?(r?(r=!1,o=n&&g.isArray(n)?n:[]):o=n&&g.isPlainObject(n)?n:{},a[t]=g.extend(c,o,i)):void 0!==i&&(a[t]=i));return a},g.extend({expando:"jQuery"+("2.2.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===g.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!g.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){return!("object"!==g.type(e)||e.nodeType||g.isWindow(e)||e.constructor&&!f.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[h.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=g.trim(e))&&(1===e.indexOf("use strict")?((t=a.createElement("script")).text=e,a.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(v,"ms-").replace(y,w)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(b(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(m,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(b(Object(e))?g.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,a=!n;r<o;r++)!t(e[r],r)!==a&&i.push(e[r]);return i},map:function(e,t,n){var i,r,o=0,a=[];if(b(e))for(i=e.length;o<i;o++)null!=(r=t(e[o],o,n))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,n))&&a.push(r);return l.apply([],a)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),g.isFunction(e))return i=s.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(s.call(arguments)))}).guid=e.guid=e.guid||g.guid++,r},now:Date.now,support:p}),"function"==typeof Symbol&&(g.fn[Symbol.iterator]=o[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var _=
/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(e){var t,n,i,r,o,a,s,l,c,u,d,h,f,p,g,m,v,y,w,b="sizzle"+1*new Date,_=e.document,x=0,k=0,E=re(),S=re(),T=re(),C=function(e,t){return e===t&&(d=!0),0},j={}.hasOwnProperty,D=[],O=D.pop,P=D.push,A=D.push,M=D.slice,I=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",z="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+z+"*("+L+")(?:"+z+"*([*^$|!~]?=)"+z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+z+"*\\]",V=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",$=new RegExp(z+"+","g"),R=new RegExp("^"+z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+z+"+$","g"),B=new RegExp("^"+z+"*,"+z+"*"),q=new RegExp("^"+z+"*([>+~]|"+z+")"+z+"*"),U=new RegExp("="+z+"*([^\\]'\"]*?)"+z+"*\\]","g"),H=new RegExp(V),W=new RegExp("^"+L+"$"),G={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+z+"*(even|odd|(([+-]|)(\\d*)n|)"+z+"*(?:([+-]|)"+z+"*(\\d+)|))"+z+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+z+"*((?:-\\d)?\\d*)"+z+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Z=/'|\\/g,ee=new RegExp("\\\\([\\da-f]{1,6}"+z+"?|("+z+")|.)","ig"),te=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ne=function(){h()};try{A.apply(D=M.call(_.childNodes),_.childNodes),D[_.childNodes.length].nodeType}catch(e){A={apply:D.length?function(e,t){P.apply(e,M.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ie(e,t,i,r){var o,s,c,u,d,p,v,y,x=t&&t.ownerDocument,k=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==k&&9!==k&&11!==k)return i;if(!r&&((t?t.ownerDocument||t:_)!==f&&h(t),t=t||f,g)){if(11!==k&&(p=J.exec(e)))if(o=p[1]){if(9===k){if(!(c=t.getElementById(o)))return i;if(c.id===o)return i.push(c),i}else if(x&&(c=x.getElementById(o))&&w(t,c)&&c.id===o)return i.push(c),i}else{if(p[2])return A.apply(i,t.getElementsByTagName(e)),i;if((o=p[3])&&n.getElementsByClassName&&t.getElementsByClassName)return A.apply(i,t.getElementsByClassName(o)),i}if(n.qsa&&!T[e+" "]&&(!m||!m.test(e))){if(1!==k)x=t,y=e;else if("object"!==t.nodeName.toLowerCase()){for((u=t.getAttribute("id"))?u=u.replace(Z,"\\$&"):t.setAttribute("id",u=b),s=(v=a(e)).length,d=W.test(u)?"#"+u:"[id='"+u+"']";s--;)v[s]=d+" "+pe(v[s]);y=v.join(","),x=Q.test(e)&&he(t.parentNode)||t}if(y)try{return A.apply(i,x.querySelectorAll(y)),i}catch(e){}finally{u===b&&t.removeAttribute("id")}}}return l(e.replace(R,"$1"),t,i,r)}function re(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function oe(e){return e[b]=!0,e}function ae(e){var t=f.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function se(e,t){for(var n=e.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=t}function le(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ue(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return oe((function(t){return t=+t,oe((function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))}))}))}function he(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ie.support={},o=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=ie.setDocument=function(e){var t,r,a=e?e.ownerDocument||e:_;return a!==f&&9===a.nodeType&&a.documentElement?(p=(f=a).documentElement,g=!o(f),(r=f.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ne,!1):r.attachEvent&&r.attachEvent("onunload",ne)),n.attributes=ae((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ae((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Y.test(f.getElementsByClassName),n.getById=ae((function(e){return p.appendChild(e).id=b,!f.getElementsByName||!f.getElementsByName(b).length})),n.getById?(i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}},i.filter.ID=function(e){var t=e.replace(ee,te);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(ee,te);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],m=[],(n.qsa=Y.test(f.querySelectorAll))&&(ae((function(e){p.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+z+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+z+"*(?:value|"+F+")"),e.querySelectorAll("[id~="+b+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]")})),ae((function(e){var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+z+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=Y.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ae((function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),v.push("!=",V)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=Y.test(p.compareDocumentPosition),w=t||Y.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===f||e.ownerDocument===_&&w(_,e)?-1:t===f||t.ownerDocument===_&&w(_,t)?1:u?I(u,e)-I(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e===f?-1:t===f?1:r?-1:o?1:u?I(u,e)-I(u,t):0;if(r===o)return le(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?le(a[i],s[i]):a[i]===_?-1:s[i]===_?1:0},f):f},ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&h(e),t=t.replace(U,"='$1']"),n.matchesSelector&&g&&!T[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var i=y.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return ie(t,f,null,[e]).length>0},ie.contains=function(e,t){return(e.ownerDocument||e)!==f&&h(e),w(e,t)},ie.attr=function(e,t){(e.ownerDocument||e)!==f&&h(e);var r=i.attrHandle[t.toLowerCase()],o=r&&j.call(i.attrHandle,t.toLowerCase())?r(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ie.uniqueSort=function(e){var t,i=[],r=0,o=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(C),d){for(;t=e[o++];)t===e[o]&&(r=i.push(o));for(;r--;)e.splice(i[r],1)}return u=null,e},r=ie.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(i=ie.selectors={cacheLength:50,createPseudo:oe,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ee,te),e[3]=(e[3]||e[4]||e[5]||"").replace(ee,te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ie.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ie.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&H.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ee,te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+z+")"+e+"("+z+"|$)"))&&E(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var r=ie.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace($," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,f,p,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,w=!1;if(m){if(o){for(;g;){for(h=t;h=h[g];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(w=(f=(c=(u=(d=(h=m)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===x&&c[1])&&c[2],h=f&&m.childNodes[f];h=++f&&h&&h[g]||(w=f=0)||p.pop();)if(1===h.nodeType&&++w&&h===t){u[e]=[x,f,w];break}}else if(y&&(w=f=(c=(u=(d=(h=t)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===x&&c[1]),!1===w)for(;(h=++f&&h&&h[g]||(w=f=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++w||(y&&((u=(d=h[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[x,w]),h!==t)););return(w-=r)===i||w%i==0&&w/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?oe((function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=I(e,o[a])]=!(n[i]=o[a])})):function(e){return r(e,0,n)}):r}},pseudos:{not:oe((function(e){var t=[],n=[],i=s(e.replace(R,"$1"));return i[b]?oe((function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}})),has:oe((function(e){return function(t){return ie(e,t).length>0}})),contains:oe((function(e){return e=e.replace(ee,te),function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}})),lang:oe((function(e){return W.test(e||"")||ie.error("unsupported lang: "+e),e=e.replace(ee,te).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:de((function(){return[0]})),last:de((function(e,t){return[t-1]})),eq:de((function(e,t,n){return[n<0?n+t:n]})),even:de((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:de((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:de((function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e})),gt:de((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=ce(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=ue(t);function fe(){}function pe(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ge(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=k++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,l,c,u=[x,o];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if((s=(l=(c=t[b]||(t[b]={}))[t.uniqueID]||(c[t.uniqueID]={}))[i])&&s[0]===x&&s[1]===o)return u[2]=s[2];if(l[i]=u,u[2]=e(t,n,a))return!0}}}function me(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function ve(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),c&&t.push(s)));return a}function ye(e,t,n,i,r,o){return i&&!i[b]&&(i=ye(i)),r&&!r[b]&&(r=ye(r,o)),oe((function(o,a,s,l){var c,u,d,h=[],f=[],p=a.length,g=o||function(e,t,n){for(var i=0,r=t.length;i<r;i++)ie(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:ve(g,h,e,s,l),v=n?r||(o?e:p||i)?[]:a:m;if(n&&n(m,v,s,l),i)for(c=ve(v,f),i(c,[],s,l),u=c.length;u--;)(d=c[u])&&(v[f[u]]=!(m[f[u]]=d));if(o){if(r||e){if(r){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(m[u]=d);r(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=r?I(o,d):h[u])>-1&&(o[c]=!(a[c]=d))}}else v=ve(v===a?v.splice(p,v.length):v),r?r(null,a,v,l):A.apply(a,v)}))}function we(e){for(var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],l=a?1:0,u=ge((function(e){return e===t}),s,!0),d=ge((function(e){return I(t,e)>-1}),s,!0),h=[function(e,n,i){var r=!a&&(i||n!==c)||((t=n).nodeType?u(e,n,i):d(e,n,i));return t=null,r}];l<o;l++)if(n=i.relative[e[l].type])h=[ge(me(h),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[b]){for(r=++l;r<o&&!i.relative[e[r].type];r++);return ye(l>1&&me(h),l>1&&pe(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(R,"$1"),n,l<r&&we(e.slice(l,r)),r<o&&we(e=e.slice(r)),r<o&&pe(e))}h.push(n)}return me(h)}return fe.prototype=i.filters=i.pseudos,i.setFilters=new fe,a=ie.tokenize=function(e,t){var n,r,o,a,s,l,c,u=S[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=i.preFilter;s;){for(a in n&&!(r=B.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),n=!1,(r=q.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(R," ")}),s=s.slice(n.length)),i.filter)!(r=G[a].exec(s))||c[a]&&!(r=c[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ie.error(e):S(e,l).slice(0)},s=ie.compile=function(e,t){var n,r=[],o=[],s=T[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=we(t[n]))[b]?r.push(s):o.push(s);(s=T(e,function(e,t){var n=t.length>0,r=e.length>0,o=function(o,a,s,l,u){var d,p,m,v=0,y="0",w=o&&[],b=[],_=c,k=o||r&&i.find.TAG("*",u),E=x+=null==_?1:Math.random()||.1,S=k.length;for(u&&(c=a===f||a||u);y!==S&&null!=(d=k[y]);y++){if(r&&d){for(p=0,a||d.ownerDocument===f||(h(d),s=!g);m=e[p++];)if(m(d,a||f,s)){l.push(d);break}u&&(x=E)}n&&((d=!m&&d)&&v--,o&&w.push(d))}if(v+=y,n&&y!==v){for(p=0;m=t[p++];)m(w,b,a,s);if(o){if(v>0)for(;y--;)w[y]||b[y]||(b[y]=O.call(l));b=ve(b)}A.apply(l,b),u&&!o&&b.length>0&&v+t.length>1&&ie.uniqueSort(l)}return u&&(x=E,c=_),w};return n?oe(o):o}(o,r))).selector=e}return s},l=ie.select=function(e,t,r,o){var l,c,u,d,h,f="function"==typeof e&&e,p=!o&&a(e=f.selector||e);if(r=r||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&n.getById&&9===t.nodeType&&g&&i.relative[c[1].type]){if(!(t=(i.find.ID(u.matches[0].replace(ee,te),t)||[])[0]))return r;f&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(l=G.needsContext.test(e)?0:c.length;l--&&(u=c[l],!i.relative[d=u.type]);)if((h=i.find[d])&&(o=h(u.matches[0].replace(ee,te),Q.test(c[0].type)&&he(t.parentNode)||t))){if(c.splice(l,1),!(e=o.length&&pe(c)))return A.apply(r,o),r;break}}return(f||s(e,p))(o,t,!g,r,!t||Q.test(e)&&he(t.parentNode)||t),r},n.sortStable=b.split("").sort(C).join("")===b,n.detectDuplicates=!!d,h(),n.sortDetached=ae((function(e){return 1&e.compareDocumentPosition(f.createElement("div"))})),ae((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||se("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ae((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||se("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ae((function(e){return null==e.getAttribute("disabled")}))||se(F,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),ie}(n);g.find=_,g.expr=_.selectors,g.expr[":"]=g.expr.pseudos,g.uniqueSort=g.unique=_.uniqueSort,g.text=_.getText,g.isXMLDoc=_.isXML,g.contains=_.contains;var x=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&g(e).is(n))break;i.push(e)}return i},k=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},E=g.expr.match.needsContext,S=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,T=/^.[^:#\[\.,]*$/;function C(e,t,n){if(g.isFunction(t))return g.grep(e,(function(e,i){return!!t.call(e,i,e)!==n}));if(t.nodeType)return g.grep(e,(function(e){return e===t!==n}));if("string"==typeof t){if(T.test(t))return g.filter(t,e,n);t=g.filter(t,e)}return g.grep(e,(function(e){return u.call(t,e)>-1!==n}))}g.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?g.find.matchesSelector(i,e)?[i]:[]:g.find.matches(e,g.grep(t,(function(e){return 1===e.nodeType})))},g.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(g(e).filter((function(){for(t=0;t<n;t++)if(g.contains(r[t],this))return!0})));for(t=0;t<n;t++)g.find(e,r[t],i);return(i=this.pushStack(n>1?g.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&E.test(e)?g(e):e||[],!1).length}});var j,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(g.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||j,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:D.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof g?t[0]:t,g.merge(this,g.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:a,!0)),S.test(i[1])&&g.isPlainObject(t))for(i in t)g.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=a.getElementById(i[2]))&&r.parentNode&&(this.length=1,this[0]=r),this.context=a,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):g.isFunction(e)?void 0!==n.ready?n.ready(e):e(g):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),g.makeArray(e,this))}).prototype=g.fn,j=g(a);var O=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}g.fn.extend({has:function(e){var t=g(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(g.contains(this,t[e]))return!0}))},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=E.test(e)||"string"!=typeof e?g(e,t||this.context):0;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&g.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?g.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(g(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),g.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,n){return x(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,n){return x(e,"nextSibling",n)},prevUntil:function(e,t,n){return x(e,"previousSibling",n)},siblings:function(e){return k((e.parentNode||{}).firstChild,e)},children:function(e){return k(e.firstChild)},contents:function(e){return e.contentDocument||g.merge([],e.childNodes)}},(function(e,t){g.fn[e]=function(n,i){var r=g.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=g.filter(i,r)),this.length>1&&(P[e]||g.uniqueSort(r),O.test(e)&&r.reverse()),this.pushStack(r)}}));var M,I=/\S+/g;function F(){a.removeEventListener("DOMContentLoaded",F),n.removeEventListener("load",F),g.ready()}g.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return g.each(e.match(I)||[],(function(e,n){t[n]=!0})),t}(e):g.extend({},e);var t,n,i,r,o=[],a=[],s=-1,l=function(){for(r=e.once,i=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,r&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){g.each(n,(function(n,i){g.isFunction(i)?e.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==g.type(i)&&t(i)}))}(arguments),n&&!t&&l()),this},remove:function(){return g.each(arguments,(function(e,t){for(var n;(n=g.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(e){return e?g.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=a=[],n||(o=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},g.extend({Deferred:function(e){var t=[["resolve","done",g.Callbacks("once memory"),"resolved"],["reject","fail",g.Callbacks("once memory"),"rejected"],["notify","progress",g.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return g.Deferred((function(n){g.each(t,(function(t,o){var a=g.isFunction(e[t])&&e[t];r[o[1]]((function(){var e=a&&a.apply(this,arguments);e&&g.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===i?n.promise():this,a?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?g.extend(e,i):i}},r={};return i.pipe=i.then,g.each(t,(function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add((function(){n=s}),t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith})),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=s.call(arguments),a=o.length,l=1!==a||e&&g.isFunction(e.promise)?a:0,c=1===l?e:g.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?s.call(arguments):r,i===t?c.notifyWith(n,i):--l||c.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);r<a;r++)o[r]&&g.isFunction(o[r].promise)?o[r].promise().progress(u(r,n,t)).done(u(r,i,o)).fail(c.reject):--l;return l||c.resolveWith(i,o),c.promise()}}),g.fn.ready=function(e){return g.ready.promise().done(e),this},g.extend({isReady:!1,readyWait:1,holdReady:function(e){e?g.readyWait++:g.ready(!0)},ready:function(e){(!0===e?--g.readyWait:g.isReady)||(g.isReady=!0,!0!==e&&--g.readyWait>0||(M.resolveWith(a,[g]),g.fn.triggerHandler&&(g(a).triggerHandler("ready"),g(a).off("ready"))))}}),g.ready.promise=function(e){return M||(M=g.Deferred(),"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(g.ready):(a.addEventListener("DOMContentLoaded",F),n.addEventListener("load",F))),M.promise(e)},g.ready.promise();var z=function(e,t,n,i,r,o,a){var s=0,l=e.length,c=null==n;if("object"===g.type(n))for(s in r=!0,n)z(e,t,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,g.isFunction(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(g(e),n)})),t))for(;s<l;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:c?t.call(e):l?t(e[0],n):o},L=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function N(){this.expando=g.expando+N.uid++}N.uid=1,N.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!L(e))return{};var t=e[this.expando];return t||(t={},L(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[t]=n;else for(i in t)r[i]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(i=this.get(e,t))?i:this.get(e,g.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{g.isArray(t)?i=t.concat(t.map(g.camelCase)):(r=g.camelCase(t),i=t in o?[t,r]:(i=r)in o?[i]:i.match(I)||[]),n=i.length;for(;n--;)delete o[i[n]]}(void 0===t||g.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!g.isEmptyObject(t)}};var V=new N,$=new N,R=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,B=/[A-Z]/g;function q(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(B,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:R.test(n)?g.parseJSON(n):n)}catch(e){}$.set(e,t,n)}else n=void 0;return n}g.extend({hasData:function(e){return $.hasData(e)||V.hasData(e)},data:function(e,t,n){return $.access(e,t,n)},removeData:function(e,t){$.remove(e,t)},_data:function(e,t,n){return V.access(e,t,n)},_removeData:function(e,t){V.remove(e,t)}}),g.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=$.get(o),1===o.nodeType&&!V.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=g.camelCase(i.slice(5)),q(o,i,r[i]));V.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each((function(){$.set(this,e)})):z(this,(function(t){var n,i;if(o&&void 0===t)return void 0!==(n=$.get(o,e)||$.get(o,e.replace(B,"-$&").toLowerCase()))?n:(i=g.camelCase(e),void 0!==(n=$.get(o,i))||void 0!==(n=q(o,i,void 0))?n:void 0);i=g.camelCase(e),this.each((function(){var n=$.get(this,i);$.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&$.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){$.remove(this,e)}))}}),g.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=V.get(e,t),n&&(!i||g.isArray(n)?i=V.access(e,t,g.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=g.queue(e,t),i=n.length,r=n.shift(),o=g._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,(function(){g.dequeue(e,t)}),o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return V.get(e,n)||V.access(e,n,{empty:g.Callbacks("once memory").add((function(){V.remove(e,[t+"queue",n])}))})}}),g.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?g.queue(this[0],e):void 0===t?this:this.each((function(){var n=g.queue(this,e,t);g._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&g.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){g.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=g.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=V.get(o[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var U=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,H=new RegExp("^(?:([+-])=|)("+U+")([a-z%]*)$","i"),W=["Top","Right","Bottom","Left"],G=function(e,t){return e=t||e,"none"===g.css(e,"display")||!g.contains(e.ownerDocument,e)};function K(e,t,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return g.css(e,t,"")},l=s(),c=n&&n[3]||(g.cssNumber[t]?"":"px"),u=(g.cssNumber[t]||"px"!==c&&+l)&&H.exec(g.css(e,t));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do{u/=o=o||".5",g.style(e,t,u+c)}while(o!==(o=s()/l)&&1!==o&&--a)}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,J=/^$|\/(?:java|ecma)script/i,Q={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Z(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&g.nodeName(e,t)?g.merge([e],n):n}function ee(e,t){for(var n=0,i=e.length;n<i;n++)V.set(e[n],"globalEval",!t||V.get(t[n],"globalEval"))}Q.optgroup=Q.option,Q.tbody=Q.tfoot=Q.colgroup=Q.caption=Q.thead,Q.th=Q.td;var te,ne,ie=/<|&#?\w+;/;function re(e,t,n,i,r){for(var o,a,s,l,c,u,d=t.createDocumentFragment(),h=[],f=0,p=e.length;f<p;f++)if((o=e[f])||0===o)if("object"===g.type(o))g.merge(h,o.nodeType?[o]:o);else if(ie.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(Y.exec(o)||["",""])[1].toLowerCase(),l=Q[s]||Q._default,a.innerHTML=l[1]+g.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;g.merge(h,a.childNodes),(a=d.firstChild).textContent=""}else h.push(t.createTextNode(o));for(d.textContent="",f=0;o=h[f++];)if(i&&g.inArray(o,i)>-1)r&&r.push(o);else if(c=g.contains(o.ownerDocument,o),a=Z(d.appendChild(o),"script"),c&&ee(a),n)for(u=0;o=a[u++];)J.test(o.type||"")&&n.push(o);return d}te=a.createDocumentFragment().appendChild(a.createElement("div")),(ne=a.createElement("input")).setAttribute("type","radio"),ne.setAttribute("checked","checked"),ne.setAttribute("name","t"),te.appendChild(ne),p.checkClone=te.cloneNode(!0).cloneNode(!0).lastChild.checked,te.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!te.cloneNode(!0).lastChild.defaultValue;var oe=/^key/,ae=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,se=/^([^.]*)(?:\.(.+)|)/;function le(){return!0}function ce(){return!1}function ue(){try{return a.activeElement}catch(e){}}function de(e,t,n,i,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)de(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=ce;else if(!r)return this;return 1===o&&(a=r,(r=function(e){return g().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=g.guid++)),e.each((function(){g.event.add(this,t,r,i,n)}))}g.event={global:{},add:function(e,t,n,i,r){var o,a,s,l,c,u,d,h,f,p,m,v=V.get(e);if(v)for(n.handler&&(n=(o=n).handler,r=o.selector),n.guid||(n.guid=g.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==g&&g.event.triggered!==t.type?g.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(I)||[""]).length;c--;)f=m=(s=se.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),f&&(d=g.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=g.event.special[f]||{},u=g.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&g.expr.match.needsContext.test(r),namespace:p.join(".")},o),(h=l[f])||((h=l[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,p,a)||e.addEventListener&&e.addEventListener(f,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),g.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,a,s,l,c,u,d,h,f,p,m,v=V.hasData(e)&&V.get(e);if(v&&(l=v.events)){for(c=(t=(t||"").match(I)||[""]).length;c--;)if(f=m=(s=se.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),f){for(d=g.event.special[f]||{},h=l[f=(i?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)u=h[o],!r&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));a&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,p,v.handle)||g.removeEvent(e,f,v.handle),delete l[f])}else for(f in l)g.event.remove(e,f+t[c],n,i,!0);g.isEmptyObject(l)&&V.remove(e,"handle events")}},dispatch:function(e){e=g.event.fix(e);var t,n,i,r,o,a=[],l=s.call(arguments),c=(V.get(this,"events")||{})[e.type]||[],u=g.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(a=g.event.handlers.call(this,e,c),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(i=((g.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],n=0;n<s;n++)void 0===i[r=(o=t[n]).selector+" "]&&(i[r]=o.needsContext?g(r,this).index(l)>-1:g.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&a.push({elem:l,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(i=(n=e.target.ownerDocument||a).documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[g.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=ae.test(r)?this.mouseHooks:oe.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new g.Event(o),t=i.length;t--;)e[n=i[t]]=o[n];return e.target||(e.target=a),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ue()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ue()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&g.nodeName(this,"input"))return this.click(),!1},_default:function(e){return g.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},g.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},g.Event=function(e,t){if(!(this instanceof g.Event))return new g.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?le:ce):this.type=e,t&&g.extend(this,t),this.timeStamp=e&&e.timeStamp||g.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:ce,isPropagationStopped:ce,isImmediatePropagationStopped:ce,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=le,e&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=le,e&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=le,e&&e.stopImmediatePropagation(),this.stopPropagation()}},g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){g.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||g.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),g.fn.extend({on:function(e,t,n,i){return de(this,e,t,n,i)},one:function(e,t,n,i){return de(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,g(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ce),this.each((function(){g.event.remove(this,e,n,t)}))}});var he=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,fe=/<script|<style|<link/i,pe=/checked\s*(?:[^=]|=\s*.checked.)/i,ge=/^true\/(.*)/,me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ve(e,t){return g.nodeName(e,"table")&&g.nodeName(11!==t.nodeType?t:t.firstChild,"tr")&&e.getElementsByTagName("tbody")[0]||e}function ye(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function we(e){var t=ge.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function be(e,t){var n,i,r,o,a,s,l,c;if(1===t.nodeType){if(V.hasData(e)&&(o=V.access(e),a=V.set(t,o),c=o.events))for(r in delete a.handle,a.events={},c)for(n=0,i=c[r].length;n<i;n++)g.event.add(t,r,c[r][n]);$.hasData(e)&&(s=$.access(e),l=g.extend({},s),$.set(t,l))}}function _e(e,t,n,i){t=l.apply([],t);var r,o,a,s,c,u,d=0,h=e.length,f=h-1,m=t[0],v=g.isFunction(m);if(v||h>1&&"string"==typeof m&&!p.checkClone&&pe.test(m))return e.each((function(r){var o=e.eq(r);v&&(t[0]=m.call(this,r,o.html())),_e(o,t,n,i)}));if(h&&(o=(r=re(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=o),o||i)){for(s=(a=g.map(Z(r,"script"),ye)).length;d<h;d++)c=r,d!==f&&(c=g.clone(c,!0,!0),s&&g.merge(a,Z(c,"script"))),n.call(e[d],c,d);if(s)for(u=a[a.length-1].ownerDocument,g.map(a,we),d=0;d<s;d++)c=a[d],J.test(c.type||"")&&!V.access(c,"globalEval")&&g.contains(u,c)&&(c.src?g._evalUrl&&g._evalUrl(c.src):g.globalEval(c.textContent.replace(me,"")))}return e}function xe(e,t,n){for(var i,r=t?g.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||g.cleanData(Z(i)),i.parentNode&&(n&&g.contains(i.ownerDocument,i)&&ee(Z(i,"script")),i.parentNode.removeChild(i));return e}g.extend({htmlPrefilter:function(e){return e.replace(he,"<$1></$2>")},clone:function(e,t,n){var i,r,o,a,s,l,c,u=e.cloneNode(!0),d=g.contains(e.ownerDocument,e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||g.isXMLDoc(e)))for(a=Z(u),i=0,r=(o=Z(e)).length;i<r;i++)s=o[i],l=a[i],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&X.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(o=o||Z(e),a=a||Z(u),i=0,r=o.length;i<r;i++)be(o[i],a[i]);else be(e,u);return(a=Z(u,"script")).length>0&&ee(a,!d&&Z(e,"script")),u},cleanData:function(e){for(var t,n,i,r=g.event.special,o=0;void 0!==(n=e[o]);o++)if(L(n)){if(t=n[V.expando]){if(t.events)for(i in t.events)r[i]?g.event.remove(n,i):g.removeEvent(n,i,t.handle);n[V.expando]=void 0}n[$.expando]&&(n[$.expando]=void 0)}}}),g.fn.extend({domManip:_e,detach:function(e){return xe(this,e,!0)},remove:function(e){return xe(this,e)},text:function(e){return z(this,(function(e){return void 0===e?g.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return _e(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ve(this,e).appendChild(e)}))},prepend:function(){return _e(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ve(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return _e(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return _e(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(g.cleanData(Z(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return g.clone(this,e,t)}))},html:function(e){return z(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!fe.test(e)&&!Q[(Y.exec(e)||["",""])[1].toLowerCase()]){e=g.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(g.cleanData(Z(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return _e(this,arguments,(function(t){var n=this.parentNode;g.inArray(this,e)<0&&(g.cleanData(Z(this)),n&&n.replaceChild(t,this))}),e)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){g.fn[e]=function(e){for(var n,i=[],r=g(e),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),g(r[a])[t](n),c.apply(i,n.get());return this.pushStack(i)}}));var ke,Ee={HTML:"block",BODY:"block"};function Se(e,t){var n=g(t.createElement(e)).appendTo(t.body),i=g.css(n[0],"display");return n.detach(),i}function Te(e){var t=a,n=Ee[e];return n||("none"!==(n=Se(e,t))&&n||((t=(ke=(ke||g("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=Se(e,t),ke.detach()),Ee[e]=n),n}var Ce=/^margin/,je=new RegExp("^("+U+")(?!px)[a-z%]+$","i"),De=function(e){var t=e.ownerDocument.defaultView;return t.opener||(t=n),t.getComputedStyle(e)},Oe=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in r=n.apply(e,i||[]),t)e.style[o]=a[o];return r},Pe=a.documentElement;function Ae(e,t,n){var i,r,o,a,s=e.style;return(n=n||De(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||g.contains(e.ownerDocument,e)||(a=g.style(e,t)),!p.pixelMarginRight()&&je.test(a)&&Ce.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function Me(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var e,t,i,r,o=a.createElement("div"),s=a.createElement("div");function l(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Pe.appendChild(o);var a=n.getComputedStyle(s);e="1%"!==a.top,r="2px"===a.marginLeft,t="4px"===a.width,s.style.marginRight="50%",i="4px"===a.marginRight,Pe.removeChild(o)}s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(s),g.extend(p,{pixelPosition:function(){return l(),e},boxSizingReliable:function(){return null==t&&l(),t},pixelMarginRight:function(){return null==t&&l(),i},reliableMarginLeft:function(){return null==t&&l(),r},reliableMarginRight:function(){var e,t=s.appendChild(a.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",Pe.appendChild(o),e=!parseFloat(n.getComputedStyle(t).marginRight),Pe.removeChild(o),s.removeChild(t),e}}))}();var Ie=/^(none|table(?!-c[ea]).+)/,Fe={position:"absolute",visibility:"hidden",display:"block"},ze={letterSpacing:"0",fontWeight:"400"},Le=["Webkit","O","Moz","ms"],Ne=a.createElement("div").style;function Ve(e){if(e in Ne)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Le.length;n--;)if((e=Le[n]+t)in Ne)return e}function $e(e,t,n){var i=H.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function Re(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=g.css(e,n+W[o],!0,r)),i?("content"===n&&(a-=g.css(e,"padding"+W[o],!0,r)),"margin"!==n&&(a-=g.css(e,"border"+W[o]+"Width",!0,r))):(a+=g.css(e,"padding"+W[o],!0,r),"padding"!==n&&(a+=g.css(e,"border"+W[o]+"Width",!0,r)));return a}function Be(e,t,i){var r=!0,o="width"===t?e.offsetWidth:e.offsetHeight,s=De(e),l="border-box"===g.css(e,"boxSizing",!1,s);if(a.msFullscreenElement&&n.top!==n&&e.getClientRects().length&&(o=Math.round(100*e.getBoundingClientRect()[t])),o<=0||null==o){if(((o=Ae(e,t,s))<0||null==o)&&(o=e.style[t]),je.test(o))return o;r=l&&(p.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+Re(e,t,i||(l?"border":"content"),r,s)+"px"}function qe(e,t){for(var n,i,r,o=[],a=0,s=e.length;a<s;a++)(i=e[a]).style&&(o[a]=V.get(i,"olddisplay"),n=i.style.display,t?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&G(i)&&(o[a]=V.access(i,"olddisplay",Te(i.nodeName)))):(r=G(i),"none"===n&&r||V.set(i,"olddisplay",r?n:g.css(i,"display"))));for(a=0;a<s;a++)(i=e[a]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function Ue(e,t,n,i,r){return new Ue.prototype.init(e,t,n,i,r)}g.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ae(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=g.camelCase(t),l=e.style;if(t=g.cssProps[s]||(g.cssProps[s]=Ve(s)||s),a=g.cssHooks[t]||g.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:l[t];"string"==(o=typeof n)&&(r=H.exec(n))&&r[1]&&(n=K(e,t,r),o="number"),null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||(g.cssNumber[s]?"":"px")),p.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l[t]=n))}},css:function(e,t,n,i){var r,o,a,s=g.camelCase(t);return t=g.cssProps[s]||(g.cssProps[s]=Ve(s)||s),(a=g.cssHooks[t]||g.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=Ae(e,t,i)),"normal"===r&&t in ze&&(r=ze[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),g.each(["height","width"],(function(e,t){g.cssHooks[t]={get:function(e,n,i){if(n)return Ie.test(g.css(e,"display"))&&0===e.offsetWidth?Oe(e,Fe,(function(){return Be(e,t,i)})):Be(e,t,i)},set:function(e,n,i){var r,o=i&&De(e),a=i&&Re(e,t,i,"border-box"===g.css(e,"boxSizing",!1,o),o);return a&&(r=H.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=g.css(e,t)),$e(0,n,a)}}})),g.cssHooks.marginLeft=Me(p.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ae(e,"marginLeft"))||e.getBoundingClientRect().left-Oe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),g.cssHooks.marginRight=Me(p.reliableMarginRight,(function(e,t){if(t)return Oe(e,{display:"inline-block"},Ae,[e,"marginRight"])})),g.each({margin:"",padding:"",border:"Width"},(function(e,t){g.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+W[i]+t]=o[i]||o[i-2]||o[0];return r}},Ce.test(e)||(g.cssHooks[e+t].set=$e)})),g.fn.extend({css:function(e,t){return z(this,(function(e,t,n){var i,r,o={},a=0;if(g.isArray(t)){for(i=De(e),r=t.length;a<r;a++)o[t[a]]=g.css(e,t[a],!1,i);return o}return void 0!==n?g.style(e,t,n):g.css(e,t)}),e,t,arguments.length>1)},show:function(){return qe(this,!0)},hide:function(){return qe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){G(this)?g(this).show():g(this).hide()}))}}),g.Tween=Ue,Ue.prototype={constructor:Ue,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||g.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(g.cssNumber[n]?"":"px")},cur:function(){var e=Ue.propHooks[this.prop];return e&&e.get?e.get(this):Ue.propHooks._default.get(this)},run:function(e){var t,n=Ue.propHooks[this.prop];return this.options.duration?this.pos=t=g.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ue.propHooks._default.set(this),this}},Ue.prototype.init.prototype=Ue.prototype,Ue.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=g.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){g.fx.step[e.prop]?g.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[g.cssProps[e.prop]]&&!g.cssHooks[e.prop]?e.elem[e.prop]=e.now:g.style(e.elem,e.prop,e.now+e.unit)}}},Ue.propHooks.scrollTop=Ue.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},g.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},g.fx=Ue.prototype.init,g.fx.step={};var He,We,Ge=/^(?:toggle|show|hide)$/,Ke=/queueHooks$/;function Xe(){return n.setTimeout((function(){He=void 0})),He=g.now()}function Ye(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=W[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function Je(e,t,n){for(var i,r=(Qe.tweeners[t]||[]).concat(Qe.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function Qe(e,t,n){var i,r,o=0,a=Qe.prefilters.length,s=g.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var t=He||Xe(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(i);return s.notifyWith(e,[c,i,n]),i<1&&a?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:g.extend({},t),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},n),originalProperties:t,originalOptions:n,startTime:He||Xe(),duration:n.duration,tweens:[],createTween:function(t,n){var i=g.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var n,i,r,o,a;for(n in e)if(r=t[i=g.camelCase(n)],o=e[n],g.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(a=g.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete e[i],o)n in e||(e[n]=o[n],t[n]=r);else t[i]=r}(u,c.opts.specialEasing);o<a;o++)if(i=Qe.prefilters[o].call(c,e,u,c.opts))return g.isFunction(i.stop)&&(g._queueHooks(c.elem,c.opts.queue).stop=g.proxy(i.stop,i)),i;return g.map(u,Je,c),g.isFunction(c.opts.start)&&c.opts.start.call(e,c),g.fx.timer(g.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}g.Animation=g.extend(Qe,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return K(n.elem,e,H.exec(t),n),n}]},tweener:function(e,t){g.isFunction(e)?(t=e,e=["*"]):e=e.match(I);for(var n,i=0,r=e.length;i<r;i++)n=e[i],Qe.tweeners[n]=Qe.tweeners[n]||[],Qe.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,o,a,s,l,c,u=this,d={},h=e.style,f=e.nodeType&&G(e),p=V.get(e,"fxshow");for(i in n.queue||(null==(s=g._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always((function(){u.always((function(){s.unqueued--,g.queue(e,"fx").length||s.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(c=g.css(e,"display"))?V.get(e,"olddisplay")||Te(e.nodeName):c)&&"none"===g.css(e,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",u.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),t)if(r=t[i],Ge.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!p||void 0===p[i])continue;f=!0}d[i]=p&&p[i]||g.style(e,i)}else c=void 0;if(g.isEmptyObject(d))"inline"===("none"===c?Te(e.nodeName):c)&&(h.display=c);else for(i in p?"hidden"in p&&(f=p.hidden):p=V.access(e,"fxshow",{}),o&&(p.hidden=!f),f?g(e).show():u.done((function(){g(e).hide()})),u.done((function(){var t;for(t in V.remove(e,"fxshow"),d)g.style(e,t,d[t])})),d)a=Je(f?p[i]:0,i,u),i in p||(p[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}],prefilter:function(e,t){t?Qe.prefilters.unshift(e):Qe.prefilters.push(e)}}),g.speed=function(e,t,n){var i=e&&"object"==typeof e?g.extend({},e):{complete:n||!n&&t||g.isFunction(e)&&e,duration:e,easing:n&&t||t&&!g.isFunction(t)&&t};return i.duration=g.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in g.fx.speeds?g.fx.speeds[i.duration]:g.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){g.isFunction(i.old)&&i.old.call(this),i.queue&&g.dequeue(this,i.queue)},i},g.fn.extend({fadeTo:function(e,t,n,i){return this.filter(G).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=g.isEmptyObject(e),o=g.speed(t,n,i),a=function(){var t=Qe(this,g.extend({},e),o);(r||V.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,r=null!=e&&e+"queueHooks",o=g.timers,a=V.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&Ke.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||g.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=V.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=g.timers,a=i?i.length:0;for(n.finish=!0,g.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),g.each(["toggle","show","hide"],(function(e,t){var n=g.fn[t];g.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Ye(t,!0),e,i,r)}})),g.each({slideDown:Ye("show"),slideUp:Ye("hide"),slideToggle:Ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){g.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),g.timers=[],g.fx.tick=function(){var e,t=0,n=g.timers;for(He=g.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||g.fx.stop(),He=void 0},g.fx.timer=function(e){g.timers.push(e),e()?g.fx.start():g.timers.pop()},g.fx.interval=13,g.fx.start=function(){We||(We=n.setInterval(g.fx.tick,g.fx.interval))},g.fx.stop=function(){n.clearInterval(We),We=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(e,t){return e=g.fx&&g.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,i){var r=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(r)}}))},function(){var e=a.createElement("input"),t=a.createElement("select"),n=t.appendChild(a.createElement("option"));e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=n.selected,t.disabled=!0,p.optDisabled=!n.disabled,(e=a.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}();var Ze,et=g.expr.attrHandle;g.fn.extend({attr:function(e,t){return z(this,g.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){g.removeAttr(this,e)}))}}),g.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?g.prop(e,t,n):(1===o&&g.isXMLDoc(e)||(t=t.toLowerCase(),r=g.attrHooks[t]||(g.expr.match.bool.test(t)?Ze:void 0)),void 0!==n?null===n?void g.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=g.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&g.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(I);if(o&&1===e.nodeType)for(;n=o[r++];)i=g.propFix[n]||n,g.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),Ze={set:function(e,t,n){return!1===t?g.removeAttr(e,n):e.setAttribute(n,n),n}},g.each(g.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=et[t]||g.find.attr;et[t]=function(e,t,i){var r,o;return i||(o=et[t],et[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,et[t]=o),r}}));var tt=/^(?:input|select|textarea|button)$/i,nt=/^(?:a|area)$/i;g.fn.extend({prop:function(e,t){return z(this,g.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[g.propFix[e]||e]}))}}),g.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&g.isXMLDoc(e)||(t=g.propFix[t]||t,r=g.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=g.find.attr(e,"tabindex");return t?parseInt(t,10):tt.test(e.nodeName)||nt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(g.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){g.propFix[this.toLowerCase()]=this}));var it=/[\t\r\n\f]/g;function rt(e){return e.getAttribute&&e.getAttribute("class")||""}g.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,l=0;if(g.isFunction(e))return this.each((function(t){g(this).addClass(e.call(this,t,rt(this)))}));if("string"==typeof e&&e)for(t=e.match(I)||[];n=this[l++];)if(r=rt(n),i=1===n.nodeType&&(" "+r+" ").replace(it," ")){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=g.trim(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,l=0;if(g.isFunction(e))return this.each((function(t){g(this).removeClass(e.call(this,t,rt(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(I)||[];n=this[l++];)if(r=rt(n),i=1===n.nodeType&&(" "+r+" ").replace(it," ")){for(a=0;o=t[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r!==(s=g.trim(i))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):g.isFunction(e)?this.each((function(n){g(this).toggleClass(e.call(this,n,rt(this),t),t)})):this.each((function(){var t,i,r,o;if("string"===n)for(i=0,r=g(this),o=e.match(I)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||((t=rt(this))&&V.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":V.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+rt(n)+" ").replace(it," ").indexOf(t)>-1)return!0;return!1}});var ot=/\r/g;g.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=g.isFunction(e),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,g(this).val()):e)?r="":"number"==typeof r?r+="":g.isArray(r)&&(r=g.map(r,(function(e){return null==e?"":e+""}))),(t=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=g.valHooks[r.type]||g.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(ot,""):null==n?"":n:void 0}}),g.extend({valHooks:{option:{get:function(e){return g.trim(e.value)}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||r<0,a=o?null:[],s=o?r+1:i.length,l=r<0?s:o?r:0;l<s;l++)if(((n=i[l]).selected||l===r)&&(p.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!g.nodeName(n.parentNode,"optgroup"))){if(t=g(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=g.makeArray(t),a=r.length;a--;)((i=r[a]).selected=g.inArray(g.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),g.each(["radio","checkbox"],(function(){g.valHooks[this]={set:function(e,t){if(g.isArray(t))return e.checked=g.inArray(g(e).val(),t)>-1}},p.checkOn||(g.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var at=/^(?:focusinfocus|focusoutblur)$/;g.extend(g.event,{trigger:function(e,t,i,r){var o,s,l,c,u,d,h,p=[i||a],m=f.call(e,"type")?e.type:e,v=f.call(e,"namespace")?e.namespace.split("."):[];if(s=l=i=i||a,3!==i.nodeType&&8!==i.nodeType&&!at.test(m+g.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),u=m.indexOf(":")<0&&"on"+m,(e=e[g.expando]?e:new g.Event(m,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:g.makeArray(t,[e]),h=g.event.special[m]||{},r||!h.trigger||!1!==h.trigger.apply(i,t))){if(!r&&!h.noBubble&&!g.isWindow(i)){for(c=h.delegateType||m,at.test(c+m)||(s=s.parentNode);s;s=s.parentNode)p.push(s),l=s;l===(i.ownerDocument||a)&&p.push(l.defaultView||l.parentWindow||n)}for(o=0;(s=p[o++])&&!e.isPropagationStopped();)e.type=o>1?c:h.bindType||m,(d=(V.get(s,"events")||{})[e.type]&&V.get(s,"handle"))&&d.apply(s,t),(d=u&&s[u])&&d.apply&&L(s)&&(e.result=d.apply(s,t),!1===e.result&&e.preventDefault());return e.type=m,r||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!L(i)||u&&g.isFunction(i[m])&&!g.isWindow(i)&&((l=i[u])&&(i[u]=null),g.event.triggered=m,i[m](),g.event.triggered=void 0,l&&(i[u]=l)),e.result}},simulate:function(e,t,n){var i=g.extend(new g.Event,n,{type:e,isSimulated:!0});g.event.trigger(i,null,t),i.isDefaultPrevented()&&n.preventDefault()}}),g.fn.extend({trigger:function(e,t){return this.each((function(){g.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return g.event.trigger(e,t,n,!0)}}),g.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){g.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),g.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),p.focusin="onfocusin"in n,p.focusin||g.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){g.event.simulate(t,e.target,g.event.fix(e))};g.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=V.access(i,t);r||i.addEventListener(e,n,!0),V.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=V.access(i,t)-1;r?V.access(i,t,r):(i.removeEventListener(e,n,!0),V.remove(i,t))}}}));var st=n.location,lt=g.now(),ct=/\?/;g.parseJSON=function(e){return JSON.parse(e+"")},g.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||g.error("Invalid XML: "+e),t};var ut=/#.*$/,dt=/([?&])_=[^&]*/,ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,ft=/^(?:GET|HEAD)$/,pt=/^\/\//,gt={},mt={},vt="*/".concat("*"),yt=a.createElement("a");function wt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(I)||[];if(g.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function bt(e,t,n,i){var r={},o=e===mt;function a(s){var l;return r[s]=!0,g.each(e[s]||[],(function(e,s){var c=s(t,n,i);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)})),l}return a(t.dataTypes[0])||!r["*"]&&a("*")}function _t(e,t){var n,i,r=g.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&g.extend(!0,e,i),e}yt.href=st.href,g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:st.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(st.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":g.parseJSON,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_t(_t(e,g.ajaxSettings),t):_t(g.ajaxSettings,e)},ajaxPrefilter:wt(gt),ajaxTransport:wt(mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,o,s,l,c,u,d,h=g.ajaxSetup({},t),f=h.context||h,p=h.context&&(f.nodeType||f.jquery)?g(f):g.event,m=g.Deferred(),v=g.Callbacks("once memory"),y=h.statusCode||{},w={},b={},_=0,x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!s)for(s={};t=ht.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=b[n]=b[n]||e,w[e]=t),this},overrideMimeType:function(e){return _||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(_<2)for(t in e)y[t]=[y[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||x;return i&&i.abort(t),E(0,t),this}};if(m.promise(k).complete=v.add,k.success=k.done,k.error=k.fail,h.url=((e||h.url||st.href)+"").replace(ut,"").replace(pt,st.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=g.trim(h.dataType||"*").toLowerCase().match(I)||[""],null==h.crossDomain){c=a.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=yt.protocol+"//"+yt.host!=c.protocol+"//"+c.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=g.param(h.data,h.traditional)),bt(gt,h,t,k),2===_)return k;for(d in(u=g.event&&h.global)&&0==g.active++&&g.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!ft.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(ct.test(r)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=dt.test(r)?r.replace(dt,"$1_="+lt++):r+(ct.test(r)?"&":"?")+"_="+lt++)),h.ifModified&&(g.lastModified[r]&&k.setRequestHeader("If-Modified-Since",g.lastModified[r]),g.etag[r]&&k.setRequestHeader("If-None-Match",g.etag[r])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&k.setRequestHeader("Content-Type",h.contentType),k.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+vt+"; q=0.01":""):h.accepts["*"]),h.headers)k.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(!1===h.beforeSend.call(f,k,h)||2===_))return k.abort();for(d in x="abort",{success:1,error:1,complete:1})k[d](h[d]);if(i=bt(mt,h,t,k)){if(k.readyState=1,u&&p.trigger("ajaxSend",[k,h]),2===_)return k;h.async&&h.timeout>0&&(l=n.setTimeout((function(){k.abort("timeout")}),h.timeout));try{_=1,i.send(w,E)}catch(e){if(!(_<2))throw e;E(-1,e)}}else E(-1,"No Transport");function E(e,t,a,s){var c,d,w,b,x,E=t;2!==_&&(_=2,l&&n.clearTimeout(l),i=void 0,o=s||"",k.readyState=e>0?4:0,c=e>=200&&e<300||304===e,a&&(b=function(e,t,n){for(var i,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(h,k,a)),b=function(e,t,n,i){var r,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(h,b,k,c),c?(h.ifModified&&((x=k.getResponseHeader("Last-Modified"))&&(g.lastModified[r]=x),(x=k.getResponseHeader("etag"))&&(g.etag[r]=x)),204===e||"HEAD"===h.type?E="nocontent":304===e?E="notmodified":(E=b.state,d=b.data,c=!(w=b.error))):(w=E,!e&&E||(E="error",e<0&&(e=0))),k.status=e,k.statusText=(t||E)+"",c?m.resolveWith(f,[d,E,k]):m.rejectWith(f,[k,E,w]),k.statusCode(y),y=void 0,u&&p.trigger(c?"ajaxSuccess":"ajaxError",[k,h,c?d:w]),v.fireWith(f,[k,E]),u&&(p.trigger("ajaxComplete",[k,h]),--g.active||g.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,n){return g.get(e,t,n,"json")},getScript:function(e,t){return g.get(e,void 0,t,"script")}}),g.each(["get","post"],(function(e,t){g[t]=function(e,n,i,r){return g.isFunction(n)&&(r=r||i,i=n,n=void 0),g.ajax(g.extend({url:e,type:t,dataType:r,data:n,success:i},g.isPlainObject(e)&&e))}})),g._evalUrl=function(e){return g.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},g.fn.extend({wrapAll:function(e){var t;return g.isFunction(e)?this.each((function(t){g(this).wrapAll(e.call(this,t))})):(this[0]&&(t=g(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this)},wrapInner:function(e){return g.isFunction(e)?this.each((function(t){g(this).wrapInner(e.call(this,t))})):this.each((function(){var t=g(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g.isFunction(e);return this.each((function(n){g(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(){return this.parent().each((function(){g.nodeName(this,"body")||g(this).replaceWith(this.childNodes)})).end()}}),g.expr.filters.hidden=function(e){return!g.expr.filters.visible(e)},g.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var xt=/%20/g,kt=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,Tt=/^(?:input|select|textarea|keygen)/i;function Ct(e,t,n,i){var r;if(g.isArray(t))g.each(t,(function(t,r){n||kt.test(e)?i(e,r):Ct(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)}));else if(n||"object"!==g.type(t))i(e,t);else for(r in t)Ct(e+"["+r+"]",t[r],n,i)}g.param=function(e,t){var n,i=[],r=function(e,t){t=g.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=g.ajaxSettings&&g.ajaxSettings.traditional),g.isArray(e)||e.jquery&&!g.isPlainObject(e))g.each(e,(function(){r(this.name,this.value)}));else for(n in e)Ct(n,e[n],t,r);return i.join("&").replace(xt,"+")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=g.prop(this,"elements");return e?g.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!g(this).is(":disabled")&&Tt.test(this.nodeName)&&!St.test(e)&&(this.checked||!X.test(e))})).map((function(e,t){var n=g(this).val();return null==n?null:g.isArray(n)?g.map(n,(function(e){return{name:t.name,value:e.replace(Et,"\r\n")}})):{name:t.name,value:n.replace(Et,"\r\n")}})).get()}}),g.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var jt={0:200,1223:204},Dt=g.ajaxSettings.xhr();p.cors=!!Dt&&"withCredentials"in Dt,p.ajax=Dt=!!Dt,g.ajaxTransport((function(e){var t,i;if(p.cors||Dt&&!e.crossDomain)return{send:function(r,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(a,r[a]);t=function(e){return function(){t&&(t=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(jt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),i=s.onerror=t("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){t&&i()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return g.globalEval(e),e}}}),g.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),g.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain)return{send:function(i,r){t=g("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),a.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Ot,Pt=[],At=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Pt.pop()||g.expando+"_"+lt++;return this[e]=!0,e}}),g.ajaxPrefilter("json jsonp",(function(e,t,i){var r,o,a,s=!1!==e.jsonp&&(At.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&At.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=g.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(At,"$1"+r):!1!==e.jsonp&&(e.url+=(ct.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||g.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=n[r],n[r]=function(){a=arguments},i.always((function(){void 0===o?g(n).removeProp(r):n[r]=o,e[r]&&(e.jsonpCallback=t.jsonpCallback,Pt.push(r)),a&&g.isFunction(o)&&o(a[0]),a=o=void 0})),"script"})),p.createHTMLDocument=((Ot=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ot.childNodes.length),g.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||(p.createHTMLDocument?a.implementation.createHTMLDocument(""):a);var i=S.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=re([e],t,r),r&&r.length&&g(r).remove(),g.merge([],i.childNodes))};var Mt=g.fn.load;function It(e){return g.isWindow(e)?e:9===e.nodeType&&e.defaultView}g.fn.load=function(e,t,n){if("string"!=typeof e&&Mt)return Mt.apply(this,arguments);var i,r,o,a=this,s=e.indexOf(" ");return s>-1&&(i=g.trim(e.slice(s)),e=e.slice(0,s)),g.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&g.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(i?g("<div>").append(g.parseHTML(e)).find(i):e)})).always(n&&function(e,t){a.each((function(){n.apply(a,o||[e.responseText,t,e])}))}),this},g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){g.fn[t]=function(e){return this.on(t,e)}})),g.expr.filters.animated=function(e){return g.grep(g.timers,(function(t){return e===t.elem})).length},g.offset={setOffset:function(e,t,n){var i,r,o,a,s,l,c=g.css(e,"position"),u=g(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=g.css(e,"top"),l=g.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(i=u.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),g.isFunction(t)&&(t=t.call(e,n,g.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):u.css(d)}},g.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){g.offset.setOffset(this,e,t)}));var t,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;return o?(t=o.documentElement,g.contains(t,i)?(r=i.getBoundingClientRect(),n=It(o),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===g.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),g.nodeName(e[0],"html")||(i=e.offset()),i.top+=g.css(e[0],"borderTopWidth",!0)-e.scrollTop(),i.left+=g.css(e[0],"borderLeftWidth",!0)-e.scrollLeft()),{top:t.top-i.top-g.css(n,"marginTop",!0),left:t.left-i.left-g.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===g.css(e,"position");)e=e.offsetParent;return e||Pe}))}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;g.fn[e]=function(i){return z(this,(function(e,i,r){var o=It(e);if(void 0===r)return o?o[t]:e[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r}),e,i,arguments.length)}})),g.each(["top","left"],(function(e,t){g.cssHooks[t]=Me(p.pixelPosition,(function(e,n){if(n)return n=Ae(e,t),je.test(n)?g(e).position()[t]+"px":n}))})),g.each({Height:"height",Width:"width"},(function(e,t){g.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){g.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===r?"margin":"border");return z(this,(function(t,n,i){var r;return g.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?g.css(t,n,a):g.style(t,n,i,a)}),t,o?i:void 0,o,null)}}))})),g.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),g.fn.andSelf=g.fn.addBack,void 0===(i=function(){return g}.apply(t,[]))||(e.exports=i);var Ft=n.jQuery,zt=n.$;return g.noConflict=function(e){return n.$===g&&(n.$=zt),e&&n.jQuery===g&&(n.jQuery=Ft),g},r||(n.jQuery=n.$=g),g},"object"==typeof e.exports?e.exports=r.document?o(r,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return o(e)}:o(r)},function(e,t,n){var i,r,o;o=this,i=[n(0),n(1),t],void 0===(r=function(e,t,n){o.Backbone=function(e,t,n,i){var r=e.Backbone,o=[],a=o.slice;t.VERSION="1.1.2",t.$=i,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=t.Events={on:function(e,t,n){return c(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,i){if(!c(this,"once",e,[t,i])||!t)return this;var r=this,o=n.once((function(){r.off(e,o),t.apply(this,arguments)}));return o._callback=t,this.on(e,o,i)},off:function(e,t,i){var r,o,a,s,l,u,d,h;if(!this._events||!c(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(l=0,u=(s=e?[e]:n.keys(this._events)).length;l<u;l++)if(e=s[l],a=this._events[e]){if(this._events[e]=r=[],t||i)for(d=0,h=a.length;d<h;d++)o=a[d],(t&&t!==o.callback&&t!==o.callback._callback||i&&i!==o.context)&&r.push(o);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&u(n,t),i&&u(i,arguments),this},stopListening:function(e,t,i){var r=this._listeningTo;if(!r)return this;var o=!t&&!i;for(var a in i||"object"!=typeof t||(i=this),e&&((r={})[e._listenId]=e),r)(e=r[a]).off(t,i,this),(o||n.isEmpty(e._events))&&delete this._listeningTo[a];return this}},l=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(l.test(n)){for(var o=n.split(l),a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(i));return!1}return!0},u=function(e,t){var n,i=-1,r=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a,s);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}};n.each({listenTo:"on",listenToOnce:"once"},(function(e,t){s[t]=function(t,i,r){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=n.uniqueId("l"))]=t,r||"object"!=typeof i||(r=this),t[e](i,r,this),this}})),s.bind=s.on,s.unbind=s.off,n.extend(t,s);var d=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var r,o,a,s,l,c,u,d;if(null==e)return this;if("object"==typeof e?(o=e,i=t):(o={})[e]=t,i||(i={}),!this._validate(o,i))return!1;for(r in a=i.unset,l=i.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),d=this.attributes,u=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]),o)t=o[r],n.isEqual(d[r],t)||s.push(r),n.isEqual(u[r],t)?delete this.changed[r]:this.changed[r]=t,a?delete d[r]:d[r]=t;if(!l){s.length&&(this._pending=i);for(var h=0,f=s.length;h<f;h++)this.trigger("change:"+s[h],this,d[s[h]],i)}if(c)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t,i=!1,r=this._changing?this._previousAttributes:this.attributes;for(var o in e)n.isEqual(r[o],t=e[o])||((i||(i={}))[o]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?n.clone(e):{}).parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;i&&i(t,n,e),t.trigger("sync",t,n,e)},A(this,e),this.sync("read",this,e)},save:function(e,t,i){var r,o,a,s=this.attributes;if(null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t,i=n.extend({validate:!0},i),r&&!i.wait){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=n.extend({},s,r)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(e){l.attributes=s;var t=l.parse(e,i);if(i.wait&&(t=n.extend(r||{},t)),n.isObject(t)&&!l.set(t,i))return!1;c&&c(l,e,i),l.trigger("sync",l,e,i)},A(this,i),"patch"==(o=this.isNew()?"create":i.patch?"patch":"update")&&(i.attrs=r),a=this.sync(o,this,i),r&&i.wait&&(this.attributes=s),a},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&r(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;A(this,e);var o=this.sync("delete",this,e);return e.wait||r(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||P();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}}),n.each(["keys","values","pairs","invert","pick","omit"],(function(e){d.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}}));var h=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},f={add:!0,remove:!0,merge:!0},p={add:!0,remove:!1};n.extend(h.prototype,s,{model:d,initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,p))},remove:function(e,t){var i,r,o,a,s=!n.isArray(e);for(t||(t={}),i=0,r=(e=s?[e]:n.clone(e)).length;i<r;i++)(a=e[i]=this.get(e[i]))&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,t.silent||(t.index=o,a.trigger("remove",a,this,t)),this._removeReference(a,t));return s?e[0]:e},set:function(e,t){(t=n.defaults({},t,f)).parse&&(e=this.parse(e,t));var i,r,o,a,s,l,c,u=!n.isArray(e);e=u?e?[e]:[]:n.clone(e);var h=t.at,p=this.model,g=this.comparator&&null==h&&!1!==t.sort,m=n.isString(this.comparator)?this.comparator:null,v=[],y=[],w={},b=t.add,_=t.merge,x=t.remove,k=!(g||!b||!x)&&[];for(i=0,r=e.length;i<r;i++){if(o=(s=e[i]||{})instanceof d?a=s:s[p.prototype.idAttribute||"id"],l=this.get(o))x&&(w[l.cid]=!0),_&&(s=s===a?a.attributes:s,t.parse&&(s=l.parse(s,t)),l.set(s,t),g&&!c&&l.hasChanged(m)&&(c=!0)),e[i]=l;else if(b){if(!(a=e[i]=this._prepareModel(s,t)))continue;v.push(a),this._addReference(a,t)}a=l||a,!k||!a.isNew()&&w[a.id]||k.push(a),w[a.id]=!0}if(x){for(i=0,r=this.length;i<r;++i)w[(a=this.models[i]).cid]||y.push(a);y.length&&this.remove(y,t)}if(v.length||k&&k.length)if(g&&(c=!0),this.length+=v.length,null!=h)for(i=0,r=v.length;i<r;i++)this.models.splice(h+i,0,v[i]);else{k&&(this.models.length=0);var E=k||v;for(i=0,r=E.length;i<r;i++)this.models.push(E[i])}if(c&&this.sort({silent:!0}),!t.silent){for(i=0,r=v.length;i<r;i++)(a=v[i]).trigger("add",a,this,t);(c||k&&k.length)&&this.trigger("sort",this,t)}return u?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,r=this.models.length;i<r;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"]((function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0}))},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){void 0===(e=e?n.clone(e):{}).parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},A(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,r=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),r&&r(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;(t=t?n.clone(t):{}).collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}}),n.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],(function(e){h.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}})),n.each(["groupBy","countBy","sortBy","indexBy"],(function(e){h.prototype[e]=function(t,i){var r=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,r,i)}}));var g=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},m=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];n.extend(g.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var r=t.match(m),o=r[1],a=r[2];i=n.bind(i,this),o+=".delegateEvents"+this.cid,""===a?this.$el.on(o,i):this.$el.on(o,a,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,r){var o=w[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(r.url||(a.url=n.result(i,"url")||P()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",r.emulateJSON&&(a.data._method=o);var s=r.beforeSend;r.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||r.emulateJSON||(a.processData=!1),"PATCH"===a.type&&y&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=t.ajax(n.extend(a,r));return i.trigger("request",i,l,r),l};var y=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),w={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var b=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},_=/\((.*?)\)/g,x=/(\(\?)?:\w+/g,k=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(b.prototype,s,{initialize:function(){},route:function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return t.history.route(e,(function(n,a){var s=o._extractParameters(e,a);o.execute(r,n,s),o.trigger.apply(o,["route:"+i].concat(s)),o.trigger("route",i,s),t.history.trigger("route",o,i,s)})),this},execute:function(e,t,n){e&&e.apply(this,n)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(E,"\\$&").replace(_,"(?:$1)?").replace(x,(function(e,t){return t?e:"([^/?]+)"})).replace(k,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,(function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null}))}});var S=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},T=/^[#\/]|\s+$/g,C=/^\/+|\/+$/g,j=/msie [\w.]+/,D=/\/$/,O=/#.*$/;S.started=!1,n.extend(S.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(D,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(T,"")},start:function(e){if(S.started)throw new Error("Backbone.history has already been started");S.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),r=document.documentMode,o=j.exec(navigator.userAgent.toLowerCase())&&(!r||r<=7);if(this.root=("/"+this.root+"/").replace(C,"/"),o&&this._wantsHashChange){var a=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var s=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(T,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),S.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl(void 0,e)},loadUrl:function(e,t){return e=this.fragment=this.getFragment(e),n.any(this.handlers,(function(n){if(n.route.test(e))return n.callback(t,e),!0}))},navigate:function(e,t){if(!S.started)return!1;t&&!0!==t||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(O,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new S,d.extend=h.extend=b.extend=g.extend=S.extend=function(e,t){var i,r=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t);var o=function(){this.constructor=i};return o.prototype=r.prototype,i.prototype=new o,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};var P=function(){throw new Error('A "url" property or function must be specified')},A=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}(o,n,e,t)}.apply(t,i))||(e.exports=r)},function(e,t,n){function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports={parse:function(e){if(e){if(!e.exif)return e;var t={},n=e.exif.Orientation;return n&&(t.Orientation=Number(n)),r(r({},e),{},{exif:t})}}}},function(e){e.exports=JSON.parse('{"de":{"app.tabtitle":"HiDrive","app.title":"HiDrive","asc":"aufsteigend","common.cancel":"Abbrechen","common.download":"Herunterladen","common.information":"Mehr Informationen","confirm.cancel":"Abbrechen","confirm.ok":"OK","desc":"absteigend","details":"Details","error.401":"Nicht autorisiert","error.403":"Verboten","error.404":"Die Seite, nach der Sie suchen, können wir leider nicht finden.","error.410":"Dieser Freigabe-Link ist leider bereits abgelaufen.","error.500":"Ein interner Fehler ist aufgetreten.","error.503":"Die Funktion steht vorübergehend nicht zur Verfügung.","error.browser.missingFeature":"Diese Funktion wird von ihrem Browser nicht unterstützt.","error.expired":"Die Sitzung ist abgelaufen. Bitte melden Sie sich neu an.","error.generic":"Ein Fehler ist aufgetreten.","error.password":"Das angegebene Freigabe-Passwort ist ungültig.","error.password_empty":"Bitte geben Sie ein Passwort ein.","eu_cookie.url_text":"Mehr Informationen.","file.details.datetaken":"Aufnahmedatum","file.details.dimensions":"Abmessungen","file.details.exposuretime":"Belichtungszeit","file.details.fnumber":"Blendenzahl","file.details.focallength":"Brennweite","file.details.iso":"Iso","file.details.location":"Aufnahmeort","file.details.manufacturer":"Kamerahersteller","file.details.model":"Modell","file.name":"Name","file.size":"Größe","file.size.unit.Bytes":"B","file.size.unit.GB":"GB","file.size.unit.KB":"KB","file.size.unit.MB":"MB","file.size.unit.PB":"PB","file.size.unit.TB":"TB","file.type":"Typ","file.type.dir":"Ordner","file.type.fileitem":"Datei","file.update":"Geändert","filemanager.delete.error.all":"Beim Löschen von {0} Element(en) ist ein Fehler aufgetreten.","filemanager.delete.error.one":"\\"{0}\\" konnte nicht gelöscht werden.","filemanager.delete.error.some":"{0} Element(e) wurden gelöscht. Beim Löschen von {1} Element(en) ist ein Fehler aufgetreten.","filemanager.delete.prompt.cancel":"Abbrechen","filemanager.delete.prompt.multi":"Möchten Sie diese {0} Elemente wirklich löschen?","filemanager.delete.prompt.ok":"Löschen","filemanager.delete.prompt.single":"Möchten Sie \\"{0}\\" wirklich löschen?","filemanager.deselectAll":"Auswahl aufheben","filemanager.dnd.invitation":"Dieser Ordner ist leer - ziehen Sie Ihre Dateien und Ordner per drag & drop in dieses Fenster.","filemanager.dnd.invitation.noWrite":"Dieser Ordner ist leer.","filemanager.download_dir.error.404":"Der Ordner \\"{0}\\" existiert nicht mehr.","filemanager.download.archiveprefix":"HiDrive","filemanager.download.error.404":"Die Datei \\"{0}\\" existiert nicht mehr","filemanager.download.error.common":"Die Datei \\"{0}\\" konnte nicht heruntergeladen werden","filemanager.downloadAll":"Alles herunterladen","filemanager.downloadSelected":"Auswahl herunterladen","filemanager.encrypted.text":"Dieser Ordner wurde verschlüsselt. Sie können verschlüsselte Daten nur in Ihren HiDrive Apps oder Ihrer HiDrive Software mit einem passenden Schlüssel lesen.","filemanager.image.error":"Beim Laden des Bildes ist ein Fehler aufgetreten.","filemanager.newfolder.button":"Neuer Ordner","filemanager.newfolder.defaultname":"Neuer Ordner","filemanager.newfolder.error.common":"Beim Erstellen des neuen Ordners ist ein Fehler aufgetreten.","filemanager.noFiles":"Dieser Ordner ist leer.","filemanager.noFiles.writable":"Dieser Ordner ist leer - ziehen Sie Ihre Dateien und Ordner per drag & drop in dieses Fenster.","filemanager.rename.button.title":"Umbenennen","filemanager.rename.toast.error.badChars":"Folgende Zeichen sind nicht erlaubt:","filemanager.rename.toast.error.exists":"\\"{0}\\" konnte nicht umbenannt werden, der Name ist schon vorhanden.","filemanager.rename.toast.error.general":"\\"{0}\\" konnte nicht umbenannt werden.","filemanager.selectall":"Alles auswählen","folder.loaderror.common":"Ein Fehler ist beim Laden von {0} aufgetreten.","format.decimal":",","format.thousand":".","header.logout":"Abmelden","imprint.title":"Impressum","imprint.url":"https://www.strato.de/impressum/","js.activate":"Aktivieren Sie bitte JavaScript, um HiDrive im Webbrowser benutzen zu können.","lang.name":"Deutsch","lang.timeFormat":"d.m.y H:i","login.accept":"Weiter","login.header":"Um die Freigabe zu öffnen wird ein Passwort benötigt","login.placeholder":"Passwort","moremenu.files.delete":"Löschen","pdfview.documenttoolbar.page":"Seite","sharelink.buttons.download":"Download","sharelink.downloads":"verbleibende Anzahl Downloads: {0}","sharelink.preview.default":"Datei kann nicht angezeigt werden","sharelink.ttl":"gültig bis {0} Uhr","sharelink.ttl.timeFormat":"d.m.y H:i","sortFlyout.date":"Datum","sortFlyout.name":"Name","sortFlyout.size":"Größe","sortFlyout.sortedBy":"Sortiert nach","sortFlyout.title":"Sortierung","sortFlyout.type":"Typ","teaser.app.excerpt":"Mit der Smartphone-App jederzeit mobil auf den Online-Speicher zugreifen.","teaser.app.link":"Download","teaser.app.title":"Kostenlose HiDrive App","teaser.app.url":"https://www.strato.de/online-speicher/#downloads","teaser.tuev.excerpt":"TÜV-zertifizierte Datensicherheit in deutschen Rechenzentren (ISO 27001)","teaser.tuev.title":"TÜV-zertifizierte Sicherheit","toolbar.item.more":"Mehr","toolbar.item.upload":"Hochladen","upload.detail.cancelAll":"Uploads abbrechen","upload.detail.close":"Schließen","upload.detail.moreuploads":"Weitere Dateien hochladen","upload.detail.retryFailedUpload":"Erneut hochladen","upload.detail.retryFailedUploads":"Fehlgeschlagene erneut hochladen","upload.detail.stats.error":"{0} Fehler","upload.detail.stats.transfer":"{0} von {1} hochgeladen","upload.detail.title":"Uploads","upload.error.abort":"Abgebrochen","upload.error.exists":"Der Verzeichnisname ist bereits vorhanden.","upload.error.failed":"Fehlgeschlagen","upload.error.network":"Netzwerkfehler","upload.size.calculation":"Wird ermittelt…","upload.status.retry":"Netzwerkfehler: Upload wird wiederholt.","viewmode.fluid":"Galerie","viewmode.list":"Liste","viewmode.tiles":"Grid","viewModeFlyout.title":"Anzeige"},"en":{"app.tabtitle":"HiDrive","app.title":"HiDrive","asc":"ascending","common.cancel":"Cancel","common.download":"Download","common.information":"More information","confirm.cancel":"Cancel","confirm.ok":"OK","desc":"descending","details":"Details","error.401":"Not authorised","error.403":"Forbidden","error.404":"Unfortunately we could not find the site you are looking for.","error.410":"This Share Link has unfortunately already expired.","error.500":"An internal error has occurred.","error.503":"Function temporary unavailable.","error.browser.missingFeature":"This function is not supported by your browser.","error.expired":"The session has expired. Please log in again.","error.generic":"An unexpected error has occurred.","error.password":"The share password entered is invalid.","error.password_empty":"Please enter a password.","eu_cookie.url_text":"Find additional information here.","file.details.datetaken":"Date taken","file.details.dimensions":"Dimensions","file.details.exposuretime":"Exposure time","file.details.fnumber":"f-number","file.details.focallength":"Focal length","file.details.iso":"Iso","file.details.location":"Location","file.details.manufacturer":"Camera manufacturer","file.details.model":"Model","file.name":"Name","file.size":"Size","file.size.unit.Bytes":"B","file.size.unit.GB":"GB","file.size.unit.KB":"KB","file.size.unit.MB":"MB","file.size.unit.PB":"PB","file.size.unit.TB":"TB","file.type":"Type","file.type.dir":"Folder","file.type.fileitem":"File","file.update":"Modified","filemanager.delete.error.all":"An error occurred while deleting {0} item(s).","filemanager.delete.error.one":"\\"{0}\\" could not be deleted.","filemanager.delete.error.some":"{0} item(s) were deleted. An error occurred while deleting {1} item(s).","filemanager.delete.prompt.cancel":"Cancel","filemanager.delete.prompt.multi":"Are you sure you want to delete these {0} items?","filemanager.delete.prompt.ok":"Delete","filemanager.delete.prompt.single":"Are you sure you want to delete \\"{0}\\"?","filemanager.deselectAll":"Cancel selection","filemanager.dnd.invitation":"This folder is empty - drag & drop your files and folders into this window.","filemanager.dnd.invitation.noWrite":"This folder is empty.","filemanager.download_dir.error.404":"The folder \\"{0}\\" no longer exists","filemanager.download.archiveprefix":"HiDrive","filemanager.download.error.404":"The file \\"{0}\\" no longer exists","filemanager.download.error.common":"Download error for file \\"{0}\\"","filemanager.downloadAll":"Download all","filemanager.downloadSelected":"Download selection","filemanager.encrypted.text":"This folder was encrypted. You can only read encrypted data in your HiDrive Apps or your HiDrive software with a suitable key.","filemanager.image.error":"An error occurred while loading the image.","filemanager.newfolder.button":"New folder","filemanager.newfolder.defaultname":"New folder","filemanager.newfolder.error.common":"An error occurred while creating a new folder.","filemanager.noFiles":"This folder is empty.","filemanager.noFiles.writable":"This folder is empty - drag & drop your files and folders into this window.","filemanager.rename.button.title":"Rename","filemanager.rename.toast.error.badChars":"The following characters are invalid:","filemanager.rename.toast.error.exists":"\\"{0}\\" could not be renamed. This name already exists.","filemanager.rename.toast.error.general":"\\"{0}\\" could not be renamed.","filemanager.selectall":"Select all","folder.loaderror.common":"An error occurred whilst loading {0}.","format.decimal":".","format.thousand":",","header.logout":"Log out","imprint.title":"Imprint","imprint.url":"https://www.strato-hosting.co.uk/imprint/","js.activate":"Please activate JavaScript to use HiDrive in your web browser.","lang.name":"English","lang.timeFormat":"m/d/y H:i","login.accept":"Next","login.header":"A password is required in order to access the share.","login.placeholder":"Password","moremenu.files.delete":"Delete","pdfview.documenttoolbar.page":"Page","sharelink.buttons.download":"Download","sharelink.downloads":"Remaining downloads: {0}","sharelink.preview.default":"Unable to display file","sharelink.ttl":"Valid until: {0}","sharelink.ttl.timeFormat":"m/d/y H:i","sortFlyout.date":"Date","sortFlyout.name":"Name","sortFlyout.size":"Size","sortFlyout.sortedBy":"Sorted by","sortFlyout.title":"Sorting","sortFlyout.type":"Type","teaser.app.excerpt":"Have mobile access to the online storage at any time with the Smartphone App.","teaser.app.link":"Download","teaser.app.title":"Free HiDrive App","teaser.app.url":"https://www.strato-hosting.co.uk/online-storage-hidrive/download/","teaser.tuev.excerpt":"TÜV-certified data security in German data centres (ISO 27001)","teaser.tuev.title":"TÜV-certified security","toolbar.item.more":"More","toolbar.item.upload":"Upload","upload.detail.cancelAll":"Abort all uploads","upload.detail.close":"Close","upload.detail.moreuploads":"Upload more files","upload.detail.retryFailedUpload":"Retry failed upload","upload.detail.retryFailedUploads":"Retry failed uploads","upload.detail.stats.error":"{0} errors","upload.detail.stats.transfer":"{0} of {1} uploaded","upload.detail.title":"Uploads","upload.error.abort":"Cancelled","upload.error.exists":"The directory name already exists.","upload.error.failed":"Failed","upload.error.network":"Network error","upload.size.calculation":"Searching…","upload.status.retry":"Network error: retrying upload","viewmode.fluid":"Gallery","viewmode.list":"List","viewmode.tiles":"Grid","viewModeFlyout.title":"View"},"es":{"app.tabtitle":"HiDrive","app.title":"HiDrive","asc":"ascendente","common.cancel":"Cancelar","common.download":"Descargar","common.information":"Más información","confirm.cancel":"Cancelar","confirm.ok":"OK","desc":"descendente","details":"Detalles","error.401":"No autorizado","error.403":"Prohibido","error.404":"No hemos podido encontrar la página que buscas.","error.410":"Este enlace de descarga ya ha caducado.","error.500":"Se ha producido un error interno.","error.503":"Esta función no está disponible temporalmente.","error.browser.missingFeature":"Esta función no está soportada por su navegador.","error.expired":"La sesión ha expirado, vuelve a conectarte de nuevo.","error.generic":"Se ha producido un error.","error.password":"La contraseña de descarga introducida no es válida.","error.password_empty":"Introduce una contraseña.","eu_cookie.url_text":"Más información.","file.details.datetaken":"Fecha","file.details.dimensions":"Dimensiones","file.details.exposuretime":"Tiempo de exposición","file.details.fnumber":"Diafragma","file.details.focallength":"Distancia focal","file.details.iso":"ISO","file.details.location":"Ubicación","file.details.manufacturer":"Fabricante de la cámara","file.details.model":"Modelo","file.name":"Nombre","file.size":"Tamaño","file.size.unit.Bytes":"B","file.size.unit.GB":"GB","file.size.unit.KB":"KB","file.size.unit.MB":"MB","file.size.unit.PB":"PB","file.size.unit.TB":"TB","file.type":"Tipo","file.type.dir":"Carpeta","file.type.fileitem":"Archivo","file.update":"Cambiado","filemanager.delete.error.all":"Se ha producido un error al borrar {0} elementos.","filemanager.delete.error.one":"No se ha podido borrar \\"{0}\\".","filemanager.delete.error.some":"Se han borrado {0} elementos. Se ha producido un error al borrar {1} elementos.","filemanager.delete.prompt.cancel":"Cancelar","filemanager.delete.prompt.multi":"¿Está seguro de que quiere borrar estos {0} elementos?","filemanager.delete.prompt.ok":"Borrar","filemanager.delete.prompt.single":"¿Está seguro de que quiere borrar \\"{0}\\"?","filemanager.deselectAll":"Cancelar la selección","filemanager.dnd.invitation":"Esta carpeta está vacía - arrastre y suelte sus archivos y carpetas en esta ventana.","filemanager.dnd.invitation.noWrite":"Esta carpeta está vacía.","filemanager.download_dir.error.404":"La carpeta \\"{0}\\" ya no existe.","filemanager.download.archiveprefix":"HiDrive","filemanager.download.error.404":"El archivo \\"{0}\\" ya no existe","filemanager.download.error.common":"No se ha podido descargar el archivo \\"{0}\\".","filemanager.downloadAll":"Descargar todo","filemanager.downloadSelected":"Descargar seleccionados","filemanager.encrypted.text":"Esta carpeta estaba encriptada. Sólo se pueden leer datos cifrados en las aplicaciones HiDrive o en el software HiDrive con una clave adecuada.","filemanager.image.error":"Se produjo un error al cargar la imagen.","filemanager.newfolder.button":"Nueva carpeta","filemanager.newfolder.defaultname":"Nueva carpeta","filemanager.newfolder.error.common":"Se ha producido un error al crear la carpeta nueva.","filemanager.noFiles":"Esta carpeta está vacía.","filemanager.noFiles.writable":"Esta carpeta está vacía - arrastre y suelte sus archivos y carpetas en esta ventana.","filemanager.rename.button.title":"Cambiar nombre","filemanager.rename.toast.error.badChars":"Los caracteres siguientes no están permitidos:","filemanager.rename.toast.error.exists":"No se ha podido cambiar el nombre de \\"{0}\\", el nombre ya está siendo utilizado.","filemanager.rename.toast.error.general":"No se ha podido cambiar el nombre de \\"{0}\\".","filemanager.selectall":"Seleccionar todo","folder.loaderror.common":"Se ha producido un error al cargar desde {0}.","format.decimal":",","format.thousand":".","header.logout":"Cerrar sesión","imprint.title":"Datos identificativos","imprint.url":"https://www.strato.es/datos-corporativos/","js.activate":"Active JavaScript para poder utilizar HiDrive en su navegador web.","lang.name":"Español","lang.timeFormat":"d/m/y H:i","login.accept":"Seguir","login.header":"Para abrir el archivo compartido necesitas una contraseña.","login.placeholder":"Contraseña","moremenu.files.delete":"Borrar","pdfview.documenttoolbar.page":"Página","sharelink.buttons.download":"Descarga","sharelink.downloads":"Descargas restantes: {0}","sharelink.preview.default":"No se puede mostrar el archivo","sharelink.ttl":"válido hasta el {0}","sharelink.ttl.timeFormat":"d/m/y H:i","sortFlyout.date":"Fecha","sortFlyout.name":"Nombre","sortFlyout.size":"Tamaño","sortFlyout.sortedBy":"Ordenado por","sortFlyout.title":"Separación","sortFlyout.type":"Tipo","teaser.app.excerpt":"Accede en todo momento a tu almacenamiento online con la app para móviles.","teaser.app.link":"Descarga","teaser.app.title":"App de HiDrive gratuita","teaser.app.url":"https://www.strato.es/almacenamiento-cloud/","teaser.tuev.excerpt":"Seguridad de datos en centros de datos alemanes certificados por el TÜV (ISO 27001).","teaser.tuev.title":"Seguridad certificada por el TÜV.","toolbar.item.more":"Más","toolbar.item.upload":"Cargar","upload.detail.cancelAll":"Cancelar cargas","upload.detail.close":"Cerrar","upload.detail.moreuploads":"Subir más archivos","upload.detail.retryFailedUpload":"Retry failed upload","upload.detail.retryFailedUploads":"Retry failed uploads","upload.detail.stats.error":"{0} errores","upload.detail.stats.transfer":"{0} de {1} cargados","upload.detail.title":"Uploads","upload.error.abort":"Cancelado","upload.error.exists":"El nombre de directorio ya existe.","upload.error.failed":"Failed","upload.error.network":"Error de red","upload.size.calculation":"Enviando…","upload.status.retry":"Error de red: se va a repetir la carga.","viewmode.fluid":"Galería","viewmode.list":"Lista","viewmode.tiles":"Cuadrícula","viewModeFlyout.title":"Vista general"},"fr":{"app.tabtitle":"HiDrive","app.title":"HiDrive","asc":"croissant","common.cancel":"Annuler","common.download":"Télécharger","common.information":"Plus d\'informations","confirm.cancel":"Annuler","confirm.ok":"Oui","desc":"décroissant","details":"Détails","error.401":"Non autorisé","error.403":"Interdit","error.404":"La page que vous cherchez n\'a pas pu être trouvée.","error.410":"Le lien de partage n\'est plus valide.","error.500":"Une erreur interne s\'est produite.","error.503":"La fonction n\'est provisoirement pas disponible.","error.browser.missingFeature":"Cette fonction n\'est pas prise en charge par votre navigateur.","error.expired":"La session a expiré. Veuillez vous connecter de nouveau.","error.generic":"Une erreur est survenue.","error.password":"Le mot de passe saisi pour le partage est invalide.","error.password_empty":"Veuillez entrer un mot de passe.","eu_cookie.url_text":"Plus d\'infos.","file.details.datetaken":"Date","file.details.dimensions":"Dimensions","file.details.exposuretime":"Temps d\'exposition","file.details.fnumber":"Diaphragme","file.details.focallength":"Distance focale","file.details.iso":"ISO","file.details.location":"Emplacement","file.details.manufacturer":"Fabricant de la caméra","file.details.model":"Modèle","file.name":"Nom","file.size":"Taille","file.size.unit.Bytes":"o","file.size.unit.GB":"Go","file.size.unit.KB":"Ko","file.size.unit.MB":"Mo","file.size.unit.PB":"Po","file.size.unit.TB":"To","file.type":"Type","file.type.dir":"Dossier","file.type.fileitem":"Fichier","file.update":"Modifié","filemanager.delete.error.all":"Une erreur est survenue lors de l\'effacement de « {0} ».","filemanager.delete.error.one":"\\"{0}\\" n\'a pas pu être supprimé.","filemanager.delete.error.some":"« {0} »  éléments ont été effacés. Une erreur est survenue lors de l\'effacement de « {1} ».","filemanager.delete.prompt.cancel":"Annuler","filemanager.delete.prompt.multi":"Souhaitez-vous réellement effacer {0} éléments ?","filemanager.delete.prompt.ok":"Effacer","filemanager.delete.prompt.single":"Souhaitez-vous réellement effacer « {0} » ?","filemanager.deselectAll":"Annuler la sélection","filemanager.dnd.invitation":"Ce dossier est vide - glissez-déposez vos fichiers et dossiers dans cette fenêtre.","filemanager.dnd.invitation.noWrite":"Ce dossier est vide.","filemanager.download_dir.error.404":"Le dossier « {0} » n\'existe plus.","filemanager.download.archiveprefix":"HiDrive","filemanager.download.error.404":"Le fichier « {0} » n\'existe plus.","filemanager.download.error.common":"Le fichier « {0} » n\'a pas pu être téléchargé","filemanager.downloadAll":"Tout télécharger","filemanager.downloadSelected":"Télécharger la sélection","filemanager.encrypted.text":"Ce dossier était crypté. Vous ne pouvez lire les données cryptées dans vos applications HiDrive ou votre logiciel HiDrive qu\'avec une clé appropriée.","filemanager.image.error":"Une erreur s\'est produite lors du chargement de l\'image.","filemanager.newfolder.button":"Nouveau dossier","filemanager.newfolder.defaultname":"Nouveau dossier","filemanager.newfolder.error.common":"Une erreur est survenue lors de la création du nouveau dossier.","filemanager.noFiles":"Ce dossier est vide.","filemanager.noFiles.writable":"Ce dossier est vide - glissez-déposez vos fichiers et dossiers dans cette fenêtre.","filemanager.rename.button.title":"Renommer","filemanager.rename.toast.error.badChars":"Les caractères suivants ne sont pas autorisés:","filemanager.rename.toast.error.exists":"\\"{0}\\" n\'a pas pu être renommé, le nom existe déjà.","filemanager.rename.toast.error.general":"\\"{0}\\" n\'a pas pu être renommé.","filemanager.selectall":"Tout sélectionner","folder.loaderror.common":"Une erreur s\'est produite lors de la charge de {0}.","format.decimal":",","format.thousand":".","header.logout":"Déconnexion","imprint.title":"Mentions légales","imprint.url":"https://www.strato.fr/mentions-legales/","js.activate":"Activez JavaScript afin de pouvoir utiliser HiDrive dans votre navigateur web.","lang.name":"Français","lang.timeFormat":"d/m/y H:i","login.accept":"Suivant","login.header":"Vous avez besoin du mot de passe pour ouvrir les fichiers partagés","login.placeholder":"Mot de passe","moremenu.files.delete":"Supprimer","pdfview.documenttoolbar.page":"Page","sharelink.buttons.download":"Télécharge","sharelink.downloads":"Nombre de téléchargements restants : {0}","sharelink.preview.default":"Le fichier ne peut pas être affiché","sharelink.ttl":"valide jusqu\'au {0}","sharelink.ttl.timeFormat":"d/m/y H:i","sortFlyout.date":"Date","sortFlyout.name":"Nom","sortFlyout.size":"Taille","sortFlyout.sortedBy":"Présentation par","sortFlyout.title":"Tri","sortFlyout.type":"Type","teaser.app.excerpt":"Accéder en mobilité à l\'espace de stockage en ligne, à tout moment, avec l\'appli Smartphone.","teaser.app.link":"Télécharge","teaser.app.title":"Appli HiDrive gratuit","teaser.app.url":"https://www.strato.fr/stockage-en-ligne/#telechargement","teaser.tuev.excerpt":"Sécurité des données dans des centres de calcul allemands, certifiée par TÜV (ISO 27001).","teaser.tuev.title":"Sécurité certifiée par TÜV","toolbar.item.more":"Plus","toolbar.item.upload":"Charger","upload.detail.cancelAll":"Annuler les chargements","upload.detail.close":"Fermer","upload.detail.moreuploads":"Charger davantage de fichiers","upload.detail.retryFailedUpload":"Retry failed upload","upload.detail.retryFailedUploads":"Retry failed uploads","upload.detail.stats.error":"{0} erreurs","upload.detail.stats.transfer":"{0} sur {1} chargés","upload.detail.title":"Uploads","upload.error.abort":"Annulé","upload.error.exists":"Le nom de répertoire est déjà utilisé.","upload.error.failed":"Failed","upload.error.network":"Erreur réseau","upload.size.calculation":"Envoi en cours…","upload.status.retry":"Erreur réseau: sera répétée.","viewmode.fluid":"Galerie","viewmode.list":"Liste","viewmode.tiles":"Grille","viewModeFlyout.title":"Vue"},"nl":{"app.tabtitle":"HiDrive","app.title":"HiDrive","asc":"oplopend","common.cancel":"Afbreken","common.download":"Downloaden","common.information":"Meer informatie","confirm.cancel":"Afbreken","confirm.ok":"OK","desc":"aflopend","details":"Details","error.401":"Geen autorisatie","error.403":"Verboden","error.404":"We kunnen de pagina die je zoekt, niet vinden.","error.410":"Deze sharelink is niet meer geldig.","error.500":"Er is een interne fout opgetreden.","error.503":"Deze functie is tijdelijk niet beschikbaar.","error.browser.missingFeature":"Deze functie wordt niet ondersteund door uw browser.","error.expired":"De sessie is afgelopen. Je kunt nu opnieuw inloggen.","error.generic":"Er is een fout opgetreden.","error.password":"Het ingevoerde vrijgave-wachtwoord is ongeldig.","error.password_empty":"Voer een wachtwoord in.","eu_cookie.url_text":"Meer informatie.","file.details.datetaken":"Opnamedatum","file.details.dimensions":"Afmetingen","file.details.exposuretime":"Sluitertijd","file.details.fnumber":"Diafragma","file.details.focallength":"Brandpuntsafstand","file.details.iso":"ISO","file.details.location":"Locatie","file.details.manufacturer":"Cameramerk","file.details.model":"Model","file.name":"Naam","file.size":"Grootte","file.size.unit.Bytes":"B","file.size.unit.GB":"GB","file.size.unit.KB":"KB","file.size.unit.MB":"MB","file.size.unit.PB":"PB","file.size.unit.TB":"TB","file.type":"Type","file.type.dir":"Map","file.type.fileitem":"Bestand","file.update":"Gewijzigd","filemanager.delete.error.all":"Bij het verwijderen van {0} elementen is een fout opgetreden.","filemanager.delete.error.one":"\\"{0}\\" kon niet worden verwijderd.","filemanager.delete.error.some":"Er zijn {0} elementen verwijderd. Bij het verwijderen van {1} elementen is een fout opgetreden.","filemanager.delete.prompt.cancel":"Annuleren","filemanager.delete.prompt.multi":"Wil je deze {0} elementen verwijderen?","filemanager.delete.prompt.ok":"Verwijderen","filemanager.delete.prompt.single":"Wil je \\"{0}\\" verwijderen?","filemanager.deselectAll":"Keuze annuleren","filemanager.dnd.invitation":"Deze map is leeg - sleep uw bestanden en mappen naar dit venster.","filemanager.dnd.invitation.noWrite":"Deze map is leeg.","filemanager.download_dir.error.404":"De map \\"{0}\\" bestaat niet meer.","filemanager.download.archiveprefix":"HiDrive","filemanager.download.error.404":"Het bestand \\"{0}\\" bestaat niet meer.","filemanager.download.error.common":"Het bestand \\"{0}\\" kon niet worden gedownload.","filemanager.downloadAll":"Alles downloaden","filemanager.downloadSelected":"Geselecteerde bestanden downloaden","filemanager.encrypted.text":"Deze map is versleuteld. U kunt versleutelde gegevens alleen met een geschikte sleutel in uw HiDrive Apps of uw HiDrive software lezen.","filemanager.image.error":"Er is een fout opgetreden tijdens het laden van de afbeelding.","filemanager.newfolder.button":"Nieuwe map","filemanager.newfolder.defaultname":"Nieuwe map","filemanager.newfolder.error.common":"Bij het aanmaken van de nieuwe map is een fout opgetreden.","filemanager.noFiles":"Deze map is leeg.","filemanager.noFiles.writable":"Deze map is leeg - sleep uw bestanden en mappen naar dit venster.","filemanager.rename.button.title":"Hernoemen","filemanager.rename.toast.error.badChars":"Deze tekens zijn niet toegestaan:","filemanager.rename.toast.error.exists":"\\"{0}\\" kon niet worden hernoemd. De naam is al in gebruik.","filemanager.rename.toast.error.general":"\\"{0}\\" kon niet worden hernoemd.","filemanager.selectall":"Alles selecteren","folder.loaderror.common":"Bij het laden van {0} is iets foutgegaan.","format.decimal":",","format.thousand":".","header.logout":"Afmelden","imprint.title":"Impressum","imprint.url":"https://www.strato.nl/imprint/","js.activate":"Activeer JavaScript in je browser om HiDrive te gebruiken.","lang.name":"Nederlands","lang.timeFormat":"d-m-y H:i","login.accept":"Verder","login.header":"Voor deze sharelink heb je een wachtwoord nodig","login.placeholder":"Wachtwoord","moremenu.files.delete":"Verwijderen","pdfview.documenttoolbar.page":"Pagina","sharelink.buttons.download":"Downloaden","sharelink.downloads":"Resterend aantal downloads: {0}","sharelink.preview.default":"Bestand kan niet worden weergegeven","sharelink.ttl":"Geldig tot: {0}","sharelink.ttl.timeFormat":"d-m-y H:i","sortFlyout.date":"Datum","sortFlyout.name":"Naam","sortFlyout.size":"Grootte","sortFlyout.sortedBy":"Gesorteerd op","sortFlyout.title":"Sorteer","sortFlyout.type":"Type","teaser.app.excerpt":"Met de smartphone-app heb je overal toegang tot je online storage.","teaser.app.link":"Downloaden","teaser.app.title":"Gratis HiDrive-app","teaser.app.url":"https://www.strato.nl/cloud-storage/#apps","teaser.tuev.excerpt":"ISO-gecertificeerde databeveiliging in Duitse datacentra (ISO 27001).","teaser.tuev.title":"ISO-gecertificeerde beveiliging.","toolbar.item.more":"Meer","toolbar.item.upload":"Uploaden","upload.detail.cancelAll":"Uploaden afbreken","upload.detail.close":"Sluiten","upload.detail.moreuploads":"Meer bestanden uploaden","upload.detail.retryFailedUpload":"Retry failed upload","upload.detail.retryFailedUploads":"Retry failed uploads","upload.detail.stats.error":"{0} fout(en)","upload.detail.stats.transfer":"{0} van {1} geüpload","upload.detail.title":"Uploads","upload.error.abort":"Geannuleerd","upload.error.exists":"Deze mapnaam bestaat al.","upload.error.failed":"Failed","upload.error.network":"Netwerkfout","upload.size.calculation":"Wordt berekend…","upload.status.retry":"Netwerkfout: upload wordt opnieuw uitgevoerd.","viewmode.fluid":"Galerij","viewmode.list":"Lijst","viewmode.tiles":"Rooster","viewModeFlyout.title":"Weergave"},"pt":{"app.tabtitle":"HiDrive","app.title":"HiDrive","asc":"ascendente","common.cancel":"Cancelar","common.download":"Baixar","common.information":"More information","confirm.cancel":"Cancelar","confirm.ok":"OK","desc":"descendente","details":"Detalhes","error.401":"Não autorizado","error.403":"Proibido","error.404":"Infelizmente não conseguimos encontrar a página que você está procurando.","error.410":"Infelizmente essa hiperligação de habilitação já expirou.","error.500":"Ocorreu um erro interno","error.503":"A função não está temporariamente disponível.","error.browser.missingFeature":"Esta função não é suportada por seu navegador.","error.expired":"A sessão expirou. Inicie novamente a sessão.","error.generic":"Ocorreu um erro.","error.password":"A senha de partilha indicada é inválida.","error.password_empty":"Por favor, introduza uma senha.","eu_cookie.url_text":"Mais informações.","file.details.datetaken":"Data de gravação","file.details.dimensions":"Medidas","file.details.exposuretime":"Tempo de exposição","file.details.fnumber":"Número f","file.details.focallength":"Distãncia focal","file.details.iso":"Iso","file.details.location":"Localização","file.details.manufacturer":"Fabricante da câmera","file.details.model":"Modelo","file.name":"Nome","file.size":"Tamanho","file.size.unit.Bytes":"B","file.size.unit.GB":"GB","file.size.unit.KB":"KB","file.size.unit.MB":"MB","file.size.unit.PB":"PB","file.size.unit.TB":"TB","file.type":"Tipo","file.type.dir":"Pasta","file.type.fileitem":"Arquivo","file.update":"Alterado","filemanager.delete.error.all":"Ocorreu um erro ao excluir {0} elementos.","filemanager.delete.error.one":"Não foi possível deletar \\"{0}\\".","filemanager.delete.error.some":"Foram excluídos {0} elementos. Ocorreu um erro ao excluir {1} elementos.","filemanager.delete.prompt.cancel":"Cancelar","filemanager.delete.prompt.multi":"Tem a certeza que pretende excluir estes {0} elementos?","filemanager.delete.prompt.ok":"Excluir","filemanager.delete.prompt.single":"Tem certeza que pretende excluir \\"{0}\\"?","filemanager.deselectAll":"Cancelar a seleção","filemanager.dnd.invitation":"Esta pasta está vazia - arraste e solte seus arquivos e pastas para esta janela.","filemanager.dnd.invitation.noWrite":"Esta pasta está vazia.","filemanager.download_dir.error.404":"A pasta \\"{0}\\" não existe mais.","filemanager.download.archiveprefix":"HiDrive","filemanager.download.error.404":"O arquivo \\"{0}\\" não existe mais","filemanager.download.error.common":"Não foi possível baixar o arquivo \\"{0}\\".","filemanager.downloadAll":"Baixar tudo","filemanager.downloadSelected":"Baixar seleção","filemanager.encrypted.text":"Esta pasta foi criptografada. Você só pode ler dados criptografados em seus aplicativos HiDrive ou no seu software HiDrive com uma chave adequada.","filemanager.image.error":"Ocorreu um erro ao carregar a imagem.","filemanager.newfolder.button":"Nova pasta","filemanager.newfolder.defaultname":"Nova pasta","filemanager.newfolder.error.common":"Ocorreu um erro ao criar a nova pasta.","filemanager.noFiles":"Esta pasta está vazia.","filemanager.noFiles.writable":"Esta pasta está vazia - arraste e solte seus arquivos e pastas para esta janela.","filemanager.rename.button.title":"Renomear","filemanager.rename.toast.error.badChars":"Os seguintes símbolos não são permitidos:","filemanager.rename.toast.error.exists":"Não foi possível renomear \\"{0}\\", pois o nome já está sendo utilizado.","filemanager.rename.toast.error.general":"Não foi possível renomear \\"{0}\\".","filemanager.selectall":"Selecionar tudo","folder.loaderror.common":"Ocorreu um erro durante o carregamento de {0}.","format.decimal":",","format.thousand":".","header.logout":"Terminar sessão","imprint.title":"Ficha técnica","imprint.url":"https://www.strato.com/legal-notice/?lang=EN","js.activate":"Por favor, ative o JavaScript para poder usar o HiDrive no navegador da web.","lang.name":"Português","lang.timeFormat":"d/m/y H:i","login.accept":"Avançar","login.header":"Uma senha é necessária para abrir o compartilhamento","login.placeholder":"Senha","moremenu.files.delete":"Apagar","pdfview.documenttoolbar.page":"Página","sharelink.buttons.download":"Download","sharelink.downloads":"número de downloads restantes: {0}","sharelink.preview.default":"O arquivo não pode ser exibido","sharelink.ttl":"válido até: {0}","sharelink.ttl.timeFormat":"d/m/y H:i","sortFlyout.date":"Data","sortFlyout.name":"Nome","sortFlyout.size":"Tamanho","sortFlyout.sortedBy":"Organizados por","sortFlyout.title":"Classificando","sortFlyout.type":"Tipo","teaser.app.excerpt":"Com a aplicação para smartphone, acessar a qualquer altura ao armazenamento on-line.","teaser.app.link":"Download","teaser.app.title":"Aplicação HiDrive gratuita","teaser.app.url":"https://www.strato-hosting.co.uk/online-storage-hidrive/download/","teaser.tuev.excerpt":"Segurança da informação certificada pela TÜV em centros de processamentos de dados alemães (ISO 27001).","teaser.tuev.title":"Segurança certificada pela TÜV","toolbar.item.more":"Mais","toolbar.item.upload":"Upload","upload.detail.cancelAll":"Cancelar uploads","upload.detail.close":"Fechar","upload.detail.moreuploads":"Carregar outros arquivos","upload.detail.retryFailedUpload":"Retry failed upload","upload.detail.retryFailedUploads":"Retry failed uploads","upload.detail.stats.error":"{0} erros","upload.detail.stats.transfer":"{0} de {1} carregado(s)","upload.detail.title":"Uploads","upload.error.abort":"Cancelado","upload.error.exists":"Já existe um diretório com o mesmo nome.","upload.error.failed":"Failed","upload.error.network":"Falha na rede","upload.size.calculation":"Verificando…","upload.status.retry":"Falha na rede: o upload será reiniciado.","viewmode.fluid":"Galeria","viewmode.list":"Lista","viewmode.tiles":"Grade","viewModeFlyout.title":"Ver"},"tr":{"app.tabtitle":"HiDrive","app.title":"HiDrive","asc":"Artan","common.cancel":"İptal","common.download":"İndir","common.information":"More information","confirm.cancel":"İptal","confirm.ok":"Tamam","desc":"Azalan","details":"Ayrıntılar","error.401":"Yetkili değil","error.403":"Yasak","error.404":"Aradığınız sayfayı maalesef bulamıyoruz.","error.410":"Bu paylaşım bağlantısının süresi maalesef dolmuş.","error.500":"Dahili bir hata oluştu.","error.503":"Bu işlev, geçici bir süre için kullanılamamaktadır.","error.browser.missingFeature":"Bu işlev tarayıcınız tarafından desteklenmiyor.","error.expired":"Oturum zaman aşımına uğradı. Lütfen yeniden oturum açın.","error.generic":"Bir hata oluştu.","error.password":"Girilen paylaşım parolası geçersiz.","error.password_empty":"Lütfen bir parola girin.","eu_cookie.url_text":"Daha fazla bilgi.","file.details.datetaken":"Çekim tarihi","file.details.dimensions":"Boyutlar","file.details.exposuretime":"Pozlama süresi","file.details.fnumber":"Diyafram","file.details.focallength":"Odak uzaklığı","file.details.iso":"ISO","file.details.location":"Konum","file.details.manufacturer":"Makine üreticisi","file.details.model":"Model","file.name":"Ad","file.size":"Boyut","file.size.unit.Bytes":"B","file.size.unit.GB":"GB","file.size.unit.KB":"KB","file.size.unit.MB":"MB","file.size.unit.PB":"PB","file.size.unit.TB":"TB","file.type":"Tür","file.type.dir":"Klasör","file.type.fileitem":"Dosya","file.update":"Değiştirme tarihi","filemanager.delete.error.all":"{0} öge silinirken bir hata oluştu.","filemanager.delete.error.one":"Silinemedi \\"{0}\\"","filemanager.delete.error.some":"{1} öge silindi. {0} ögeyi silerken bir hata oluştu.","filemanager.delete.prompt.cancel":"İptal","filemanager.delete.prompt.multi":"Bu {0} ögeleri gerçekten silmek istiyor musunuz?","filemanager.delete.prompt.ok":"Sil","filemanager.delete.prompt.single":"\\"{0}\\" ögesini gerçekten silmek istiyor musunuz?","filemanager.deselectAll":"Seçimi kaldır","filemanager.dnd.invitation":"Bu klasör boş - dosyalarınızı ve klasörlerinizi bu pencereye sürükleyip bırakın.","filemanager.dnd.invitation.noWrite":"Bu klasör boş.","filemanager.download_dir.error.404":"\\"{0}\\" klasörü artık mevcut değil.","filemanager.download.archiveprefix":"HiDrive","filemanager.download.error.404":"\\"{0}\\" dosyası artık mevcut değil","filemanager.download.error.common":"\\"{0}\\" dosyası indirilemedi","filemanager.downloadAll":"Tümünü indir","filemanager.downloadSelected":"Seçimi indir","filemanager.encrypted.text":"Bu klasör şifrelenmiştir. HiDrive uygulamalarınızda veya HiDrive yazılımınızdaki şifrelenmiş verileri yalnızca uygun bir tuşla okuyabilirsiniz.","filemanager.image.error":"Görüntü yüklenirken bir hata oluştu.","filemanager.newfolder.button":"Yeni klasör","filemanager.newfolder.defaultname":"Yeni klasör","filemanager.newfolder.error.common":"Yeni klasör oluşturulurken bir hata oluştu.","filemanager.noFiles":"Bu klasör boş.","filemanager.noFiles.writable":"Bu klasör boş - dosyalarınızı ve klasörlerinizi bu pencereye sürükleyip bırakın.","filemanager.rename.button.title":"Yeniden adlandır","filemanager.rename.toast.error.badChars":"Şu karakterlere izin verilmez:","filemanager.rename.toast.error.exists":"\\"{0}\\" yeniden adlandırılamadı, bu ad zaten mevcut.","filemanager.rename.toast.error.general":"\\"{0}\\" yeniden adlandırılamadı.","filemanager.selectall":"Tümünü seç","folder.loaderror.common":"{0} yüklenirken bir hata oluştu.","format.decimal":",","format.thousand":".","header.logout":"Oturumu kapat","imprint.title":"Şirket Künyesi","imprint.url":"https://www.strato.com/legal-notice/?lang=TR","js.activate":"HiDrive\'ı web tarayıcısında kullanabilmek için lütfen JavaScript\'i etkinleştirin.","lang.name":"Türkçe","lang.timeFormat":"d.m.y H:i","login.accept":"İleri","login.header":"Paylaşımı açmak için bir parola gereklidir","login.placeholder":"Parola","moremenu.files.delete":"Sil","pdfview.documenttoolbar.page":"Sayfa","sharelink.buttons.download":"İndir","sharelink.downloads":"Kalan indirmelerin sayısı: {0}","sharelink.preview.default":"Dosya görüntülenemiyor","sharelink.ttl":"Geçerlilik süresi: {0}","sharelink.ttl.timeFormat":"d.m.y H:i","sortFlyout.date":"Tarih","sortFlyout.name":"Ad","sortFlyout.size":"Boyut","sortFlyout.sortedBy":"Sıralama kriteri","sortFlyout.title":"Sıralama","sortFlyout.type":"Tür","teaser.app.excerpt":"Akıllı telefon uygulaması ile çevrimiçi depolama alanınıza mobil olarak dilediğiniz zaman erişim sağlayabilirsiniz.","teaser.app.link":"İndir","teaser.app.title":"Ücretsiz HiDrive uygulaması","teaser.app.url":"https://www.strato.com/tr_tr/bulut_depolama/#apps","teaser.tuev.excerpt":"Alman bilgi işlem merkezlerinde TÜV sertifikalı veri güvenliği (ISO 27001).","teaser.tuev.title":"TÜV sertifikalı güvenlik","toolbar.item.more":"Daha fazla","toolbar.item.upload":"Yükle","upload.detail.cancelAll":"Yüklemeleri iptal et","upload.detail.close":"Kapat","upload.detail.moreuploads":"Daha fazla dosya yükle","upload.detail.retryFailedUpload":"Retry failed upload","upload.detail.retryFailedUploads":"Retry failed uploads","upload.detail.stats.error":"{0} hata","upload.detail.stats.transfer":"{0} / {1} yüklendi","upload.detail.title":"Yüklemeler","upload.error.abort":"İptal edildi","upload.error.exists":"Bu dizin adı zaten var.","upload.error.failed":"Failed","upload.error.network":"Ağ hatası","upload.size.calculation":"… tanımlanıyor","upload.status.retry":"Ağ hatası: Yükleme yineleniyor","viewmode.fluid":"Galeri","viewmode.list":"Liste","viewmode.tiles":"Kafes","viewModeFlyout.title":"Görünüm"}}')},function(e,t){e.exports='<span class="bg-sprite logo"></span>\n<div class="right">\n\t<% if (isLoggedIn) { %>\n\t<span class="logout">\n\t\t<span class="icon icon-logout" title="<%= lang.get("header.logout") %>"></span>\n\t</span>\n\t<% } %>\n</div>\n'},function(e,t){e.exports='<div class="links">\n\t<% if (lang.getLanguages().length > 1) { %>\n\t<div class="language-target"></div>\n\t<span class="simple-separator"></span>\n\t<% } %>\n\t<a href="<%= urls.imprint %>" target="_blank"><%= lang.get("imprint.title") %></a>\n</div>\n\n\n<% if (hasPoweredBy) { %>\n<a href="<%= lang.get("poweredBy.url") %>" target="_blank"\n\tclass="powered_by bg-sprite">\n</a>\n<% } %>\n'},function(e,t){e.exports='<%\nif (segments.length) {\n%>\n<div class="level-up-area">\n\t<%\n\t// level up link if there are more than one path segments\n\t// else show inactive icon\n\tif(segments.length> 1) {\n\tvar parentSegment = segments[segments.length -2];\n\t%>\n\t<a href="<%= parentSegment.href %>"\n\t\ttitle="<%- parentSegment.title %>"\n\t\tclass="link icon icon-level-up level-up">\n\t</a>\n\n\t<% } else { %>\n\n\t<span class="icon icon-level-up level-up inactive"></span>\n\n\t<% } %>\n\n\t<span class="sep">&#160;</span>\n</div>\n<%\n}\n%>\n\n<%\nif (segments.length> 1) {\n// root\nvar root = segments.shift();\n%>\n\t<div class="root segment">\n\t\t<%\n\t\tif (root.icon) {\n\t\t%>\n\t\t<span class="segment-icon <%= root.icon.className %>" title="<%= root.icon.title %>"></span>\n\t\t<%\n\t\t}\n\t\t%>\n\t\t<a href="<%= root.href %>" class="link text" title="<%- root.title %>">\n\t\t\t<%- root.name %>\n\t\t</a>\n\t\t<% if (segments.length> 0) { %>\n\t\t<span class="arrow icon-breadcrumb-arrow"></span>\n\t\t<% } %>\n\t</div>\n<% } %>\n\n<div class="inner">\n<%\nvar slength = segments.length -1,\n\tpredecessor;\n_.each(segments.reverse(), function(segment, index) {\n\tvar current = !index,\n\t\tlast = slength == index;\n\t\t// to generate the ...> link\n\t\tpredecessor = segments[index+1];\n%>\n\t<div class="segment <% if (current) { print(\'current\'); } else if(last) { print(\'last\'); }%>">\n\t\t<% if (!last && predecessor) { %>\n\t\t<a href="<%= predecessor.href %>" class="hellip link" title="<%- predecessor.title || predecessor.name %>">&hellip;</a>\n\t\t<span class="arrow icon-breadcrumb-arrow"></span>\n\t\t<% } %>\n\t\t<%\n\t\tif (segment.icon) {\n\t\t%>\n\t\t<span class="segment-icon <%= segment.icon.className %>" title="<%= segment.icon.title %>"></span>\n\t\t<%\n\t\t}\n\t\t%>\n\t\t<a <% if (!current) { %>href="<%= segment.href %>"<% } %> class="<% if(!current) { %>link<% } %> text" title="<%- segment.title || segment.name %>">\n\t\t\t<%- segment.name %>\n\t\t</a>\n\t</div>\n<%\n});\n%>\n\n</div>\n'},function(e,t){e.exports='<div class="toast-body sj-selectable">\n\t<span class="toast-close icon-container">\n\t\t<span class="icon-toast-close"></span>\n\t</span>\n\t<span class="message"><%= msg %></span>\n</div>\n'},function(e,t){e.exports='<div class="sj-tooltip-body sj-selectable"><%= body %></div>\n<div class="sj-tooltip-tip"></div>\n'},function(e,t){e.exports='<li class="sj-navigation-item" data-name="<%= item.name %>">\n\t<a>\n\t\t<% if (item.icon) { %>\n\t\t<span class="icon <%= _.result(item, "icon") %>"></span>\n\t\t<% } %>\n\t\t<span class="label"><%= _.result(item, "label") %></span>\n\t</a>\n\n\t<% if (items.length) { %>\n\t<ul class="sj-navigation-group">\n\t\t<%= items.join("") %>\n\t</ul>\n\t<% } %>\n</li>\n'},function(e,t){e.exports='<% if (options.isModal) { %>\n\t<div class="sj-overlay-cover"></div>\n<% } %>\n<div class="sj-overlay-content">\n\t<div class="sj-overlay-body">\n\n\t<% if (options.canClose) { %>\n\t\t<span data-action="close-overlay" class="sj-overlay-close icon-overlay-close"></span>\n\t<% } %>\n\t</div>\n\t<div class="sj-overlay-loading-cover">\n\t\t<span class="icon icon-loading"></span>\n\t</div>\n</div>\n'},function(e,t){e.exports='<span class="icon icon-overlay-error"></span>\n<p><%= message %></p>\n<div class="ok-button-target"></div>\n'},function(e,t){e.exports='<input type="checkbox">\n'},function(e,t){e.exports='<input type="checkbox"><span></span>\n'},function(e,t){e.exports='<div class="sj-list-checker-items"></div>\n'},function(e,t){e.exports='<li class="<%= className %>">\n\t<label>\n\t\t<input type="radio" name="<%= name %>" value="<%= value %>">\n\t\t<div class="check"></div>\n\t\t<%= itemHtml %>\n\t</label>\n</li>\n'},function(e,t){e.exports='<span class="icon icon-language"></span><span class="label"><%- lang.getInLang("lang.name", lang.getLang()) %></span><span class="arrow"></span>\n'},function(e,t){e.exports='<% _.each (options, function (opt){ %>\n\t<li data-lang="<%= opt.value %>" class="<%= opt.selected ? \'selected\': \'\' %>">\n\t\t<span class="label"><%= opt.text %></span>\n\t</li>\n<% }); %>\n'},function(e,t){e.exports='<form class="password-dialog">\n\t<span class="password-header"><%= lang.get("login.header") %></span>\n\t<% if (error) { %>\n\t\t<span class="error sj-selectable">\n\t\t\t<span class="text"><%= error %></span>\n\t\t</span>\n\t<% } %>\n\t<div class="password-wrapper"></div>\n</form>\n'},function(e,t){e.exports='<h2><%= message %></h2>\n<div class="wrapper">\n\t<div class="error">\n\t\t<span class="error-image error-image-<%= mappedCode %>"></span>\n\t</div>\n</div>\n'},function(e,t){e.exports='<ul>\n<li>\n\t<h2><%= lang.get("teaser.app.title") %></h2>\n\t<p class="excerpt">\t\n\t\t<em class="bg-sprite icon-app"></em>\n\t\t<%= lang.get("teaser.app.excerpt") %>\n\t\t<a class="link" href="<%= lang.get("teaser.app.url") %>" target="_blank">\n\t\t\t<%= lang.get("teaser.app.link") %>\n\t\t</a>\n\t</p>\n</li>\n<li>\n\t<h2><%= lang.get("teaser.tuev.title") %></h2>\n\t<p class="excerpt">\t\n\t\t<em class="bg-sprite icon-tuev"></em>\n\t\t<%= lang.get("teaser.tuev.excerpt") %>\n\t</p>\n</li>\n<ul>\n'},function(e,t){e.exports='<div class="shlnk-file-info">\n\t<span class="filename"><%- formatters.breakable(model.get("display_name")) %></span> |\n\t<span class="size"><%= formatters.size(model.get("size")) %></span>\n</div>\n<div class="shlnk-nopreview">\n\t<div class="icon-shlnk-mimetype icon-mimetype-group-<%= model.get("group") %>"></div>\n\t<span><%= lang.get("sharelink.preview.default") %></span>\n</div>\n<div class="shlnk-media-placeholder"></div>\n<div class="shlnk-actions"><div class="download-target"></div></div>\n<div class="shlnk-share-info">\n<% if (model.has("expirytime")) { %>\n\t<span class="ttl"><%= lang.get("sharelink.ttl", [formatters.date(model.get("expirytime"), lang.get("sharelink.ttl.timeFormat"))]) %></span>\n<% } %>\n<% if (model.has("remaining")) { %>\n\t<span class="downloads"><%= lang.get("sharelink.downloads", [model.get("remaining")]) %></span>\n<% } %>\n</div>\n'},function(e,t){e.exports='<video controls src="<%= url %>"></video>\n'},function(e,t){e.exports='<div class="filesviewer-overlay-close icon-filesviewer-close" data-action="close-overlay"></div>\n'},function(e,t){e.exports='<div class="filesviewer-overlay-close icon-filesviewer-close" data-action="close-overlay"></div>\n\n<span class="icon-mimetype-large icon-mimetype-group-thumb"></span>\n<div class="filesviewer-error"><%= lang.get("filemanager.image.error") %></div>\n'},function(e,t){e.exports='<div class="common-loader">\n\t<span class="icon-loading"></span>\n</div>\n'},function(e,t){e.exports='<div class="flx">\n\t<div class="top"></div>\n\t<div class="text">\n\t\t<p class="sj-selectable">\n\t\t\t<% if (model.get("encrypted")) { %>\n\t\t\t<%= lang.get("filemanager.encrypted.text") %>\n\t\t\t<% } else { %>\n\t\t\t<%= lang.get("filemanager.noFiles") %>\n\t\t\t<% } %>\n\t\t</p>\n\t</div>\n\t<div class="bottom"></div>\n</div>\n'},function(e,t){e.exports='<div class="error-or-empty-state">\n\t<div class="flx">\n\t\t<div class="top"></div>\n\t\t<div class="error-text">\n\t\t\t<p class="sj-selectable"><%= lang.get("folder.loaderror.common", formatters.escapedBreakable(model.urlDecode("path"))) %></p>\n\t\t</div>\n\t\t<div class="bottom"></div>\n\t</div>\n</div>\n'},function(e,t){e.exports='<div class="drag-shadow-icon">\n</div>\n<div class="drag-shadow-counter">\n\t<% if (fileCount > 999) { %>\n\t999+\n\t<% } else { %>\n\t<%= fileCount %>\n\t<% } %>\n</div>\n'},function(e,t){e.exports='<% if(model.get("readable")) { %>\n<div class="selecticon icon-item-selector">\n\t<div class="icon-item-selected"></div>\n</div>\n<% } %>\n<div class="itemcontent">\n\n\t<span class="file-item-icon icon-mimetype-group-<%= model.get("group") %>"\n\t\t\tdata-field="group">\n\t\t<span class="label-text group"></span>\n\t</span>\n\n\t<span class="file-item-label file-item-displayname"\n\t\t\tdata-field="display_name"\n\t\t\ttitle="<%- model.get("display_name") %>">\n\t\t<% if (model.get("share")) { %>\n\t\t<span class="icon-item-shared is-shared-icon"\n\t\t\t\tdata-action="share-info"\n\t\t\t\ttitle="<% print(model.get(\'type\') === fileTypes.directory ? lang.get(\'filemanager.share.dir.tooltip\') : lang.get(\'filemanager.share.fileitem.tooltip\')); %>"></span>\n\t\t<% } %>\n\t\t\x3c!-- please place no newlines or spaces in the .display_name node. It has preserved output //--\x3e\n\t\t<span class="label-text display_name"><%- model.get("display_name") %></span>\n\t</span>\n\n\t<span class="file-item-share-icon <% if(model.get("share")) { %> icon-item-shared <% } %>"\n\t\t\t<% if (model.get("share")) { %>\n\t\t\tdata-action="share-info"\n\t\t\ttitle="<% print(model.get(\'type\') === fileTypes.directory ? lang.get(\'filemanager.share.dir.tooltip\') : lang.get(\'filemanager.share.fileitem.tooltip\')); %>"\n\t\t\t<% } %>\n\t\t\tdata-field="shared">\n\t\t<span class="label-text shared"></span>\n\t</span>\n\n\t<span class="file-item-label file-item-ext"\n\t\t\tdata-field="type">\n\t\t<span class="label-text type">\n\t\t<% if(model.get("type") === fileTypes.directory) { %>\n\t\t\t<%= lang.get("file.type.dir") %>\n\t\t<% } else {\n\t\t\tvar ext = model.urlDecode("ext");\n\t\t\tif (ext) {\n\t\t\t%>\n\t\t\t.<%- ext %>\n\t\t<%\t} else { %>\n\t\t\t<%= lang.get("file.type.fileitem") %>\n\t\t<%\t}\n\t\t} %>\n\t\t</span>\n\t</span>\n\n\t<span class="file-item-label file-item-size"\n\t\t\tdata-field="size">\n\t\t<span class="label-text size">\n\t\t<% if(model.has("size")) { %>\n\t\t\t<%= formatters.size(parseInt(model.get("size"), 10)) %>\n\t\t<% } %>\n\t\t</span>\n\t</span>\n\n\t<span class="file-item-label file-item-date"\n\t\t\tdata-field="mtime">\n\t\t<span class="label-text mtime">\n\t\t<% if(model.has("mtime")) { %>\n\t\t\t<%= formatters.date(model.get("mtime"), lang.get("lang.timeFormat"))  %>\n\t\t<% } %>\n\t\t</span>\n\n\t</span>\n\n\t<span class="file-item-label file-item-path"\n\t\t\tdata-action="open-parent"\n\t\t\ttitle="<%- model.urlDecode("parentPath") || "" %>">\n\t\t<span class="label-text path">\n\t\t<%\n\t\tvar parentName = model.urlDecode("parentName")\n\t\tif (parentName !== null) {\n\t\t%>\n\t\t\t…/<%- parentName %>\n\t\t<% } %>\n\t\t</span>\n\n\t</span>\n</div>\n'},function(e,t){e.exports='<% if(model.get("readable")) { %>\n<div class="selecticon icon-item-selector">\n\t<div class="icon-item-selected"></div>\n</div>\n<% } %>\n<div class="itemcontent">\n\n\t<span class="file-item-icon icon-mimetype-group-<%= model.get("group") %>"\n\t\t\tdata-field="group">\n\t\t<span class="label-text group"></span>\n\t</span>\n\n\t<span class="file-item-label file-item-displayname"\n\t\t\tdata-field="display_name"\n\t\t\ttitle="<%- model.get("display_name") %>">\n\t\t<% if (model.get("share")) { %>\n\t\t<span class="icon-item-shared is-shared-icon"\n\t\t\t\tdata-action="share-info"\n\t\t\t\ttitle="<% print(model.get(\'type\') === fileTypes.directory ? lang.get(\'filemanager.share.dir.tooltip\') : lang.get(\'filemanager.share.fileitem.tooltip\')); %>"></span>\n\t\t<% } %>\n\t\t\x3c!-- please place no newlines or spaces in the .display_name node. It has preserved output //--\x3e\n\t\t<span class="label-text display_name"><%- model.get("display_name") %></span>\n\t</span>\n\n</div>\n'},function(e,t){e.exports='<% if(model.get("readable")) { %>\n<div class="selecticon icon-item-selector">\n\t<div class="icon-item-selected"></div>\n</div>\n<% } %>\n<div class="itemcontent">\n\n\t<span class="file-item-icon icon-mimetype-group-<%= model.get("group") %>"\n\t\t\tdata-field="group">\n\t\t<span class="label-text group"></span>\n\t</span>\n\n\t<span class="file-item-label file-item-displayname"\n\t\t\tdata-field="display_name"\n\t\t\ttitle="<%- model.get("display_name") %>">\n\t\t<% if (model.get("share")) { %>\n\t\t<span class="icon-item-shared is-shared-icon"\n\t\t\t\tdata-action="share-info"\n\t\t\t\ttitle="<% print(model.get(\'type\') === fileTypes.directory ? lang.get(\'filemanager.share.dir.tooltip\') : lang.get(\'filemanager.share.fileitem.tooltip\')); %>"></span>\n\t\t<% } %>\n\t\t\x3c!-- please place no newlines or spaces in the .display_name node. It has preserved output //--\x3e\n\t\t<span class="label-text display_name"><%- model.get("display_name") %></span>\n\t</span>\n\n</div>\n'},function(e,t){e.exports='<div class="itemcontent">\n\t<span class="file-item-icon" data-field="group"></span>\n\t<span class="file-item-label file-item-displayname sortable" data-field="display_name">\n\t\t<%= lang.get("file.name") %>\n\t\t<span class="icon-list-ascending"></span>\n\t\t<span class="icon-list-descending"></span>\n\t</span>\n\t<span class="file-item-label file-item-ext sortable" data-field="type">\n\t\t<%= lang.get("file.type") %>\n\t\t<span class="icon-list-ascending"></span>\n\t\t<span class="icon-list-descending"></span>\n\t</span>\n\t<span class="file-item-label file-item-size sortable" data-field="size">\n\t\t<%= lang.get("file.size") %>\n\t\t<span class="icon-list-ascending"></span>\n\t\t<span class="icon-list-descending"></span>\n\t</span>\n\t<span class="file-item-label file-item-date sortable" data-field="mtime">\n\t\t<%= lang.get("file.update") %>\n\t\t<span class="icon-list-ascending"></span>\n\t\t<span class="icon-list-descending"></span>\n\t</span>\n</div>\n'},function(e,t){e.exports='<%- lang.get("filemanager.rename.toast.error.badChars") %> <b><%- chars %></b>\n'},function(e,t){e.exports='<span class="selection-boundary"></span>\n<div class="content-target"></div>\n<div class="drag-shadow-target"></div>\n'},function(e,t){e.exports='<%\n// omit last segment (which is the current folder) and reverse\nvar reversedSegments = _.initial(segments).reverse();\n\n_.each(reversedSegments, function(segment) {\n%>\n\t<li data-href="<%= segment.href %>" title="<%- segment.title %>">\n\t\t<span class="label"><%- segment.name %></span>\n\t</li>\n<%\n});\n%>\n'},function(e,t){e.exports='<%\n\tvar segment = _.last(segments),\n\t\tparentSegment,\n\t\tdisabled = segments.length < 2;\n%>\n\n<% if (disabled) { %>\n\t<span class="icon icon-level-up disabled"></span>\n<% } else {\n\tparentSegment = segments[segments.length - 2];\n\t%>\n\t<a href="<%= parentSegment.href %>" title="<%- parentSegment.title %>" class="level-up">\n\t\t<span class="icon icon-level-up"></span>\n\t</a>\n<% } %>\n\n<span class="sep"></span>\n<span class="bg-sprite folder-icon <%= disabled ? \'disabled\' : \'\' %>"></span>\n<span class="arrow icon-folder-flyout-arrow <%= disabled ? \'disabled\' : \'\' %>"></span>\n\n<% if (segment) { %>\n\t<span class="label" title="<%- segment.title %>"><%- segment.name %></span>\n<% } %>\n'},function(e,t){e.exports='<%\n_.each(sorting, function(opt, ind) {\n%>\n\t<li data-cid="<%= ind %>" class="<%= opt.selected ? \'selected\': \'\' %> <%= opt.direction %>">\n\t\t<span class="label"><%= opt.text %></span>\n\t\t<span class="sort-indicators">\n\t\t\t<span class="icon-sort-descending"></span>\n\t\t\t<span class="icon-sort-ascending"></span>\n\t\t</span>\n\t</li>\n<%\n});\n%>\n'},function(e,t){e.exports='<%\n_.each(viewModeList, function(viewMode) {\n\tvar selected = model.get("viewMode") === viewMode.name;\n%>\n\t<div\n\t\tclass="tile <%= selected ? \'selected\' : \'\' %>"\n\t\tdata-cid="<%= viewMode.name %>"\n\t\ttitle="<%= viewMode.title %>">\n\t\t\t<span class="icon icon-view-<%= viewMode.name %>"></span>\n\t\t\t<span class="viewmode-title"><%= viewMode.title %></span>\n\t</div>\n<%\n})\n%>\n'},function(e,t){e.exports='<div class="upload-item">\n\t<div class="upload-item-progress progressbar-container"></div>\n\t<div class="upload-item-content">\n\t\t<div class="upload-item-mimetype upload-overlay-group-icon icon-mimetype-group-<%= model.get("group") %>"></div>\n\t\t<div class="upload-item-label sj-selectable">\n\t\t\t<div class="upload-item-name" title="<%- model.get("name") %>"><%- model.get("name") %></div>\n\t\t\t<% if (uploadItemError) { %>\n\t\t\t\t<div class="upload-item-error text-small">\n\t\t\t\t\t<%= uploadItemError %>\n\t\t\t\t</div>\n\t\t\t<% } else if (uploadItemStatus) { %>\n\t\t\t\t<div class="upload-item-status text-small">\n\t\t\t\t\t<%= uploadItemStatus %>\n\t\t\t\t</div>\n\t\t\t<% } %>\n\t\t</div>\n\t\t<span class="upload-item-size sj-selectable">\n\t\t\t<%= uploadItemSize %>\n\t\t</span>\n\t\t<div class="upload-item-controls">\n\t\t\t<button class="sj-button sj-icon-only-button upload-item-cancel" title="<%= lang.get(\'common.cancel\') %>" data-action="cancel" data-track-op="upload-cancel" data-track-target="item">\n\t\t\t\t<span class="icon-upload-cancel"></span>\n\t\t\t</button>\n\t\t\t<button class="sj-button sj-icon-only-button upload-item-resume" title="<%= lang.get(\'upload.detail.retryFailedUpload\') %>" data-action="resume" data-track-op="upload-resume" data-track-target="item">\n\t\t\t\t<span class="icon-upload-resume"></span>\n\t\t\t</button>\n\t\t\t<span class="icon-upload-cancelled"></span>\n\t\t\t<span class="icon-upload-complete"></span>\n\t\t</div>\n\t</div>\n</div>\n'},function(e,t){e.exports='<%= lang.get("upload.detail.title") %>\n'},function(e,t){e.exports='<span class="uploads-ok">\n\t<span class="icon-uploading"></span>\n\t<span class="icon-upload-complete"></span>\n\t<span class="uploads-ok-text"></span>\n</span>\n\n<span class="uploads-error">\n\t<span class="icon-upload-error"></span>\n\t<span class="uploads-error-text"></span>\n</span>\n\n<div class="progress-bar"></div>\n'},function(e,t){e.exports='<div class="overlay-title">\n\t<div class="title-target"></div>\n</div>\n\n<div class="stats-target"></div>\n\n<div class="grid-target"></div>\n\n<div class="overlay-buttons">\n\t<div class="button-more-uploads"></div>\n\t<div class="button-close-target"></div>\n\t<div class="button-cancel-all-target"></div>\n\t<div class="button-retry-all-failed-target"></div>\n</div>\n'},function(e,t){e.exports='<div class="header-target"></div>\n<div class="filemanager-header-wrapper">\n\t<div class="menubar-row">\n\t\t<div class="folder-flyout-target"></div>\n\t\t<div class="menubar-target"></div>\n\t</div>\n\t<div class="toolbar-target"></div>\n</div>\n<div id="content"></div>\n<div class="footer-target"></div>\n'},function(e,t){e.exports='<div class="icon-loading"></div>\n'},function(e,t){e.exports='<% var isEncrypted = model.get("encrypted"),\n\tisWritable = model.get("writable"); %>\n<div class="flx">\n\t<div class="top"></div>\n\t<div class="middle">\n\t\t<div class="<%- isEncrypted ? "encrypted-folder" : "empty-folder" %>"></div>\n\t\t<div class="text">\n\t\t\t<h3>\n\t\t\t\t<% if (isEncrypted) { %>\n\t\t\t\t<%= lang.get("filemanager.encrypted.text") %>\n\t\t\t\t<% } else if(!isWritable) { %>\n\t\t\t\t<%= lang.get("filemanager.noFiles") %>\n\t\t\t\t<% } else { %>\n\t\t\t\t<%= lang.get("filemanager.noFiles.writable") %>\n\t\t\t\t<% } %>\n\t\t\t</h3>\n\t\t</div>\n\t</div>\n\t<div class="bottom"></div>\n</div>\n'},function(e,t){e.exports='<p class="sj-selectable">\n<%= text %>\n<a href="<%= url %>" target="_cookie"><%= url_text %></a>\n</p>\n<span class="icon icon-cookiebanner-close close"></span>\n'},function(e,t){e.exports='<span class="overlay-text"><%= message %></span>\n<div class="overlay-buttons">\n\t<span class="ok-target"></span>\n\t<span class="cancel-target"></span>\n</div>\n'},function(e,t){e.exports='<span class="overlay-text"><%= message %></span>\n<div class="overlay-buttons">\n\t<span class="ok-target"></span>\n</div>\n'},function(e,t){e.exports='<span class="icon-mimetype-large icon-mimetype-group-<%= file.get("group")%>"></span>\n<span class="display-name sj-selectable" title="<%- file.get("display_name") %>"><%- file.get("display_name") %></span>\n<div class="download-button-target"></div>\n'},function(e,t){e.exports="<video></video>\n"},function(e,t){e.exports='<audio></audio>\n<span class="icon-mimetype-large icon-mimetype-group-audio"></span>\n<span class="display-name sj-selectable" title="<%- file.get(\'display_name\') %>"><%- file.get("display_name") %></span>\n'},function(e,t){e.exports='<object></object>\n<canvas></canvas>\n<div class="filesviewer-loader icon-loading"></div>\n<% if(pdfInfo) { %>\n<div class="document-toolbar">\n\t<div class="pages">\n\t\t<label><%= lang.get("pdfview.documenttoolbar.page") %></label>\n\t\t<input\n\t\t\tclass="current-page" type="number" min="1"\n\t\t\tmax="<%= pdfInfo.totalPages %>" step="1"\n\t\t\tvalue="<%= pdfInfo.currentPage %>"> / <%= pdfInfo.totalPages %>\n\t</div>\n\t<div class="navigation">\n\t\t<button class="nav-btn pdf-prev-page icon-filesviewer-pdf-prev"></button>\n\t\t<button class="nav-btn pdf-next-page icon-filesviewer-pdf-next"></button>\n\t</div>\n</div>\n<% } %>\n'},function(e,t){e.exports='<h2><%= lang.get("details") %></h2>\n\n<h4><%= lang.get("file.name") %></h4>\n<p title="<%- model.get(\'display_name\') %>" data-qa="detail_displayname"><%- formatters.breakable(model.get("display_name")) %></p>\n\n<% if(detail.mime_type) { %>\n\t<h4><%= lang.get("file.type") %></h4>\n\t<p data-qa="detail_mimetype"><%- detail.mime_type %></p>\n<% } %>\n\n<% if(detail.size) { %>\n\t<h4><%= lang.get("file.size") %></h4>\n\t<p data-qa="detail_size"><%= formatters.size(detail.size) %></p>\n<% } %>\n\n<% if(detail.image) { %>\n\t<h4><%= lang.get("file.details.dimensions") %></h4>\n\t<p data-qa="detail_dimensions"><%- detail.image.width %> x <%- detail.image.height %> px</p>\n<% } %>\n\n<% if(detail.exif) { %>\n\t<% if (detail.exif.DateTimeOriginal) { %>\n\t\t<h4><%= lang.get("file.details.datetaken") %></h4>\n\t\t<p data-qa="exif_datetimeoriginal"><%- formatters.exifDate(detail.exif.DateTimeOriginal, lang.get("lang.timeFormat")) %></p>\n\t<% } %>\n<% } %>\n\n<% if(detail.mtime) { %>\n\t<h4><%= lang.get("file.update") %></h4>\n\t<p data-qa="detail_mtime"><%= formatters.date(detail.mtime, lang.get("lang.timeFormat")) %></p>\n<% } %>\n\n<% if(detail.exif) { %>\n\t<% if (detail.exif.Aperture) { %>\n\t\t<h4><%= lang.get("file.details.fnumber") %></h4>\n\t\t<p data-qa="exif_aperture">f/<%- detail.exif.Aperture %></p>\n\t<% } %>\n\n\t<% if (detail.exif.ExposureTime) { %>\n\t\t<h4><%= lang.get("file.details.exposuretime") %></h4>\n\t\t<p data-qa="exif_exposuretime"><%- formatters.exposureTime(detail.exif.ExposureTime) %></p>\n\t<% } %>\n\n\t<% if (detail.exif.ISO) { %>\n\t\t<h4><%= lang.get("file.details.iso") %></h4>\n\t\t<p data-qa="exif_iso"><%- detail.exif.ISO %></p>\n\t<% } %>\n\n\t<% if (detail.exif.FocalLength) { %>\n\t\t<h4><%= lang.get("file.details.focallength") %></h4>\n\t\t<p data-qa="exif_focallength"><%- detail.exif.FocalLength %> mm</p>\n\t<% } %>\n\n\t<% if (detail.exif.Make) { %>\n\t\t<h4><%= lang.get("file.details.manufacturer") %></h4>\n\t\t<p data-qa="exif_make"><%- detail.exif.Make %></p>\n\t<% } %>\n\n\t<% if (detail.exif.Model) { %>\n\t\t<h4><%= lang.get("file.details.model") %></h4>\n\t\t<p data-qa="exif_model"><%- detail.exif.Model %></p>\n\t<% } %>\n\n\t<% if (detail.exif.GPSLongitude && detail.exif.GPSLatitude) { %>\n\t\t<h4><%= lang.get("file.details.location") %></h4>\n\t\t<p data-qa="exif_location">\n\t\t\t<%\n\t\t\t\tvar lat = detail.exif.GPSLatitude,\n\t\t\t\t\tlon = detail.exif.GPSLongitude;\n\t\t\t%>\n\t\t\t<span class="icon icon-map-marker"></span><%- lat %>, <%- lon %>\n\t\t\t<p>\n\t\t\t\t<a href="<%= mapLinksHelper.getMapLink(\'googlemaps\', lat, lon) %>" rel="noreferrer" target="_blank">Google Maps</a> |\n\t\t\t\t<a href="<%= mapLinksHelper.getMapLink(\'openstreetmap\', lat, lon) %>" rel="noreferrer" target="_blank">OpenStreetMap</a>\n\t\t\t</p>\n\t\t</p>\n\t<% } %>\n<% } %>\n'},function(e,t){e.exports='<div class="left">\n\t<% if(canNavigate) { %>\n\t<span class="position sj-selectable"><%= index %>/<%= count %></span> -\n\t<% } %>\n\t<span class="display-name sj-selectable" title="<%- model.get(\'display_name\') %>"><%- model.get("display_name") %></span>\n</div>\n<div class="center">\n\t<div class="control-buttons">\n\t\t<% if (canNavigate) { %>\n\t\t<button class="previous icon icon-filesviewer-previous"></button>\n\t\t<% } %>\n\t\t<button class="play icon icon-filesviewer-play"></button>\n\t\t<button class="pause icon icon-filesviewer-pause"></button>\n\t\t<button class="start-diashow icon icon-filesviewer-play"></button>\n\t\t<button class="stop-diashow icon icon-filesviewer-pause"></button>\n\t\t<% if (canNavigate) { %>\n\t\t<button class="next icon icon-filesviewer-next"></button>\n\t\t<% } %>\n\t</div>\n</div>\n<div class="right">\n\t<div class="toolbar-buttons">\n\t\t<div class="progress-time">\n\t\t\t<span class="progress-current"></span>\n\t\t\t/\n\t\t\t<span class="progress-total"></span>\n\t\t</div>\n\t\t<span class="action-download icon icon-filesviewer-download" title="<%= lang.get("common.download") %>"></span>\n\t\t<span class="action-info icon icon-filesviewer-info" title="<%= lang.get("common.information") %>"></span>\n\t</div>\n</div>\n<div class="progress-bar"></div>\n'},function(e,t){e.exports=""},function(e,t){e.exports='<div class="filesviewer-overlay-close icon-filesviewer-close" data-action="close-overlay"></div>\n<div class="filesviewer">\n\t<div class="filesviewer-wrapper">\n\t\t<div class="filesviewer-container">\n\t\t\t<div class="filesviewer-content"></div>\n\t\t</div>\n\t</div>\n</div>\n'},function(e,t,n){function i(){n(59),n(62)}if(function(){return!("from"in Array&&function(){try{return Array.from({length:-1/0}),!0}catch(e){return!1}}()&&"find"in Array.prototype&&"findIndex"in Array.prototype&&"flat"in Array.prototype&&"document"in self&&"closest"in document.documentElement&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"entries"in Object&&"fromEntries"in Object&&"values"in Object&&"Promise"in self&&"Symbol"in self&&"iterator"in self.Symbol&&function(e){"use strict";try{var t=new e.URL("http://example.com");if("href"in t&&"searchParams"in t){var n=new URL("http://example.com");if(n.search="a=1&b=2","http://example.com/?a=1&b=2"===n.href&&(n.search="","http://example.com/"===n.href)){var i=new e.URLSearchParams("a=1"),r=new e.URLSearchParams(i);if("a=1"===String(r))return!0}}return!1}catch(e){return!1}}(self))}.call(window)){var r=document.createElement("script");r.src="js/polyfills.6eb3075cdf8fa30ee504.js",r.onload=i,r.onerror=function(e){console.error("Could not load the polyfills: "+e)},document.head.appendChild(r)}else i()},function(e,t,n){var i=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),a=new k(i||[]);return o._invoke=function(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return S()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=c(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function d(){}function h(){}function f(){}var p={};p[r]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(E([])));m&&m!==t&&n.call(m,r)&&(p=m);var v=f.prototype=d.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var i;this._invoke=function(r,o){function a(){return new t((function(i,a){!function i(r,o,a,s){var l=c(e[r],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return i("throw",e,a,s)}))}s(l.arg)}(r,o,i,a)}))}return i=i?i.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=c(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,u;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function E(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=v.constructor=f,f.constructor=h,h.displayName=s(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(w.prototype),w.prototype[o]=function(){return this},e.AsyncIterator=w,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new w(l(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,a,"Generator"),v[r]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=E,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;x(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=i}catch(e){Function("r","regeneratorRuntime = r")(i)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),o=n(2),a=n.n(o),s=n(0),l=n.n(s);function c(){return window.URL&&window.URL.createObjectURL?window.URL.createObjectURL:null}var u=function(e){window.location.href=e},d=function(){return window.location},h=function(){return window.location.pathname},f=function(){return window.location.hostname},p=function(){var e=window.location.href;return/#[^#]+$/.test(e)?e.split("#")[1]:""},g=function(){var e=window.navigator;return e.language||e.userLanguage||null},m=function(){return!!c()},v=function(e){var t=c();if(!t)throw new Error("createObjectURL() not supported");return t(e)},y=function(){return document.documentElement.clientHeight},w=function(){return document.documentElement.clientWidth},b=function(e){document.title=e},_=function(e){document.cookie=e},x=function(){return document.cookie},k=function(e,t){return window.getComputedStyle(e,t)},E=function(){return window.innerWidth},S=function(){return window.innerHeight},T=function(){return window.pageYOffset},C=function(e){window.onerror=e},j=n(4),D=/<a name=([^>]+)>([^<]+)<\/a>/g,O=new(a.a.Model.extend({storageKey:"lang",initialize:function(e){this._languageFileData=e},setLang:function(e){if(!e)throw new Error("no language given to set in langModel");var t=this._languageFileData;if(!(e in t))throw new Error('Language "'+e+'" is not defined in languageFileData');if(!Object.keys(t[e]).length)throw new Error('No keys in language "'+e+'" defined');this.language=e,this.clear({silent:!0}),this.set(t[this.language])},getLang:function(){return this.language},getLanguages:function(){return Object.keys(this._languageFileData)},convertLinks:function(e){return e.replace(D,'<flow-textlink data-event="$1">$2</flow-textlink>')},get:function(e,t){var n,i,r,o,a,s=this.attributes[e];if(!s)return"MISSING PROPERTY '"+e+"' in language '"+this.language+"'";if(!(i=(s=this.convertLinks(s)).match(/{\d+}/g)))return s;if(l.a.isUndefined(t))return"MISSING ALL VALUES FOR '"+s+"'";if(Array.isArray(t)||(t=[t]),r=i.map((function(e){return parseInt(e.substring(1),10)})),(o=l.a.max(r)+1-t.length)>0)return"MISSING "+o+" VALUE(S) FOR '"+s+"'";for(n=0;n<i.length;n++)a=r[n],l.a.isUndefined(t[a])||(s=s.replace(i[n],t[a]));return s},exists:function(e){return l.a.has(this.attributes,e)},bind:function(e,t){return this.get.bind(this,e,t)},getInLang:function(e,t){var n=this._languageFileData;if(!n[t])throw new Error("language '"+t+"' not defined in getInLang()");if(!n[t][e])throw new Error("key not defined: "+t+"/"+e);return n[t][e]}}))(j),P={d:function(e){return M(e.getDate())},j:function(e){return e.getDate()},m:function(e){return M(e.getMonth()+1)},F:function(e){return O.get("lang.monthsList.long").split(",")[e.getMonth()]},M:function(e){return O.get("lang.monthsList.short").split(",")[e.getMonth()]},n:function(e){return e.getMonth()+1},Y:function(e){return e.getFullYear()},y:function(e){return(""+e.getFullYear()).substr(2)},a:function(e){return e.getHours()<12?"am":"pm"},A:function(e){return e.getHours()<12?"AM":"PM"},g:function(e){return e.getHours()%12||12},G:function(e){return e.getHours()},h:function(e){return M(e.getHours()%12||12)},H:function(e){return M(e.getHours())},i:function(e){return M(e.getMinutes())},s:function(e){return M(e.getSeconds())}},A=/^(\d{4})[:-](\d{2})[:-](\d{2})[\sT]?(\d{2}):(\d{2}):(\d{2})$/;function M(e){return("0"+e).slice(-2)}function I(e){switch(e){case 0:return O.get("file.size.unit.Bytes");case 1:return O.get("file.size.unit.KB");case 2:return O.get("file.size.unit.MB");case 3:return O.get("file.size.unit.GB");case 4:return O.get("file.size.unit.TB");default:return O.get("file.size.unit.PB")}}function F(e){var t,n,i,r="";if("number"!=typeof e||isNaN(e))return r;if(t=e.toString().split("."),n=O.get("format.thousand"),r=t[0],n&&r.length>3)for(i=/(\d+)(\d{3})/;i.test(r);)r=r.replace(i,"$1"+n+"$2");return t.length>1&&(r+=O.get("format.decimal")+t[1]),r}var z={sec2days:function(e){var t;return void 0!==e?(t=e/60/60/24)<=0?"0":t<1?"< 1":""+Math.round(t):""},date:function(e,t){var n,i;if(void 0===e)return"";if(n=Number(e),isNaN(n))throw new Error("time input parameter is not a number");if("string"!=typeof t)throw new Error("formatstring of type string required");return i=new Date(1e3*n),t.replace(/[djmnYyaAgGhHisFM]/g,(function(e){return e in P?P[e](i):e.substring(1)}))},exifDate:function(e,t){var n,i=A.exec(e);return i?(n=(n=new Date(i[1],i[2]-1,i[3],i[4],i[5],i[6])).getTime()/1e3,this.date(n,t)):e},exposureTime:function(e){if(isNaN(e))throw new Error("Argument needs to be a number!");return e>=1?e.toFixed(1):"1/"+(1/e).toFixed(0)},size:function(e,t){var n=t||1,i=parseInt(Math.floor(Math.log(Math.max(e,n))/Math.log(1024)),10);if(isNaN(e))throw new Error("input parameter is not a number");return 0===i?F(e)+" "+I(0):F(Math.round(e/Math.pow(1024,i)*10)/10)+" "+I(i)},sizeWithUnitCap:function(e,t){var n,i,r;if(isNaN(e))throw new Error("parameter bytes is not a number");if("string"!=typeof t)throw new Error("parameter unitCap is not a String");switch(t.toUpperCase()){case"B":i=0;break;case"KB":i=1;break;case"MB":i=2;break;case"GB":i=3;break;case"TB":i=4;break;default:throw new Error(t+" is not a supported Unit.")}return r=parseInt(Math.floor(Math.log(Math.abs(e))/Math.log(1024)),10)||0,n=Math.min(r,i),F(Math.round(e/Math.pow(1024,n)*10)/10)+" "+I(n)},number:F,escapedBreakable:function(e){return l.a.escape(this.breakable(e))},breakable:function(e){return l.a.isString(e)?e.replace(/([\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF])(?!$)/g,"$1​"):""},nameAndEmail:function(e,t){return e&&t?e+" ("+t+")":e||t||""},userDisplayName:function(e,t){var n=(t||"").trim();return n||(e||"")}},L=Object.freeze({file:"file",directory:"dir",symlink:"symlink"}),N=Object.freeze({rootPath:"/",appdataPath:"/.appdata",commonFilesPath:"/public",userFilesPath:"/users",teamfoldersPath:"/",csrfTimeout:57e4,statusPages:Object.freeze({ssoError:"sso.error",mailSuccess:"mail.success",mailError:"mail.error",confirmError:"confirm.error",confirmErrorMail:"confirm.error.mail",confirmGone:"confirm.gone",confirmInitGone:"confirm.init-gone"}),userFields:Object.freeze(["alias","account","email","email_pending","email_verified","descr","language","statusmail","is_admin","is_owner","protocols","encrypted","home","has_password","idm_preferred","idm_descr","idm_email","has_2fa"]),fsPermission:Object.freeze({noAccess:"no-access",readOnly:"read-only",readWrite:"read-write"}),authContext:Object.freeze({default:"default",deviceBackups:"deviceBackups",sharePrefix:"share-",shareLinkPrefix:"lnk-"}),doubleOptIn:Object.freeze({confirmEmail:"y",noEmail:"n",uniqueEmail:"u"}),deviceBackups:Object.freeze({statusValid:"valid",statusInvalid:"invalid",statusRunning:"running",trashFolder:".trash"}),authRefreshTime:27e5,doubleClickDelay:301,mouseButtons:Object.freeze({left:0,middle:1,right:2}),snapshotNameMaxLength:35,searchLimit:1e3,viewStates:Object.freeze({initialized:"initialized",rendered:"rendered",removed:"removed"}),sessionStorage:Object.freeze({targetDialogPath:"targetDialogPath",userID:"userID"}),zoneType:Object.freeze({singleZone:"singleZone",publicZone:"publicZone",rootZone:"rootZone"})}),V=function(){this._registered=[],this._instances={}};l.a.extend(V.prototype,{register:function(e,t){if(!l.a.isString(e)&&!l.a.isRegExp(e))throw new Error("matcher argument needs to be a string or regex.");if(!l.a.isFunction(t))throw new Error("factory argument needs to be function.");l.a.isRegExp(e)||(e=new RegExp("^"+e+"$")),this._registered.push([e,t])},get:function(e){var t;if(e=e||N.authContext.default,!(t=l.a.find(this._registered,(function(t){return t[0].test(e)}))))throw new Error('no auth class for context "'+e+'" found.');return this._instances[e]||(this._instances[e]=t[1](e)),this._instances[e]}});var $=new V,R=function(){this.cid=l.a.uniqueId(this.cidPrefix),this.initialize.apply(this,arguments)};l.a.extend(R.prototype,a.a.Events,{cidPrefix:"o",initialize:function(){}}),R.extend=a.a.Model.extend;var B=R,q=new(B.extend({initialize:function(){this.config=l.a.clone(window.Config||{})},get:function(e){return this.config[e]},getVersion:function(){return this.get("app").version.replace(/(.*)\..+/,"$1")},getBuild:function(){return this.get("app").version},getAppNamespaceKey:function(e){return this.get("app").name+"."+e}}));function U(e,t){return{result:e,reason:t}}function H(){return U(!0,null)}function W(e){return U(!1,e)}var G={editUser:function(e){if(!e)throw new Error("userModel required for can.editUser");return q.get("hasExternalAccountManagement")?W("external_feature"):$.get().getUser().is_owner||$.get().isAdmin()&&!e.get("is_owner")||e.isCurrentUser()?H():W("permission")},inviteUser:function(e){if(!e)throw new Error("currentUserModel required for can.inviteUser");return"telekombmp"===$.get().getFeatures().skin?W("telekombmp"):q.get("hasExternalAccountManagement")?W("external_feature"):$.get().isAdmin()?e.get("email")?H():W("no_email"):W("permission")},deleteUser:function(e){if(!e)throw new Error("userModel required for can.deleteUser");return q.get("hasExternalAccountManagement")?W("external_feature"):$.get().isAdmin()?"telekombmp"===$.get().getFeatures().skin?W("telekombmp"):e.isCurrentUser()?W("conflict"):H():W("permission")},createAdmin:function(e){if("number"!=typeof e)throw new Error("adminCount Number is required for can.createAdmin");return q.get("hasExternalAccountManagement")?W("external_feature"):$.get().isAdmin()?e>=$.get().getFeatures().admins_max?W("max_count"):H():W("permission")},editAdminFlag:function(){return $.get().isAdmin()?q.get("hasExternalAccountManagement")?W("external_feature"):H():W("permission")},editAlias:function(){return $.get().isAdmin()?q.get("hasExternalAccountManagement")?W("external_feature"):H():W("permission")},editPermissions:function(){return $.get().isAdmin()?$.get().isChrooted()?W("chrooted"):H():W("permission")},showProtocols:function(){return q.get("hasProtocols")?$.get().getFeatures().protocols.length?H():W("no_protocol_feature"):W("no_protocol_configured")},editProtocols:function(){return $.get().isAdmin()?q.get("hasProtocols")?$.get().getFeatures().protocols.length?H():W("no_protocol_feature"):W("no_protocol_configured"):W("permission")},managePassword:function(e){return e.isCurrentUser()?q.get("hasExternalAccountManagement")?W("external_feature"):H():W("not_current_user")},manageSshKeys:function(){return q.get("hasProtocols")?H():W("no_protocols_feature")},twoFA:function(e){return e.isCurrentUser()?e.get("has_2fa")?H():q.get("has2FA")?$.get().getFeatures().rollout.indexOf("no2fa")>=0?W("no_rollout"):H():W("no_2fa_feature"):W("not_current_user")},manageTeamfolder:function(){return $.get().getUser().is_admin?H():W("permission")}},K={urlDecode:function(e){try{return decodeURIComponent(e)}catch(t){try{return unescape(e)}catch(t){return e}}}};var X={ignorable:function(e,t){if("function"!=typeof e)throw new Error("ignorable(): 'func' argument must be function");if("function"!=typeof t)throw new Error("ignorable(): 'ignored' argument must be function");return function(){var n,i=r.a.Deferred();if(t())return i.promise();try{(n=e.apply(this,arguments))&&"function"==typeof n.then||(n=r.a.Deferred().resolve(n))}catch(e){n=r.a.Deferred().reject(e)}return n.then((function(){t()||i.resolve.apply(this,arguments)}),(function(){t()||i.reject.apply(this,arguments)})),i.promise()}},timeoutPromise:function(e){var t=r.a.Deferred();return setTimeout((function(){t.resolve()}),e),t.promise()}},Y=a.a.View.extend({_viewState:N.viewStates.initialized,constructor:function(e){l.a.has(e,"template")&&(this.template=e.template),l.a.has(e,"subviews")&&(this.subviews=e.subviews),l.a.has(e,"templateData")&&(this.templateData=e.templateData),this._subviews={},a.a.View.apply(this,arguments),this._buildSubviews()},empty:function(){this.el.innerHTML=""},renderTemplate:function(e){var t,n;return(e=e||this.template)?(t={lang:O,formatters:z,config:q,constants:N,can:G,auth:$,encoding:K},this.model&&(t.model=this.model),this.collection&&(t.collection=this.collection),n=l.a.extend(t,l.a.result(this,"templateData",{})),l.a.isFunction(e)&&(e=e.call(this,n)),this.el.innerHTML=e,this._viewState=N.viewStates.rendered,this):this},renderSubviews:function(){return l.a.chain(this._subviews).sortBy("order").each((function(e){if(e.target){var t,n=this.$(e.target);n.length&&(t=e.view.render().$el,e.appendToTarget?n.append(t):n.replaceWith(t))}}),this),this},registerSubview:function(e,t,n,i){return this._registerSubviewByName(e.cid,e,t,n,i),this},getSubview:function(e){return l.a.has(this._subviews,e)?this._subviews[e].view:null},render:function(){return this.onBeforeRender(),this.renderTemplate(),this.renderSubviews(),this.onAfterRender(),this},remove:function(){return this._removeSubviews(),this._viewState=N.viewStates.removed,a.a.View.prototype.remove.call(this)},onBeforeRender:function(){},onAfterRender:function(){},_buildSubviews:function(){var e=l.a.result(this,"subviews",{});l.a.isEmpty(e)||l.a.each(e,(function(e,t){var n=new e.klass(e.options||{});l.a.each(e.listeners||{},(function(e,t){this.listenTo(n,t,e)}),this),this._registerSubviewByName(t,n,e.target,e.appendToTarget,e.order)}),this)},_registerSubviewByName:function(e,t,n,i,r){this._subviews[e]={view:t,target:n,appendToTarget:!!i,order:r}},_removeSubviews:function(){l.a.each(this._subviews,(function(e){var t=e.view;this.stopListening(t),t.remove()}),this),this._subviews={}},liveLoad:function(){var e=Array.from(arguments),t=function(){return this._viewState===N.viewStates.removed}.bind(this);if(!e.length)throw new Error("liveLoad(): at least one function argument is required");return e=l.a.map(e,(function(e){return X.ignorable(e,t)})),l.a.reduce(e,(function(e,t){return e.then(t)}),r.a.Deferred().resolve())}}),J=a.a.View.extend({constructor:function(e){var t;if(e=e||{},l.a.defaults(this,l.a.pick(e,"subviews","defaultView","keepInstances")),a.a.View.apply(this,arguments),t=l.a.result(this,"subviews"),!this.subviews||!Object.keys(t).length)throw new Error("No subviews defined in ViewSwitcher");if(this.defaultView&&!t[this.defaultView])throw new Error("Defined default does not exist in subviews");this.viewsConfig=t,this.views={},this.defaultView&&(this.current=this.defaultView,this.currentView=this.createView(this.current),this.last=this.current),this.keepInstances=!!this.keepInstances},createView:function(e){var t,n=this.viewsConfig[e];return l.a.has(this.views,e)||(t=new(l.a.result(this,"subviews")[e].klass)(l.a.result(n,"options")),this.views[e]=t),this.stopListening(this.views[e]),l.a.each(n.listeners||{},(function(t,n){this.listenTo(this.views[e],n,t)}),this),this.views[e]},getCurrentViewName:function(){return this.current},show:function(e,t){return(t||e!==this.current)&&(this.current=e,this._renderCurrentView()),this.currentView},render:function(){if(!this.defaultView)throw new Error("No default view defined in ViewSwitcher");return this._renderCurrentView(),this},clear:function(){return this.current=null,this.last=null,this._clearCurrentView(),this},_renderCurrentView:function(){this.last!==this.current&&(this._clearCurrentView(),this.currentView=this.createView(this.current),this.last=this.current),this.$el.contents().detach(),this.$el.append(this.currentView.render().$el)},_clearCurrentView:function(){this.currentView&&(this.stopListening(this.currentView),this.keepInstances||(this.currentView.remove(),this.views={}),this.currentView=null)},remove:function(){l.a.invoke(this.views,"remove"),this.views=null,this.currentView=null,a.a.View.prototype.remove.apply(this,arguments)}}),Q={Object:B,View:Y,ViewSwitcher:J},Z=new B,ee=n(5),te=n.n(ee),ne=Q.View.extend({id:"header",template:l.a.template(te.a),events:{"click .logout":"_onLogoutClick",mouseover:"_onMouseOver",mouseleave:"_onMouseLeave",click:"showHeader"},initialize:function(){this.listenTo($.get(),"auth",this.render)},templateData:function(){return{isLoggedIn:$.get().hasPassword()&&$.get().isAuthorized()}},showHeader:function(){this.trigger("show")},_onMouseOver:function(){this._showHeaderTimeout=setTimeout(this.showHeader.bind(this),250)},_onMouseLeave:function(){clearTimeout(this._showHeaderTimeout)},_onLogoutClick:function(){this.trigger("logout")}}),ie=n(6),re=n.n(ie);var oe=new function(){var e=[];function t(){var e,t=p();switch(!0){case/^\$/.test(t):e="files";break;case/^shares$/.test(t):e="shares";break;case/^login$/.test(t):e="login";break;case/^password-request$/.test(t):e="password-request";break;case/^settings$/.test(t):e="settings";break;case/^user\/invite$/.test(t):e="user-invite";break;case/^user\/invite\/display\/.*$/.test(t):e="user-invite-display";break;default:e="unknown"}return e}this.track=function(n){if(q.get("hasTracking")){if(!n)throw new Error("track() must have an object to track as parameter");var i=q.get("app");l.a.extend(n,{namespace:i.name,version:i.version,lang:O.getLang(),page:t()}),e.length&&e.forEach((function(e){"track"in e&&e.track(n)}))}},this.addAdapter=function(t){e.push(t)},this.clear=function(){e=[]}},ae={bind:function(e,t){var n,i;function r(){oe.track(n())}if(!(e&&e instanceof a.a.View))throw new Error("first argument needs to be a Backbone view.");if(!l.a.isObject(t))throw new Error("options has to be an object.");n=t.data,l.a.isFunction(n)||(n=l.a.constant(n)),(i=t.event)&&e.on(i,r,ae),e.track=r},unbind:function(e){e.off(null,null,ae),delete e.track}},se=ae,le=new(Q.Object.extend({initialize:function(){this.actions={}},register:function(e,t,n){if(this.isRegistered(e))throw new Error('an action with the name "'+e+'" is already registered.');this.actions[e]={callback:t,config:n,state:{"":!0}}},unregister:function(e){this._ensureActionIsRegistered(e),delete this.actions[e],this.off("state:"+e)},isRegistered:function(e){return Object.prototype.hasOwnProperty.call(this.actions,this._parseName(e).name)},execute:function(e){var t,n=this._parseName(e),i=l.a.rest(arguments);return this._ensureActionIsRegistered(n.name),void 0!==(t=this.actions[n.name]).config&&(i=i.concat([t.config])),this.trigger("execute",n.name),t.callback.apply(t.callback,i)},getState:function(e){var t,n=this._parseName(e);return this._ensureActionIsRegistered(n.name),t=this.actions[n.name].state,n.namespace in t||(t[n.namespace]=t[""]),t[n.namespace]},setState:function(e,t){var n,i=this._parseName(e);this._ensureActionIsRegistered(i.name),"*"===i.namespace?(n=Object.keys(this.actions[i.name].state),l.a.each(n,(function(e){this._setNamespaceState(i.name,e,t)}),this)):this._setNamespaceState(i.name,i.namespace,t)},registerAll:function(e){l.a.each(e,function(e,t){this.register(t,e.callback,e.config)}.bind(this))},_setNamespaceState:function(e,t,n){var i=this.actions[e].state,r=e+(""===t?"":":"+t);n=!!n,t in i&&i[t]===n||(i[t]=n,this.trigger("state:"+r,n))},_ensureActionIsRegistered:function(e){if(!this.isRegistered(e))throw new Error('no action with the name "'+e+'" is registered.')},_parseName:function(e){var t=e.indexOf(":"),n=t>-1;return{name:n?e.substr(0,t):e,namespace:n?e.substr(t+1):""}}})),ce=a.a.View.extend({trackEvent:"executed",events:{click:"_onClick",mousedown:"_trigger"},constructor:function(e){e=l.a.isObject(e)?e:{},this.hasAction=!1,this.hasTracking=!1,l.a.has(e,"state")?(this.state=e.state,this.listenTo(this.state,"state",this.onActionState)):l.a.has(e,"action")&&le.isRegistered(e.action)&&(this.hasAction=!0,this.action=e.action,l.a.has(e,"actionData")&&(this.actionData=e.actionData),this.listenTo(le,"state:"+this.action,this.onActionState)),l.a.has(e,"tracking")&&(se.bind(this,{data:e.tracking,event:this.trackEvent}),this.hasTracking=!0),a.a.View.call(this,e)},remove:function(){return this.hasTracking&&se.unbind(this),a.a.View.prototype.remove.call(this)},execute:function(){var e=l.a.toArray(arguments);this.state&&this.state.getState()?(this.state.getAction().apply(null,e),this.trigger("executed")):this.hasAction&&this.getActionState()&&(l.a.isUndefined(this.actionData)||e.unshift(l.a.result(this,"actionData")),e.unshift(this.action),le.execute.apply(le,e),this.trigger("executed"))},getActionState:function(){return this.state?this.state.getState():this.hasAction?le.getState(this.action):void 0},onActionState:function(e){this.trigger("state",e)},_onClick:function(e){this.execute(),this.trigger("click",e)},_trigger:function(e){this.trigger(e.type,e)}});function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var he=ce.extend({tagName:"button",defaults:{secondary:!1,alternative:!1,linkstyled:!1},_labelTpl:l.a.template('<span class="label"><%- str %></span>'),initialize:function(e){this.config=l.a.extend({},this.defaults,e),this.listenTo(this,"state",this.setState)},setState:function(e){this._toggleClass("sj-button-disabled",!e),this.el.disabled=!e},disable:function(){return this.setState(!1),this},isDisabled:function(){return this.el.classList.contains("sj-button-disabled")},enable:function(){return this.setState(!0),this},render:function(){var e="function"==typeof this.config.text?this.config.text():this.config.text;return this.$el.empty(),this.el.classList.add("sj-button"),this._toggleClass("secondary",this.config.secondary),this._toggleClass("linkstyled",this.config.linkstyled),this._toggleClass("alternative",this.config.alternative),e&&(this.$el.prepend(this._labelTpl({str:e})),this.el.setAttribute("title",e)),"BUTTON"!==this.el.tagName||this.el.getAttribute("type")||this.el.setAttribute("type","button"),this.state||this.hasAction?this.setState(this.getActionState()):this.setState(!this.config.disabled),this.delegateEvents(),this},setAttributes:function(e){var t=this;Object.entries(e).forEach((function(e){var n=ue(e,2),i=n[0],r=n[1];t.el.setAttribute(i,r)}))},_toggleClass:function(e,t){t?this.el.classList.add(e):this.el.classList.remove(e)}}),fe=he.extend({defaults:l.a.extend({iconClass:""},he.prototype.defaults),render:function(){return he.prototype.render.apply(this,arguments),this.$el.addClass("sj-icon-button icon-container").prepend('<span class="'+("icon "+this.config.iconClass).trim()+'">'),this}});var pe=new function(){var e,t,n=navigator.mimeTypes,i=navigator.plugins,o=navigator.userAgent;this.getMimeTypes=function(){return n},this.getPlugins=function(){return i},this.getUserAgent=function(){return o},this.getBootstrap=function(){return window.bootstrap},this.supportDirectoryUpload=function(){var e=document.createElement("input");return!this.getUserAgent().match(/android/i)&&"webkitdirectory"in e},this.supportPdf=function(){var e;if(this.getBootstrap().navigator.isFirefoxDesktop)return r.a.Deferred().resolve().promise();if(e=this.getMimeTypes()["application/pdf"])return r.a.Deferred().resolve().promise();if(e=this.getPlugins()["Adobe Acrobat"])return r.a.Deferred().resolve().promise();try{e=new ActiveXObject("AcroPDF.PDF")}catch(e){}if(e)return r.a.Deferred().resolve().promise();try{e=new ActiveXObject("PDF.PdfCtrl")}catch(e){}return e?r.a.Deferred().resolve().promise():r.a.Deferred().reject().promise()},this.canPlayVideo=function(t){return e||(e=document.createElement("video")),!!e.canPlayType(t)},this.getScrollbarWidth=function(){var e,n;return void 0===t&&((e=document.createElement("div")).setAttribute("style","width: 100px; height: 100px; overflow: scroll; position: absolute; top: -1000px; left: -1000px"),document.body.appendChild(e),(n=document.createElement("div")).setAttribute("style","width: 100%;"),e.appendChild(n),t=e.offsetWidth-n.offsetWidth,e.parentNode.removeChild(e)),t}};var ge=function(e){var t=e[0].webkitRelativePath.split("/")[0];Object.defineProperty(this,"files",{writable:!1,value:e}),Object.defineProperty(this,"isDirectory",{writable:!1,value:!0}),Object.defineProperty(this,"fullPath",{get:function(){return"/"+t}}),Object.defineProperty(this,"name",{get:function(){return t}})},me=a.a.View.extend({tagName:"span",className:"file-input-wrapper",events:{"change input":"_onInputChange","click input":"_onInputClick"},initialize:function(e){this._options=e||{},this.allowMultiple=l.a.result(this._options,"allowMultiple",!0)},render:function(){return this.$el.empty().append(r()("<input type='file'>").attr(this._getInputAttributes())),this.delegateEvents(),this},_onInputClick:function(){this.trigger("click")},_onInputChange:function(){var e=this.$("input"),t=l.a.toArray(e[0].files);e[0].webkitdirectory&&(t=t.length?[new ge(t)]:[]),this.trigger("add",t),this.render()},_getInputAttributes:function(){var e={multiple:this.allowMultiple&&!/^.*Mac.*AppleWebKit\/.*Mobile\/.*$/.test(pe.getUserAgent())};return this._options.directories&&(e.webkitdirectory=!0),e}}),ve=fe.extend({tagName:"label",trackEvent:"click",initialize:function(e){fe.prototype.initialize.call(this,e),this._fileInput=new me(e),this.listenTo(this._fileInput,"click",this._onFileClick),this.listenTo(this._fileInput,"add",this._onFileAdd)},render:function(){return fe.prototype.render.apply(this,arguments),this.$el.append(this._fileInput.render().$el),this},_onFileClick:function(){this.trigger("click")},_onClick:function(e){this.trigger("click",e)},_onFileAdd:function(e){this.execute(e),this.trigger("add",e)}}),ye=a.a.View.extend({selectTpl:l.a.template("<select></select>"),className:"sj-simple-dropdown",events:{"change select":"_onChange","focus select":"_onFocus","blur select":"_onBlur"},_initiallyRendered:!1,initialize:function(e){var t=e||{};if(!l.a.isObject(t))throw new Error("opts has to be an object in SimpleDropdown");this.$select=r()(this.selectTpl(this)),t.items&&this.setItems(t.items,t.initialValue)},_onFocus:function(){this.$el.addClass("sj-simple-dropdown-focused")},_onBlur:function(){this.$el.removeClass("sj-simple-dropdown-focused")},setItems:function(e,t){if(!Array.isArray(e))throw new Error("items has to be an array in SimpleDropdown");if(!e.length)throw new Error("items array is empty in SimpleDropdown");this.items=e,l.a.isUndefined(t)||(this.initialValue=t),!l.a.isUndefined(this.initialValue)&&l.a.findWhere(this.items,{value:this.initialValue})||(this.initialValue=this.items[0].value),this.reRender()},getValue:function(){return this.$select.val()},setValue:function(e,t){return 1!==this.$("option").filter((function(){return r()(this).attr("value")===e})).length||this.getValue()===e||this.isDisabledValue(e)||(this.$select.val(e),this._onChange()),t&&(this.initialValue=this.getValue()),this.getValue()},_setValuesState:function(e,t){var n,i=[].concat(e);return this.items?((n=this.items.filter((function(e){return i.indexOf(e.value)>-1}),this)).forEach((function(e){this.$select.find("[value='"+e.value+"']").prop("disabled",t)}),this),l.a.pluck(n,"value")):[]},_setNextPossibleValue:function(){this.$("option:selected").is(":disabled")&&this.setValue(this.$("option").not(":disabled")[0].value)},disableValues:function(e){var t=this._setValuesState(e,!0);return this._setNextPossibleValue(),t},enableValues:function(e){return this._setValuesState(e,!1)},isDisabledValue:function(e){return this.$("option").filter((function(){return r()(this).attr("value")===e})).is(":disabled")},isDirty:function(){return this.getValue()!==this.initialValue},render:function(){var e,t=this.getValue()||this.initialValue,n="";return this.$select.empty(),this.items&&(this.items.forEach((function(t){var i=l.a.escape(t.value),r=l.a.escape(l.a.result(t,"text")),o=l.a.result(t,"group");o&&(o=l.a.escape(o)),e&&e!==o&&(n+="</optgroup>"),o&&o!==e&&(n+='<optgroup label="'+o+'">',e=o),n+='<option value="'+i+'">'+r+"</option>"})),e&&(n+="</optgroup>"),this.$select.append(n)),this.$el.html(this.$select),this.$el.append(r()('<i class="arrow-icon"></i>')),this.setValue(t),this._initiallyRendered=!0,this},reRender:function(){this._initiallyRendered&&this.render()},setDisabled:function(e){this.$select.prop("disabled",!0===e),this.$el.toggleClass("sj-simple-dropdown-disabled",!0===e)},getDisabled:function(){return this.$select.prop("disabled")},_onChange:function(){this.trigger("change",this.getValue())}}),we=Y.extend({autoRender:!0,tagName:"list-item",initialize:function(e){e=e||{},this.dragdropEnabled=!!e.dragdropEnabled,this.$el.data("mid",this.model.id),this.autoRender&&this.listenTo(this.model,"change",this.render)}}),be=Q.View.extend({className:"error-or-empty-state"}),_e=function(e,t){var n;t.forEach((function(i,r){0!==r?(n=t[r-1],i.previousElementSibling!==n&&e.insertBefore(i,n.nextElementSibling)):e.firstElementChild!==i&&e.insertBefore(i,e.firstElementChild)}))};function xe(e){try{if(3===e.relatedTarget.nodeType&&e.relatedTarget.parentNode===e.target)return!1}catch(e){}return e.target!==e.relatedTarget}function ke(e){return".droppable-"+e.cid}var Ee=function(e,t){var n,i,o,s;function c(e){o&&(s&&"none"!==s&&(e.originalEvent.dataTransfer.dropEffect=s),e.preventDefault(),e.stopPropagation())}function u(){i=[],o=null}function d(n,i){if(l.a.has(t,"eventData")){var r=t.eventData.call(e,o,i);e.trigger(n,o,i,r)}else e.trigger(n,o,i)}if(!(e&&e instanceof a.a.View))throw new Error("first argument needs to be a Backbone view.");if(!l.a.isUndefined(t)&&!l.a.isObject(t))throw new Error("options has to be an object.");n=ke(e),t=l.a.extend({targetSelector:"",canDrop:!0},t),l.a.isFunction(t.canDrop)||(t.canDrop=l.a.constant(t.canDrop)),l.a.has(t,"eventData")&&(l.a.isFunction(t.eventData)||(t.eventData=l.a.constant(t.eventData))),u(),e.$el.on("dragenter"+n,(function(n){if(xe(n)){0===i.length&&e.trigger("drag:enter"),l.a.contains(i,n.target)||i.push(n.target);var a=n.originalEvent.dataTransfer,u=function(e,t,n,i){for(var o=t;o&&1===o.nodeType;){if(r.a.find.matchesSelector(o,n)&&i(o))return o;o=o!==e?o.parentNode:null}return null}(e.el,n.target,t.targetSelector,(function(n){return!!t.canDrop.call(e,n,a)}));o!==u&&(o=u,d("drag:over",a),s=a.dropEffect),c(n)}})),e.$el.on("dragleave"+n,(function(t){xe(t)&&0===(i=l.a.without(i,t.target)).length&&(u(),e.trigger("drag:leave"))})),e.$el.on("dragover"+n,c),e.$el.on("drop"+n,(function(t){o&&(t.stopPropagation(),t.preventDefault(),d("drop",t.originalEvent.dataTransfer)),u(),e.trigger("drag:leave")}))},Se=function(e){e.$el.off(ke(e))},Te=function(){["dragenter","dragover","drop"].forEach((function(e){document.addEventListener(e,(function(e){var t=e.dataTransfer;t&&(t.dropEffect="none"),e.preventDefault()}))}))};function Ce(e){return e<=.5?function(e){return Math.pow(e,2)}(e):function(e){return-(Math.pow(e-1,2)-1)}(e)}var je=function(e){if(!(e instanceof Element))throw new Error("provided node is no Element.");return function e(t){if(!t)return null;var n=t instanceof Element&&k(t).overflowY;return"auto"===n||"scroll"===n?t:e(t.parentNode)||document.body}(e)},De=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)throw new Error("element required to scrollTo");var i=e.scrollTop,r=t-i;if(0!==r)if(0!==n){var o=(new Date).getTime();a()}else e.scrollTop=t;function a(){var s=(new Date).getTime()-o;if(s>=n)e.scrollTop=t;else{var l=Ce(s/n)*r;e.scrollTop=i+~~l,window.requestAnimationFrame(a)}}};function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Me=a.a.View.extend({contentTagName:"grid-content",itemClassName:"sj-grid-item",className:"sj-grid-wrapper",itemViewClass:we,itemViewOpts:{},itemViews:null,events:{click:"delegateEvent","click .sj-grid-content .sj-grid-item .selecticon":"select","click .sj-grid-content .sj-grid-item":"delegateEvent","longpress .sj-grid-content .sj-grid-item":"delegateEvent","touchstart .sj-grid-content .sj-grid-item .selecticon":"selectTouchStart","touchstart .sj-grid-content .sj-grid-item":"touchstart","touchend .sj-grid-content .sj-grid-item .selecticon":"prevent","touchend .sj-grid-content .sj-grid-item":"touchend","touchmove .sj-grid-content .sj-grid-item":"touchmove","MSPointerDown .sj-grid-content .sj-grid-item .selecticon":"selectTouchStart","MSPointerDown .sj-grid-content .sj-grid-item":"touchstart","MSPointerMove .sj-grid-content .sj-grid-item":"touchmoveMsPointerMove","MSPointerUp .sj-grid-content .sj-grid-item .selecticon":"selectMsPointerUp","MSPointerUp .sj-grid-content .sj-grid-item":"touchend","pointerdown .sj-grid-content .sj-grid-item .selecticon":"onPointerEvent","pointerdown .sj-grid-content .sj-grid-item":"onPointerEvent","pointermove .sj-grid-content .sj-grid-item":"onPointerEvent","pointerup .sj-grid-content .sj-grid-item .selecticon":"onPointerEvent","pointerup .sj-grid-content .sj-grid-item":"onPointerEvent",contextmenu:"contextmenu",MSHoldVisual:"prevent","dragstart .sj-grid-content .sj-grid-item":"_onDragStart","dragend .sj-grid-content":"_onDragEnd","animationend .sj-grid-highlight":"onAnimationEnd"},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._createContentEl(),this.itemViews=new a.a.Collection,this.dragdropEnabled=!!t.dragdropEnabled,this.listenTo(this.collection,"add",this._renderOne),this.listenTo(this.collection,"add:end",this._onAddEnd),this.listenTo(this.collection,"remove",this.syncItemViewsRemove),this.listenTo(this.collection,"remove:end",this._onRemoveEnd),this.listenTo(this.collection,"reset",this.onReset),this.listenTo(this.collection,"sort",this.syncItemViewsSort),this._initializeItemViewsComparator(),t.itemViewClass&&(this.itemViewClass=t.itemViewClass),t.itemTpl&&(this.itemViewOpts={template:l.a.template(t.itemTpl)}),this.emptyView=new be({template:l.a.template(t.emptyTpl||""),templateData:t.emptyTplData}),l.a.has(t,"canDrop")){var n=t.canDrop;l.a.isFunction(n)||(n=l.a.constant(n)),Ee(this,{targetSelector:".sj-grid-content, .sj-grid-item",canDrop:function(t,i){var r=e.findModelForElement(t);return n(t,i,r)},eventData:this.findModelForElement.bind(this)})}return this},_createContentEl:function(){var e=document.createElement(this.contentTagName);e.className="sj-grid-content",this.$contentEl=r()(e)},_initializeItemViewsComparator:function(){var e=this.collection.comparator;this.itemViews.comparator="function"==typeof e?function(t,n){return e(t.get("view").model,n.get("view").model)}:null},_sortItemViews:function(){this._initializeItemViewsComparator(),this.itemViews.comparator&&this.itemViews.sort()},syncItemViewsSort:function(){this._sortItemViews(),this._appendAll()},syncItemViewsRemove:function(e){var t=this.itemViews.get(e.cid);t&&(t.get("view").remove(),this.itemViews.remove(t)),this._appendEmpty()},_onAddEnd:function(e){var t=this;(e||[]).forEach((function(e){t._renderOne(t.collection.get(e.id))})),this._appendAll()},_onRemoveEnd:function(e){var t=this,n=[];(e||[]).forEach((function(e){var i=t.itemViews.get(e.cid);i&&(n.push(i),i.get("view").remove())})),this.itemViews.remove(n,{silent:!0}),this.itemViews.trigger("remove:end",n),this._appendEmpty()},onReset:function(){this.emptyView.remove(),this.itemViews.each((function(e){e.get("view").remove()})),this.itemViews.reset(),this.render()},contextmenu:function(e){var t=e.target.className||"",n=/sj-grid-content/.test(t)?"body":"item",i=this.findModelForElement(e.target);oe.track({op:"contextmenu",target:"grid-"+n}),i?this.trigger("contextmenu",e,i):this.trigger("contextmenu",e),this.prevent(e)},scrollIntoView:function(e,t){var n,i=this.collection.get(e);if(i&&(n=this.getItemViewByModel(i)),n){var r=t?0:500,o=je(this.el),a=this.itemViews.first().get("view").el.getBoundingClientRect().top,s=n.el.getBoundingClientRect().top-a;if(De(o,s,r),"BODY"===o.nodeName){var l=o.ownerDocument.documentElement;De(l,s,r)}}},highlight:function(e){var t=this.collection.get(e);t&&(this.scrollIntoView(e,!0),this.getItemViewByModel(t).el.classList.add("sj-grid-highlight"))},onAnimationEnd:function(e){e.target.classList.remove("sj-grid-highlight")},onPointerEvent:function(){},prevent:function(e){e.preventDefault(),e.stopPropagation()},delegateEvent:function(e){(new Date).getTime();var t=this.findModelForElement(e.currentTarget),n=this.itemViews.models.map((function(e){return e.get("view").model}));return this.trigger(e.type,t,n,e),!1},select:function(e){(new Date).getTime(),e.preventDefault(),e.stopPropagation();var t=this.findModelForElement(e.currentTarget);return this.trigger("select",t,e),!1},selectTouchStart:function(){this.touchTime=new Date},selectMsPointerUp:function(e){e.originalEvent;var t=e.originalEvent;t.pointerType===t.MSPOINTER_TYPE_TOUCH&&(this.select(e),e.preventDefault(),e.stopPropagation())},touchstart:function(e){var t=this;(new Date).getTime(),this.touchTimeout,this.touchTime=new Date,this.is_ms(e)||(this.touchTimeout=setTimeout((function(){t.touchTimeout?((new Date).getTime(),t.touchTimeout,e.target.dispatchEvent(new Event("longpress",Pe({bubbles:!0},e))),t.touchTime=null):((new Date).getTime(),t.touchTimeout)}),201),(new Date).getTime(),this.touchTimeout)},touchmove:function(){(new Date).getTime(),this.touchTimeout,this.touchTimeout&&(clearTimeout(this.touchTimeout),this.touchTimeout=null),this.touchTime=null},touchmoveMsPointerMove:function(e){},touchend:function(e){e.cancelable&&e.preventDefault(),(new Date).getTime(),this.touchTimeout,this.touchTimeout&&((new Date).getTime(),this.touchTimeout,clearTimeout(this.touchTimeout),this.touchTimeout=null);var t=this.touchTime?(new Date).getTime()-this.touchTime:0;t&&t<201?this.is_ms(e)&&!this.ms_isTouchPointer(e)||e.target.dispatchEvent(new MouseEvent("click",Pe({bubbles:!0},e))):t>=201&&e.target.dispatchEvent(new Event("longpress",Pe({bubbles:!0},e))),this.touchTime=null},ms_isTouchPointer:function(e){var t=e.originalEvent;return this.is_ms(e)&&[t.MSPOINTER_TYPE_TOUCH,t.MSPOINTER_TYPE_PEN,"touch","pen"].includes(t.pointerType)},is_ms:function(e){return(e.originalEvent||{}).pointerType},_appendEmpty:function(){this.itemViews.length||(this.$contentEl.has(this.emptyView.$el).length||this.$contentEl.empty(),this.$contentEl.append(this.emptyView.render().$el))},_appendAll:function(){if(this._appendEmpty(),this.itemViews.length){this.$contentEl.has(this.emptyView.$el).length&&this.emptyView.remove();var e=this.itemViews.map((function(e){return e.get("view").el})),t=this.$contentEl.get(0);_e(t,e)}},render:function(){return this.$el.append(this.$contentEl),this.itemViews.comparator=null,this.collection.each((function(e){this._renderOne(e)}),this),this._sortItemViews(),this._appendAll(),this.delegateEvents(),this},_renderOne:function(e){if(this.itemViews.length||this.$contentEl.empty(),!this.itemViews.get(e.cid)){var t=Pe(Pe({},this.itemViewOpts),{},{collection:this.collection,model:e,dragdropEnabled:this.dragdropEnabled}),n=new this.itemViewClass(t).render();n.$el.addClass(this.itemClassName),this.itemViews.add({id:e.cid,view:n})}},getItemViewByModel:function(e){var t=this.itemViews.get(e.cid);return t?t.get("view"):null},findModelForElement:function(e){var t=e;if(e instanceof r.a&&(t=e.get(0)),!t)return null;var n=this.itemViews.pluck("view").find((function(e){var n=e.el;return n.parentNode&&(n===t||n.contains(t))}));return n?n.model:null},remove:function(){this.emptyView.remove(),Se(this),this.itemViews.pluck("view").forEach((function(e){return e.remove()})),this.itemViews.reset([],{silent:!0}),a.a.View.prototype.remove.apply(this)},_onDragStart:function(e){e.target.getAttribute("draggable")&&this.trigger("drag:start",e,this.findModelForElement(e.target))},_onDragEnd:function(e){this.trigger("drag:end",e)}}),Ie=Y.extend({className:"sj-grid-item",events:{"click .sortable":"onSortClick"},templateData:function(){return{sortable:this.sortable}},initialize:function(e){this.sortable=!!(this.collection&&this.collection.sortable&&this.collection.sortable.sortBy),this.sortable&&this.listenTo(this.collection,"sortBy",this.onSort),e&&e.template&&(this.template=l.a.template(e.template))},onSortClick:function(e){if(this.sortable){var t=e.currentTarget,n=t.getAttribute("data-field"),i=t.classList.contains("asc")?"desc":"asc";this.collection.sortable.sortBy(n,i)}},onSort:function(e,t){var n=this.el.querySelectorAll(".sortable");[].forEach.call(n,(function(n){["sorted","asc","desc"].forEach((function(e){n.classList.remove(e)})),n.getAttribute("data-field")===e&&["sorted",t].forEach((function(e){n.classList.add(e)}))}))},onAfterRender:function(){this.sortable&&this.onSort(this.collection.sortable.getKey(),this.collection.sortable.getDir()),this.delegateEvents()}}),Fe=Me.extend({tagName:"list-layout",contentTagName:"list-content",initialize:function(e){this.$headerEl=r()("<list-header />"),this.headerView=new Ie({tagName:"list-item",collection:this.collection,template:e.headerTpl||null}),Me.prototype.initialize.apply(this,arguments)},_appendEmpty:function(){Me.prototype._appendEmpty.call(this),this.collection.length||this.$headerEl.remove()},_appendAll:function(){Me.prototype._appendAll.call(this),this.collection.length&&(this.$el.prepend(this.$headerEl),this.$headerEl.append(this.headerView.render().$el))},remove:function(){this.headerView.remove(),Me.prototype.remove.call(this)}}),ze=/\/D_HDTLRN_[^/]{20}\.c(?:\/|$)/,Le=/\/\.DAV(\/|$)/,Ne=/^root([/]|$)/,Ve=/^(.*)\/[^/]+\/?$/,$e=/\/([^/]+)\/?$/,Re=/\/{2,}/g,Be=/([^/])\/$/,qe=[N.userFilesPath,N.appdataPath];var Ue={findCommonPath:function(e){var t,n,i=[];if(!Array.isArray(e)||!e.length)throw new Error("findCommonPath: array of paths required");var r=e.sort();return(t=r[0])===(n=r[r.length-1])?t:(t=t.split("/"),n=n.split("/"),t.every((function(e,t){return e===n[t]&&(i.push(e),!0)})),0===i.length||1===i.length&&0===i[0].length?N.rootPath:i.join("/"))},getLastComponent:function(e){var t=e.match($e);return t?t[1]:null},getParentPath:function(e){var t=e.match(Ve);return t?0===t[1].length?N.rootPath:t[1]:null},isEncrypted:function(e){return ze.test(e)},isWebDAVRelated:function(e){return Le.test(e)},isTeamfolder:function(e){return!qe.find((function(t){return e===t||0===e.indexOf(t+"/")}))},startsWith:function(e,t){return t===N.rootPath||(e===t||0===e.indexOf(t+"/"))},joinPath:function(){var e=Array.from(arguments),t=e.flat(),n=t.findIndex((function(e){return"string"!=typeof e}))>-1;if(n)throw new Error("joinPath: non-string path component");return t.join("/").replace(Re,"/").replace(Be,"$1")},unifyPath:function(e){return"string"!=typeof e?e:e.replace(Ne,"/")}},He={};l.a.each({thumb:["bmp","cr2","dng","gif","heic","heif","jpeg","jpg","mrw","nef","png","raf","tif","tiff"],image:["ai","cdr","eps","ps","psd","raw","svg"],audio:["aac","aif","ape","flac","m4a","mid","mp3","ram","ra","wav","wma"],video:["avi","flv","mkv","m4v","mov","mp4","mpg","mpeg","ogg","ogv","qt","rm","rmvb","rv","swf","webm","wmv"],archive:["dmg","img","iso","mdf"],compressed:["bz2","bzip","chm","gz","rar","rpm","tar","tgz","zip"],document:["doc","docm","docx","dot","dotm","dotx","odt","pgs","rtf","sxw"],text:["txt","md"],pdf:["pdf"],slide:["key","odp","pot","potm","potx","ppam","pps","ppsm","ppsx","ppt","pptm","pptx","sldm","sldx","thmx"],spreadsheet:["csv","num","ods","sxc","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx"],code:["css","htm","html","js","php","pl","pm","rb","sh","vb","xml"],system:["app","bat","com","dll","exe"]},(function(e,t){l.a.each(e,(function(e){He[e]=t}))}));var We=function(e){return e=String(e),He[e.toLowerCase()]||"default"};function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=/\.git$/,Je=function(e){var t=e.path,n=e.name,i=e.type,r=n?K.urlDecode(n):"",o=i===L.directory?r:r.replace(/(.+)\.[^.]+$/,"$1"),a="file",s="";if(i===L.directory)Ye.test(t)?(a="dir-git",s="git"):a="dir";else if(i===L.symlink)a="symlink";else{var l=n.lastIndexOf(".");l>0&&l<n.length-1?(s=n.substr(l+1),a=We(s)):a="default"}return{display_name:r,base_name:o,group:a,ext:s}},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.file,n=Ue.unifyPath(e),i=Ue.getParentPath(n),r=null;i&&i!==N.rootPath&&(r=K.urlDecode(Ue.getLastComponent(i)));var o=Ue.getLastComponent(n)||"",a=!!e&&Ue.isEncrypted(K.urlDecode(e)),s=Je({path:n,name:o,type:t});return a&&t===L.directory&&(s.group="dir-encrypted"),Ke({path:n,parentPath:i,parentName:r,name:o,encrypted:a,type:t},s)},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=L.file,n=Je({path:e,name:e,type:t});return Ke({path:e,name:e,type:t},n)},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.file,n=Je({path:e,name:e,type:t});return Ke({path:e,name:e,label:e,type:t},n)},tt={TILES:"tiles",FLUID:"fluid",LIST:"list"},nt={a:tt.TILES,b:tt.LIST,c:tt.FLUID},it=l.a.invert(nt);function rt(e){return Object.keys(it).indexOf(e)>-1?e:tt.LIST}var ot=function(e,t){return nt[e]||rt(t)},at=n(3),st=n.n(at),lt={create:"POST",update:"PUT",delete:"DELETE",read:"GET"},ct=function(e,t,n){var i,r;if(!lt[e])throw new Error("Undefined method '"+e+"'.");if(i={type:lt[e],dataType:"json"},!n.url&&(i.url=l.a.result(this,"url"),!i.url))throw new Error("No 'url' attribute or function defined");return t&&l.a.contains(["create","update","patch"],e)&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),r=n.xhr=$.get(t.getContext()).ajax(l.a.extend(i,n)),t.trigger("request",t,r,n||{}),r},ut=a.a.Model.extend({initialize:function(e,t){this._context=(t||{}).context||N.authContext.default},getContext:function(){return this._context},clone:function(){return new this.constructor(this.attributes,{context:this.getContext()})},sync:function(){return ct.apply(this,arguments)},urlDecode:function(e){var t=this.get(e);return l.a.isString(t)&&(t=K.urlDecode(t)),t}}),dt={getMeta:function(e){var t;if(!l.a.isObject(e))throw new Error("getMeta: options object required");if(!e.context)throw new Error("getMeta: context required");if(!e.path&&!e.pid)throw new Error("getMeta: either pid or path are required");if(e.fields&&!Array.isArray(e.fields))throw new Error("getMeta: fields option must be an array");return t=l.a.pick(e,"path","pid","snapshot"),e.fields&&e.fields.length&&(t.fields=e.fields.join(",")),$.get(e.context).ajax({url:"/api/meta",data:t})}};function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gt=tt.LIST,mt=ut.extend({defaults:{name:"",type:"",path:"",parentPath:null,remaining:1/0,viewmode:gt},getPid:function(){return this.get("pid")},getItemType:function(){return"ShareItem"},parse:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e="share_type"in t?"sharelink"===t.share_type?L.file:L.directory:{dir:L.directory,file:L.file}[t.type]||t.type;var n=ft(ft(ft({},t),Qe(t.path,e)),st.a.parse(t.image));return n.maxcount?n.remaining=n.maxcount-(n.count||0):n.remaining=1/0,n.viewmode&&(n.viewmode=ot(n.viewmode,gt)),n},removeShare:function(){var e="sharedir"===this.get("share_type")?"/api/share":"/api/sharelink",t=new r.a.Deferred;return $.get().ajax({type:"DELETE",url:e,data:{id:this.get("id")}}).done((function(e){t.resolve(e)})).fail((function(e,n,i){404===e.status?t.resolve(""):t.reject(e,n,i)})),t},updateShare:function(e){var t,n=l.a.extend({},{id:this.get("id")},e);return t="sharelink"===this.get("share_type")?"/api/sharelink":"/api/share",$.get().ajax({type:"PUT",url:t,data:n}).done(function(e){l.a.extend(e,{type:this.get("type")}),e=this.parse(e),this.set(e);var t=l.a.pick(this.omit(Object.keys(e)),"has_password","ttl","maxcount","remaining");this.set(t,{unset:!0})}.bind(this))},getPreviewUri:function(){var e=d(),t=e.protocol+"//"+e.host+e.pathname.replace(/\/$/,"");return t+="sharedir"===this.get("share_type")?"/share/":"/lnk/",t+=this.id},loadFolderWritableAttribute:function(){if(this.get("type")!==L.directory)return r.a.Deferred().resolve().promise();var e={context:this.getContext(),pid:this.getPid(),fields:["writable"]};return dt.getMeta(e).then(function(e){this.set("folderWritable",e.writable)}.bind(this))},invite:function(e,t,n){var i,o;if(Array.isArray(e)||(e=[e]),!(e=l.a.filter(e,(function(e){return"string"==typeof e}))).length)throw new Error("no emails given for invite");if(t&&!l.a.isString(t))throw new Error("msg should be a string");return o={id:this.get("id"),recipient:e,msg:t},n&&l.a.isString(n.lang)&&(o.lang=n.lang),i="sharelink"===this.get("share_type")?"/api/sharelink/invite":"/api/share/invite",$.get().ajax({type:"POST",url:i,traditional:!0,data:o}).then(function(e,t,n){return e&&e.failed&&e.failed.length?r.a.Deferred().reject(n,"error","error"):(this.trigger("invite:success"),r.a.Deferred().resolve(e,t,n))}.bind(this)).then(null,function(e){var t=e.responseJSON||{done:[],failed:[]},n={done:l.a.pluck(t.done,"to"),failed:l.a.pluck(t.failed,"to")};return this.trigger("invite:error",n),n}.bind(this))}});function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bt=mt.extend({parse:function(e){var t="sharelink"===e.type?L.file:L.directory;return yt(yt({},e),{},{share_type:e.type,type:t},et(String(e.label),t))},setName:function(e){this.set(this.parse(l.a.extend({},this.attributes,{label:e})))}}),_t={addExternalShare:function(e,t,n){var i=r.a.Deferred();if(!l.a.isString(e))throw new Error("addExternalShare requires share-id");if(!l.a.isString(t))throw new Error("addExternalShare requires share-type");if("sharedir"!==t&&"sharelink"!==t)throw new Error("sharelink or sharedir required for share-type");return $.get().ajax({url:"/api/share/external",method:"POST",data:l.a.extend({},n,{id:e,type:t})}).done((function(e){var t=new bt(e,{parse:!0});Z.trigger("api:addExternalShare:added",t),i.resolve()})).fail((function(e){409===e.status?i.resolve():i.reject(e)})),i.promise()}},xt={addSshKey:function(e,t){var n=new window.FormData;if(!e)throw new Error("accountId missing in api.addSshKey");if(!(t&&t instanceof File))throw new Error("file missing in api.addSshKey");return n.append("account",e),n.append("keydata",t),$.get().ajax({url:"/api/user/key",type:"POST",data:n,contentType:!1,processData:!1})}},kt={confirmInvitation:function(e){if(!l.a.isObject(e))throw new Error("attributes object required for confirmInvitation");return l.a.each(["invite_token","alias","password"],(function(t){if(!l.a.isString(e[t]))throw new Error("string-like "+t+" missing for confirmInvitation");if(""===e[t].trim())throw new Error(t+" is empty for confirmInvitation")})),r.a.ajax({url:"/api/user/invite/confirm",method:"POST",data:l.a.pick(e,"invite_token","alias","password")})}},Et=a.a.Collection.extend({initialize:function(e,t){this._context=(t||{}).context||N.authContext.default},getContext:function(){return this._context},_prepareModel:function(e,t){return t=l.a.extend({},t,{context:this.getContext()}),a.a.Collection.prototype._prepareModel.call(this,e,t)},sync:function(e,t,n){return ct.call(this,e,t,n)}}),St=function(e,t){l.a.extend(this,{_running:!1,arr:e||[],callback:t||this.process,process:t?this.process.bind(this):this.process}),this.process()};l.a.extend(St.prototype,{add:function(){1===arguments.length&&Array.isArray(arguments[0])?this.length=this.arr.push.apply(this.arr,arguments[0]):arguments.length&&(this.length=this.arr.push.apply(this.arr,arguments)),this._running||this.process()},clear:function(){for(;this.arr.length;)this.arr.shift();this.length=0,delete this._running},process:function(){this.length=this.arr.length,this._running=this.arr.shift(),this.length&&(this.length=this.arr.length,this.callback(this._running,this.process))}});var Tt=St,Ct=new(Q.Object.extend({initialize:function(){this.queues={}},_checkType:function(e){return l.a.isString(e)},_checkArray:function(e){return Array.isArray(e)},_testForInvalidModels:function(e){return!!l.a.find(e,(function(e){return!(e instanceof a.a.Model)}))},_getQueue:function(e){return this.queues[e]||(this.queues[e]=new a.a.Collection),this.queues[e]},_remove:function(e,t,n){return(t=l.a.compact(this._getQueue(e).remove(t,{silent:!0}))).length&&this.trigger(n,e,t),t},add:function(e,t){var n;if(!this._checkType(e))throw new Error("invalid type in DeleteList.add()");if(!this._checkArray(t))throw new Error("no models array given in DeleteList.add()");if(this._testForInvalidModels(t))throw new Error("not only models in array given in DeleteList.add()");return n=t.map((function(e){return e.clone()})),n=this._getQueue(e).add(n,{silent:!0}),this.trigger("added",e,n),n},recover:function(e,t){if(!this._checkType(e))throw new Error("invalid type in DeleteList.recover()");if(!this._checkArray(t))throw new Error("no models array given in DeleteList.recover()");return this._remove(e,t,"recovered")},drop:function(e,t){if(!this._checkType(e))throw new Error("invalid type in DeleteList.drop()");if(!this._checkArray(t))throw new Error("no models array given in DeleteList.drop()");return this._remove(e,t,"dropped")},findByType:function(e,t){if(!this._checkType(e))throw new Error("invalid type in DeleteList.findByType()");if(l.a.isUndefined(t))throw new Error("missing model in DeleteList.findByType()");return this._getQueue(e).get(t)},filterByType:function(e,t){if(!this._checkType(e))throw new Error("invalid type in DeleteList.filterByType()");return"function"==typeof t?this._getQueue(e).models.filter(t):l.a.where(this._getQueue(e).models,t)}})),jt=function(e,t){if(!l.a.isUndefined(e.sortable))throw new Error("cannot extend collection, sortable exist");var n=null,i="asc";t&&t.key&&(n=t.key),t&&t.direction&&(i=t.direction);var r=function(t,n){if(e.comparators&&0!==e.comparators.length){var i=e.comparators[t];if(!i)throw new Error("comparator '"+t+"'not defined");e.comparator="desc"===n?function(e,t){return i.call(this,t,e)}:i,e.sortable.key=t,e.sortable.direction=n}};l.a.extend(e,{sortable:{key:n,direction:i,getKey:function(){return e.sortable.key},getDir:function(){return e.sortable.direction},sortBy:function(t,n){if(!e.comparators)throw new Error("no comparators defined in collection");n=n||e.sortable.direction,t=t||e.sortable.key,r(t,n),e.sort(),e.trigger("sortBy",t,n)}}}),r(n,i),e.on("change",(function(){e.sort()}))},Dt={isDir:function(e){return e.get("type")===L.directory},compareType:function(e,t){return this.isDir(t)-this.isDir(e)},compare:function(e,t,n){var i=this.compareType(e,t);return i||((i=n?n(e,t):i)?i:(i=this.compareString(e.get("display_name"),t.get("display_name")))||this.compareString(e.id,t.id))},compareString:function(e,t){var n=function(e){return null==e?"":String(e)},i=n(e).toLowerCase(),r=n(t).toLowerCase();return i===r?0:i>r?1:-1},compareDisplayNames:function(e,t){return this.compareString(e.get("display_name"),t.get("display_name"))},compareImageModel:function(e,t){return t.has("image")-e.has("image")},compareViewByImageModel:function(e,t){var n=function(e){return e.get("view").model.has("image")};return n(t)-n(e)},compareZones:function(e,t){return e.id===N.teamfoldersPath?-1:t.id===N.teamfoldersPath?1:e.id===N.commonFilesPath?-1:t.id===N.commonFilesPath?1:this.compareDisplayNames(e,t)}},Ot=function(e,t){var n=l.a.extend({},t).filter,i=l.a.isFunction(n);if(e._selectionMixin)throw new Error("selection already bound - don't re-bind()");e._selectionMixin={toggleSelected:function(e,t,r){if(!i||n(e)){var o=!!e.selected;e.selected=l.a.isBoolean(t)?t:!o,r||e.selected===o||e.trigger("change:selected",e)}},simpleClick:function(t){this.toggleSelected(t,!0),e._selectionMixin.prev=t,e.each((function(n){n!==t&&e._selectionMixin.toggleSelected(n,!1)}),this)},deselectAll:function(){e.each((function(t){e._selectionMixin.toggleSelected(t,!1,!0)})),e._selectionMixin.prev=void 0,e.trigger("deselectAll")},changeListener:function(){i&&e.each((function(t){t.selected&&!n(t)&&(delete t.selected,e.trigger("change:selected",t))}))},selectListener:function(t,n){if(n)if(l.a.isUndefined(e._selectionMixin.prev))e._selectionMixin.simpleClick(t);else{var i=e.indexOf(e._selectionMixin.prev),r=e.indexOf(t),o=Math.min(i,r),a=Math.max(i,r);e.each((function(t,n){t.selected||e._selectionMixin.toggleSelected(t,n>=o&&n<=a)}))}else t.selected?e._selectionMixin.prev=void 0:e._selectionMixin.prev=t,e._selectionMixin.toggleSelected(t)},deselectAllListener:function(){e._selectionMixin.prev=void 0},removeListener:function(t){e._selectionMixin.toggleSelected(t,!1),delete t.selected},removeEndListener:function(e){e.forEach((function(e){delete e.selected}))}},e.on("deselectAll",e._selectionMixin.deselectAllListener),e.on("remove",e._selectionMixin.removeListener),e.on("remove:end",e._selectionMixin.removeEndListener),e.on("select",e._selectionMixin.selectListener),e.on("reset sync",e._selectionMixin.deselectAll),e.on("change",e._selectionMixin.changeListener),l.a.extend(e,{deselectAll:e._selectionMixin.deselectAll,selectAll:function(){e.each((function(t){e._selectionMixin.toggleSelected(t,!0,!0)})),e.trigger("selectAll")},getSelected:function(){return e.models.filter((function(e){return e.selected}))},firstSelected:function(){return l.a.find(e.models,(function(e){return e.selected}))},select:function(t){e._selectionMixin.toggleSelected(t,!0)}})};function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Mt={valid:1,expired:2,invalid:3},It=new(Et.extend({defaults:{sortKey:"display_name",sortDir:"asc"},deleteQueue:new Tt([],(function(e,t){new mt(e).removeShare().always(t)})),_itemFilter:null,model:mt,comparators:{display_name:function(e,t){return Dt.compare(e,t)},status:function(e,t){var n=Mt[e.get("status")],i=Mt[t.get("status")];return n===i?Dt.compareDisplayNames(e,t):n>i?1:-1},size:function(e,t){return Dt.compare(e,t,(function(e,t){return(e.has("size")?parseInt(e.get("size"),10):0)-(t.has("size")?parseInt(t.get("size"),10):0)}))},date:function(e,t){return Dt.compare(e,t,(function(e,t){return(e.has("created")?e.get("created")-new Date(1e3*e.get("created")).getSeconds():0)-(t.has("created")?t.get("created")-new Date(1e3*t.get("created")).getSeconds():0)}))},count:function(e,t){var n=e.get("count"),i=t.get("count");return n===i?Dt.compareDisplayNames(e,t):n>i?1:-1}},initialize:function(e,t){this.options=l.a.extend({},this.defaults,t),this.comparator=this.comparators.status,this.itemType=mt.prototype.getItemType(),this.listenTo(this,"sync",this._onSync),this.listenTo(Ct,"added",this._onDeleteListAdded),this.listenTo(Ct,"recovered",this._onDeleteListRecovered),Ot(this),jt(this,{key:this.options.sortKey,direction:this.options.sortDir})},parse:function(e){var t=this,n=Array.isArray(e)?e:new Array(e);if(n=n.filter((function(e){return!Ct.findByType(t.itemType,e)})),this._itemFilter){var i=Pt(l.a.partition(n,this._itemFilter),2),r=i[0],o=i[1];n=r,this.deleteQueue.add(o)}return n},_onSync:function(){this.trigger("load")},_onDeleteListAdded:function(e,t){e===this.itemType&&(t=l.a.compact(this.remove(t,{silent:!0})),this.trigger("remove:end",t))},_onDeleteListRecovered:function(e,t){e===this.itemType&&(this.add(t,{silent:!0}),this.trigger("add:end",t))},fetch:function(e){return(e=e||{}).reset=!0,Et.prototype.fetch.call(this,e)},sync:function(e,t,n){return r.a.when(vi.getShare(),vi.getShareLink()).then((function(e,t){return e[0].concat(t[0])})).then(n.success,n.error)},removeShares:function(e){var t,n,i=[];0!==e.length&&(n=[].concat(e),e=[].concat(e),this.trigger("removeShares:start",e),this.deselectAll(),Ct.add(this.itemType,e),(t=function(){var r,o=e;if(0===n.length)return i.length?(o=l.a.difference(e,i),Ct.recover(this.itemType,i),this.trigger("removeShares:error",i,o)):this.trigger("removeShares:success",e),void(o.length&&Ct.drop(this.itemType,o));(r=n.shift()).removeShare().fail((function(){i.push(r)})).always((function(){t()}))}.bind(this))())},createShare:function(e,t){var n=e.get("type"),i=e.get("pid"),r="/api/"+(n===L.file?"sharelink":"share"),o={pid:i};return n===L.file?o=l.a.extend(o,{type:"file"},l.a.pick(t,"password","ttl","maxcount")):l.a.extend(o,l.a.pick(t,"password","ttl","writable","viewmode")),$.get().ajax({type:"POST",url:r,data:o}).done(function(e){var t=this.add(e,{parse:!0});Array.isArray(t)&&(t=t[0]),this.trigger("createShare:success",t)}.bind(this)).fail(function(){this.trigger("createShare:error")}.bind(this))},setItemFilter:function(e){return this._itemFilter=e,this}}))([]),Ft=function(){return It},zt=function(e){var t=Ft();return t.add(e,{parse:!0,merge:!0}),!!t.get(e)};function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){Vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $t=ut.extend({defaults:{name:"",type:"",path:"",encrypted:!1,parentPath:null,parentName:null,teamfolder:!1},isDownloadable:function(){return!!this.get("readable")&&this.get("type")!==L.symlink},getPid:function(){return this.id},getItemType:function(){return"FileItem-"+this.getContext()},parse:function(e,t){var n={dir:L.directory,symlink:L.symlink,file:L.file}[e.type]||e.type,i=e.image?Nt(Nt({},e.image),st.a.parse(e.image)):void 0,r=Nt(Nt(Nt({},e),{},{type:n},Qe(e.path,n)),{},{image:i});return r.isTempUploadFile="webupload"===r.ext,r.writable=!!r.writable&&!r.encrypted,r.renamable=!r.encrypted&&!!r.writable&&!r.isTempUploadFile,r.teamfolder=!!r.teamfolder,r.isTempUploadFile&&l.a.result(t,"stripTempfileMtime")&&delete r.mtime,r.type===L.directory&&delete r.mime_type,r.share=this._getShare(e),r},_getShare:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.rshare)return null;var t=e.rshare.find((function(e){return["sharedir","sharelink"].indexOf(e.share_type)>-1}));return t&&zt(Nt({pid:e.id,type:e.type,path:e.path},t))?t.id:null},setName:function(e){var t=this.get("path");t=t.split("/").slice(0,-1).join("/"),t+="/"+encodeURIComponent(e),this.set(this.parse(l.a.extend({},this.attributes,{path:t})))},getMeta:function(e){var t={context:this.getContext(),fields:e};if(this.getPid()?t.pid=this.getPid():t.path=this.urlDecode("path"),!t.pid&&!t.path)throw new Error("FileModel.getMeta: model must provide either pid or path.");return dt.getMeta(t)}}),Rt={copyFiles:function(e,t){var n=t.map((function(e){return e.id})),i=r.a.Deferred(),o=e.getContext();if(t.some((function(e){return e.getContext()!==o})))throw new Error("context of source and target must be the same in copyFiles");return $.get(o).ajax({method:"POST",url:"/api/fs/copy",traditional:!0,data:{src_id:n,dst_id:e.get("id"),on_exist:"autoname"}}).done((function(n,r,a){var s=n.done.map((function(e){return new $t(e,{parse:!0,context:o})})),l=n.failed.map((function(e){return t.find((function(t){return t.id===e.src_id}))}));Z.trigger("api:copyFiles:done",e.get("path"),s),l.length>0?(Z.trigger("api:copyFiles:error",l,s),i.reject(l,s,a)):(Z.trigger("api:copyFiles:success",e,s),i.resolve(s))})).fail((function(e){var n=t;Z.trigger("api:copyFiles:error",n,[]),i.reject(n,[],e)})),i.promise()}},Bt=ut.extend({url:"/api/snapshot",parse:function(e){return e.zone&&(e.zone=Ue.unifyPath(e.zone)),l.a.defaults(e,{id:e.name+"@"+e.zone})},getRestoreDestination:function(e){return $.get().getUser().home.replace(/^\/+$/g,"")+"/"+e.replace(/^\/+|\/+$/g,"")},_createRestoreFolder:function(e){return $.get().ajax({method:"POST",url:"/api/dir",data:{path:e,on_exist:"autoname"}}).then((function(e){return K.urlDecode(e.path)}))},_copySnapshot:function(e){return $.get().ajax({timeout:9e4,method:"POST",url:"/api/fs/copy",data:{src:this.get("zone"),snapshot:this.get("name"),dst:e}}).then(null,(function(e,t){return"timeout"===t?r.a.Deferred().resolve({done:[],failed:[]}):r.a.Deferred().rejectWith(this,arguments)}))},restore:function(e){var t=this.getRestoreDestination(e);return this._createRestoreFolder(t).then(function(e){return this._copySnapshot(e)}.bind(this)).fail(function(){this.trigger("restore:error")}.bind(this))},setName:function(e){var t=this.get("name");return this.set("name",e,{parse:!0}),$.get().ajax({type:"PUT",url:this.url,data:{zone:this.get("zone"),name:t,dst:e}}).done(function(e){this.set(e,{parse:!0})}.bind(this)).fail(function(){this.set("name",t,{parse:!0}),this.trigger("change:error")}.bind(this))}}),qt={createSnapshot:function(e,t){var n={};if("string"!=typeof e)throw new Error("zone required for Api.createSnapshot");if("string"!=typeof t)throw new Error("name required for Api.createSnapshot");return n.zone=e,n.name=t,$.get().isAdmin()&&(n.scope="all"),$.get().ajax({method:"POST",url:"/api/snapshot",data:n}).done((function(e){var t=new Bt(e,{parse:!0});Z.trigger("api:createSnapshot:success",t)}))}},Ut={createTeamfolder:function(e){var t,n=r.a.Deferred();if(!l.a.isString(e))throw new Error("path is required for Api.createTeamfolder");return t={path:e,shareable:!0},$.get().ajax({method:"POST",url:"/api/teamfolder",data:t}).done((function(e){var t=new $t(e,{parse:!0,context:N.authContext.default});Z.trigger("api:createTeamfolder:success",t),n.resolve(t)})).fail((function(e){n.reject(e)})),n.promise()}},Ht={createGitRepository:function(e,t){var n={};if(!e)throw new Error("parentFolder required in api.createGitRepository");if(!l.a.isString(t)||""===t)throw new Error("name for new repository required in api.createGitRepository");return n.pid=e.get("id"),n.path=t,$.get().ajax({url:"/api/git/init",type:"POST",data:n}).done((function(t){var n=new $t(t,{parse:!0,context:e.getContext()});Z.trigger("api:newFolder:created",e.get("path"),n)}))}},Wt={deleteApp:function(e,t){var n;if(!e)throw new Error("AccountId required for deleteApp()");if(!t)throw new Error("AppId required for deleteApp()");return n={account:e,id:t},$.get().isAdmin()&&(n.scope="all"),$.get().ajax({type:"DELETE",url:"/api/app",data:n})}},Gt={deleteExternalShare:function(e){var t=r.a.Deferred();if(!(e instanceof bt))throw new Error("deleteExternalShare requires an ExternalShareModel");return Z.trigger("api:deleteExternalShare:start",e),$.get().ajax({method:"DELETE",url:"/api/share/external",data:{id:e.get("id"),type:e.get("share_type")}}).done((function(){Z.trigger("api:deleteExternalShare:success",e),t.resolve(e)})).fail((function(n){404===n.status?(Z.trigger("api:deleteExternalShare:success",e),t.resolve(e)):(Z.trigger("api:deleteExternalShare:error",e),t.reject(e,n))})),t.promise()}},Kt={deleteFiles:function(e){var t=r.a.Deferred();if(!Array.isArray(e))throw new Error("deleteFiles accepts only an array");if(0===e.length)return t.resolve([],[]),t.promise();var n=e[0].getContext(),i=e[0].getItemType();if(e.some((function(e){return e.getContext()!==n})))throw new Error("context of all files must be the same in deleteFiles");if(e.some((function(e){return e.getItemType()!==i})))throw new Error("itemType of all files must be the same in deleteFiles");var o=Ct.add(i,e);return $.get(n).ajax({url:"/api/fs/delete",method:"POST",data:{pid:e.map((function(e){return e.id})),recursive:!0},traditional:!0}).then(null,(function(e){return r.a.Deferred().resolve(e.responseJSON||{},e.statusText,e)})).then((function(n,r,a){var s=[],l=[];if("timeout"===r)return t.reject([],[],a),void Ct.drop(i,e);n.done&&n.failed?(n.failed.forEach((function(e){"404"===e.code?s.push(o.find((function(t){return t.id===e.id}))):l.push(o.find((function(t){return t.id===e.id})))})),n.done.forEach((function(e){s.push(o.find((function(t){return t.id===e.id})))}))):l=o,s.length&&Ct.drop(i,s),l.length&&Ct.recover(i,l),l.length&&Z.trigger("api:deleteFiles:error",l,s),s.length?t.resolve(l,s,a):t.reject(l,[],a)})),t.promise()}},Xt={deleteInvitation:function(e){if("string"!=typeof e||0===e.trim().length)throw new Error("inviteId must be non-empty string");return $.get().ajax({type:"DELETE",url:"/api/user/invite",data:{invite_id:e}})}},Yt={deleteSnapshot:function(e){var t,n=r.a.Deferred();if(l.a.isUndefined(e))throw new Error("argument required for api.deleteSnapshot");if(!(e instanceof Bt))throw new Error("snapshot model required for api.deleteSnapshot");return Ct.add("SnapshotItem",[e]),t={zone:e.get("zone"),name:e.get("name")},$.get().isAdmin()&&(t.scope="all"),$.get().ajax({type:"DELETE",url:"/api/snapshot",data:t}).done((function(){Ct.drop("SnapshotItem",[e]),n.resolve()})).fail((function(t){404===t.status?(Ct.drop("SnapshotItem",[e]),n.resolve()):(Ct.recover("SnapshotItem",[e]),n.reject())})),n.promise()}},Jt={deleteSshKey:function(e,t){if(!e)throw new Error("accountId required for deleteSshKey()");if(!t)throw new Error("keyId required for deleteSshKey()");return $.get().ajax({type:"DELETE",url:"/api/user/key",data:{account:e,id:t}})}},Qt={deleteTeamfolder:function(e){if(!e)throw new Error("apiWrapper.deleteTeamfolder: teamfolderId required.");return $.get().ajax({type:"DELETE",url:"/api/teamfolder",data:{pid:e}})}},Zt={deleteUser:function(e){if(!e)throw new Error("accountId must be provided for deleteUser()");if("string"!=typeof e)throw new Error("accountId must be a string for deleteUser()");return $.get().ajax({type:"DELETE",url:"/api/user",data:{account:e}})}},en={disable2FA:function(){return $.get().ajax({url:"/api/user/2fa",type:"DELETE"})}};var tn={download:function(e,t){var n,i;if(t=t||{},e&&(e=[].concat(e)),!e||!e.length)throw new Error("no models given to download");return e.length>1?(n=!0,i=t.base||function(e){var t=Ue.findCommonPath(l.a.map(e,(function(e){return e.get("path")})));return new $t({path:t},{parse:!0,context:e[0].getContext()})}(e)):e[0].get("type")===L.directory?(n=!0,i=e[0]):(n=!1,i=e[0]),i.getMeta(["id","name"]).then((function(i){return n?function(e,t,n,i,r){var o=[],a="/api/file/archive/download?src_id="+l.a.map(n,(function(e){return e.getPid()})).join("&src_id=")+"&base_id="+e;return i&&o.push(encodeURIComponent(i)),r?o.push(encodeURIComponent(r.replace(/\/|\n|\r/g,""))):o.length&&""!==t&&o.push(t),o.length&&(a+="&filename="+o.join("-")+".zip"),a}(i.id,i.name,e,l.a.result(t,"archivePrefix"),t.archiveName):"/api/file?attachment=true&pid="+e[0].getPid()})).done((function(e){u($.get(i.getContext()).addAuthToUrl(e))})).fail((function(t){Z.trigger("api:download:error",e,t)}))}};function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var on=function(e,t,n){var i=!1,r=decodeURIComponent(n)===n?encodeURIComponent(n):n,o=e.replace(new RegExp("([\\?&]"+t+"=)[^&]+"),(function(e,t){return i=!0,t+r}));return i||(o+=(o.indexOf("?")<0?"?":"&")+t+"="+r),o},an=function(e){if(!(e instanceof Object))throw new Error("urlHelper.paramsToString(): Object input expected.");for(var t=new URLSearchParams,n=0,i=Object.entries(e);n<i.length;n++){var r=nn(i[n],2),o=r[0],a=r[1];t.append(o,a)}return t.toString()},sn={downloadSharelink:function(e){return $.get(e.getContext()).ajax({method:"POST",url:"/api/sharelink/info",data:{fields:"remaining,download_code"}}).then((function(e){return e.remaining>=1?r.a.Deferred().resolve(e.download_code):r.a.Deferred().reject()})).then((function(t){var n={id:e.get("id"),download_code:t};u("/api/sharelink/download?"+an(n))}),(function(){Z.trigger("api:downloadSharelink:error",e)})).promise()}},ln={enable2FA:function(e,t){if(!e)throw new Error("verifyToken is missing in api.enable2FA");if(!l.a.isString(t)||""===t)throw new Error("secret should be a string in api.enable2FA");return $.get().ajax({url:"/api/user/2fa",type:"POST",data:{verify_token:e,secret:t}})}},cn={getApps:function(e){var t;if(!e)throw new Error("accountId required for getApps()");return t={account:e},$.get().isAdmin()&&(t.scope="all"),$.get().ajax({type:"GET",url:"/api/app/list",data:t})}},un={getDir:function(e,t,n){var i,o=r.a.Deferred(),a=o.promise(),s=5e3,c={},u=[];return function r(){var a=u.length,d=l.a.clone(n);d.limit=[a,s].join(","),(i=$.get(t).ajax({type:"GET",dataType:"json",url:"/api/dir?path="+e,data:d})).then((function(e){Array.isArray(e.members)&&(u=u.concat(e.members)),c=l.a.omit(e,"members"),Array.isArray(e.members)&&e.members.length===s?r():(c.members=u,o.resolve(c))}),(function(e,t,n){"abort"!==n&&o.reject(e,t,n)}))}(),a.abort=function(){i.abort()},a}},dn=N.authContext.deviceBackups,hn={getDeviceBackupSize:function(){if(!$.get().getFeatures().backup)return r.a.Deferred().resolve(0).promise();return $.get(dn).login().then(function(){return this.getMeta({context:dn,path:N.rootPath,fields:["size"]}).then((function(e){return e.size}))}.bind(this),(function(){return r.a.Deferred().resolve(0).promise()}))}},fn={getFile:function(e){if(!e.pid&&!e.path)throw new Error("apiWrapper.getFile: either pid or path parameter are mandatory.");return $.get(e.context).ajax({url:"/api/file",method:"GET",data:l.a.pick(e,"pid","path")})}},pn={getInvitations:function(e){var t={url:"/api/user/invite",data:{}};if(void 0!==e){if("string"!=typeof e||""===e)throw new Error("Api.getInvitations: invitationId-parameter must be non-empty string");t.data.invite_id=e}return $.get().ajax(t).then((function(e){return e}))}},gn={getPermission:function(e,t){if(!e)throw new Error("accountId required for getPermission()");if(!t)throw new Error("path required for getPermission()");return $.get().ajax({type:"GET",url:"/api/permission",data:{path:t,account:e}})}},mn=["id","pid","count","ttl","has_password","path","status","created","writable","last_modified","share_type","viewmode"].join(","),vn={getShare:function(e){var t={fields:mn};return e&&(t.id=e),$.get().ajax({type:"GET",url:"/api/share",data:t})}},yn=["count","created","has_password","id","image.exif","image.height","image.width","last_modified","maxcount","mime_type","path","pid","share_type","size","status","ttl"].join(","),wn={getShareLink:function(e){var t={fields:yn};return e&&(t.id=e),$.get().ajax({type:"GET",url:"/api/sharelink",data:t})}},bn={getShareLinkThumbnail:function(e,t){var n=r.a.Deferred(),i={id:e},o=new XMLHttpRequest;if(!m())return n.reject(e,null,"noblob").promise();if(!l.a.isString(e))throw new Error("shareId parameter to getShareLinkThumbnail() has to be a string");if(!isNaN(Number(t.width))&&t.width>0&&(i.width=t.width),!isNaN(Number(t.height))&&t.height>0&&(i.height=t.height),!i.height&&!i.width)throw new Error("At least width or height should be passed");return t.password&&(i.password=t.password),o.open("POST","/api/sharelink/thumbnail",!0),o.responseType="blob",o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onload=function(){200===o.status?n.resolve(v(o.response)):n.reject(e,o,"error")},o.onerror=function(){n.reject(e,o,"error")},o.send(an(i)),n.promise()}},_n={getSnapshots:function(e){var t={};if("string"!=typeof e)throw new Error("path required for api.getSnapshots");return t.path=e,$.get().isAdmin()&&(t.scope="all"),$.get().ajax({url:"/api/snapshot",data:t})}};function xn(e){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var kn={getTeamfolder:function(e){var t;return t=function(e){if(void 0!==e){if("object"!==xn(e))throw new Error("params of type object is required by api.getTeamfolder");if(void 0!==e.path){if("string"!=typeof e.path)throw new Error("path of type string required by api.getTeamfolder");if("/"!==e.path.substr(0,1))throw new Error("path should start with /");return{path:e.path}}if(void 0!==e.pid){if("string"!=typeof e.pid)throw new Error("pid of type string required by api.getTeamfolder");if(0===e.pid.length)throw new Error("pid is required by api.getTeamfolder");return{pid:e.pid}}throw new Error("pid or path parameters is always mandatory")}}(e),$.get().ajax({type:"GET",url:"/api/teamfolder",data:t})}},En={getTeamfolderUsers:function(e){if(!e||"string"!=typeof e)throw new Error("getTeamfolderUsers: teamfolderId must be non-empty string");return $.get().ajax({type:"GET",url:"/api/teamfolder/users",data:{pid:e}})}},Sn={getUserTeamfolders:function(e){if(!e||"string"!=typeof e)throw new Error("getUserTeamfolders: accountId must be non-empty string");return $.get().ajax({type:"GET",url:"/api/user/teamfolders",data:{account:e}})}},Tn={getSshKeys:function(e){if(!e)throw new Error("accountId required for getSshKeys()");return $.get().ajax({type:"GET",url:"/api/user/key",data:{account:e}})}};function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(n),!0).forEach((function(t){Dn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var On=ut.extend({generatePathComponents:function(e){var t=e.name||"";return{name:t,path:t}},getItemType:function(){return"ShareLinkModel"},parse:function(e){var t=L.file,n=jn(jn({},e),{},{type:t},Ze(e.name));return n.ttl>0&&(n.expirytime=Date.now()/1e3+n.ttl|0),l.a.isUndefined(n.readable)&&(n.readable=!0),n},getMeta:function(){var e=r.a.Deferred(),t=e.promise(),n={readable:!0};return l.a.defer((function(){e.resolve(n)})),t.abort=function(){},t}});function Pn(e,t){var n=e.getPid(),i=r.a.Deferred();if(!n)return i.reject().promise();var o="/api/file/thumbnail?pid="+n;return t.width&&(o+="&width="+Math.ceil(t.width)),t.height&&(o+="&height="+Math.ceil(t.height)),o=$.get(e.getContext()).addAuthToUrl(o),i.resolve(o).promise()}function An(e,t){var n={};return t.width&&(n.width=Math.ceil(t.width)),t.height&&(n.height=Math.ceil(t.height)),$.get(e.getContext()).ajax({url:"/api/sharelink/thumbnail",method:"POST",dataType:"blob",data:n})}var Mn={getThumbnail:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e instanceof On)t=An(e,n);else if(e instanceof $t)t=Pn(e,n);else{if(!(e instanceof mt))throw new Error("expecting ShareItem, ShareLinkModel or FileModel");t=Pn(e,n)}return t}},In=N.userFields.join(","),Fn={getUsers:function(e,t){var n={};if(e){if(!Array.isArray(e)||0===e.length)throw new Error("Api.getUsers: fields-parameter must be non-empty array.");if(!l.a.all(e,l.a.isString))throw new Error("Api.getUsers: fields-parameter must be string array.");n.fields=[].concat(e).join(",")}else n.fields=In;if(!l.a.isUndefined(t)){if(!l.a.isString(t)||0===t.length)throw new Error("Api.getUsers: accountId-parameter must be non-empty string");n.account=t}return $.get().isAdmin()&&(n.scope="all"),$.get().ajax({url:"/api/user",data:n})}},zn={getZones:function(){var e={};return $.get().isAdmin()&&(e.scope="all"),$.get().ajax({url:"/api/zone",data:e})}},Ln={inviteUser:function(e){if(!l.a.isObject(e))throw new Error("attributes should not be empty for inviteUser()");if(!e.email)throw new Error("no email provided as attribute for inviteUser()");if(!e.descr)throw new Error("no descr provided as attribute for inviteUser()");return $.get().ajax({type:"POST",url:"/api/user/invite",traditional:!0,data:e})}},Nn={moveFiles:function(e,t){var n=e.getItemType(),i=l.a.pluck(t,"id"),o=[],a=[],s=r.a.Deferred(),c=e.getContext();if(l.a.some(t,(function(e){return e.getContext()!==c})))throw new Error("context of source and target must be the same in moveFiles");if(l.a.some(t,(function(e){return e.getItemType()!==n})))throw new Error("itemType of source and target must be the same in moveFiles");return Ct.add(n,t),$.get(c).ajax({method:"POST",url:"/api/fs/move",traditional:!0,data:{src_id:i,dst_id:e.get("id"),on_exist:"autoname"}}).done((function(i,r,u){var d;o=i.done.map((function(e){return new $t(e,{parse:!0,context:c})})),a=i.failed.map((function(e){return l.a.find(t,(function(t){return t.get("id")===e.src_id}))})),d=l.a.difference(t,a),a.length&&Ct.recover(n,a),d.length&&Ct.drop(n,d),Z.trigger("api:moveFiles:done",e.get("path"),o),a.length>0?(Z.trigger("api:moveFiles:error",a,o),s.reject(a,o,u)):(Z.trigger("api:moveFiles:success",e,o),s.resolve(o))})).fail((function(e){if("timeout"===e.statusText)return s.reject([],[],e),void Ct.drop(n,t);Ct.recover(n,t),Z.trigger("api:moveFiles:error",t,[]),s.reject(t,[],e)})),s.promise()}};function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){Rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var qn={newFile:function(e){var t,n={},i="POST";if("object"!==Bn(e))throw new Error("newFile needs a valid options object parameter");if(!(e.folder instanceof $t))throw new Error("newFile needs a valid target folder");if("string"!=typeof e.filename)throw new Error("newFile needs a filename");if(e.content&&!(e.content instanceof Blob))throw new Error("newFile content must be Blob.");if(e.onProgress&&"function"!=typeof e.onProgress)throw new Error("newFile needs a function as onProgress callback.");if(e.on_exist&&!["autoname","overwrite"].includes(e.on_exist))throw new Error("newFile needs only accepts {autoname|overwrite|falsy} to on_exist.");var o=e.folder.get("path"),a={dir_id:e.folder.get("id"),name:e.filename};"overwrite"===e.on_exist?i="PUT":a.on_exist="autoname",e.mtime&&(a.mtime=e.mtime),e.content&&(n={timeout:0,processData:!1,contentType:!1,data:e.content}),e.onProgress&&(n=$n($n({},n),{},{xhr:function(){var t=r.a.ajaxSettings.xhr();return t.upload.onprogress=e.onProgress,t}}));var s=new Promise((function(r,s){$.get(e.folder.getContext()).ajax($n({method:i,url:"/api/file?"+an(a),beforeSend:function(e){t=e}},n)).then((function(t){var n=new $t(t,{parse:!0,context:e.folder.getContext()});Z.trigger("api:newFile:created",o,n),r(n)}),s)}));return s.abort=function(){t&&t.abort()},s}},Un={newFolder:function(e,t,n){var i,o=r.a.Deferred(),a=e.get("path");if(!l.a.isObject(e))throw new Error("newFolder needs a target folder");if(!l.a.isString(t))throw new Error("newFolder needs a new folder name");return i={pid:e.get("id"),path:t},n&&l.a.extend(i,{on_exist:"autoname"}),$.get(e.getContext()).ajax({method:"POST",url:"/api/dir",data:i}).done((function(t){var n=new $t(t,{parse:!0,context:e.getContext()});Z.trigger("api:newFolder:created",a,n),o.resolve(n)})).fail((function(t){o.reject(e,t)})),o.promise()}},Hn={patchFile:function(e,t,n,i){var o;if(!(e instanceof $t))throw new Error("model parameter to patchFile() should be a FileModel");if(!l.a.isNumber(n))throw new Error("offset parameter to patchFile() should be a number");if(n<0)throw new Error("offset parameter to patchFile() should be >= 0");if(!(t instanceof window.Blob))throw new Error("chunk parameter to patchFile() should be instance of Blob");var a=new Promise((function(a,s){$.get(e.getContext()).ajax({method:"PATCH",url:"/api/file?"+an({pid:e.getPid(),offset:n,mtime:e.get("mtime")}),timeout:0,processData:!1,contentType:!1,data:t,xhr:function(){var e=r.a.ajaxSettings.xhr();return l.a.isFunction(i)&&(e.upload.onprogress=i),e},beforeSend:function(e){o=e}}).then(a,s)}));return a.abort=function(){o&&o.abort()},a}},Wn={rename:function(e,t,n){var i,o,a,s,c,u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],d=r.a.Deferred();if(e instanceof $t!=!0)throw new Error("FileItem Model required to rename");if(!l.a.isString(t))throw new Error("new name of type string required by rename");var h=e.get("type")===L.directory;if(n&&["autoname","overwrite"].indexOf(n)<0)throw new Error("invalid conflict decision given to rename");if("overwrite"===n&&h)throw new Error("overwrite not possible for directories on rename");return o=n,(i=e.clone()).setName(t),a=function(t,n,r){i.set(i.parse(t)),Z.trigger("api:rename:success",e,i,r),d.resolve(e,i,t,n,r)},s=function(t,n,r){u||Z.trigger("api:rename:error",e,i,t),d.reject(e,i,t,n,r)},(t.indexOf("/")>=0||t.match(/^\.{1,2}$/))&&s({status:400,statusText:"invalid name"},"invalid name",400),e.get("display_name")===t&&a(i.attributes,"success",{status:200,statusText:"OK"}),Z.trigger("api:rename:start",e,i),d.notify(e,i),c=h?"/api/dir/rename":"/api/file/rename","pending"===d.state()&&$.get(e.getContext()).ajax({type:"POST",url:c,data:{pid:i.get("id"),name:i.get("display_name"),on_exist:o}}).done(a).fail(s),d.promise()}},Gn={search:function(e,t){var n,i={},o=r.a.Deferred(),a=o.promise();if(!e)throw new Error("search: pattern option is required");if(l.a.isObject(t)){if(t.limit&&!/^\d+$/.test(t.limit))throw new Error("search: limit option must be a number");if(0===t.limit)throw new Error("search: limit option must be greater or equal 1");if(i=l.a.pick(t,"path","limit"),t.fields){if(!Array.isArray(t.fields))throw new Error("search: fields option must be an array");t.fields.length&&(i.fields=t.fields.join(","))}}return i.pattern=e,n=l.a.result(t,"context")||"",$.get(n).ajax({url:"/api/search",data:i,beforeSend:function(e){a.abort=e.abort}}).done((function(e){o.resolve(e.result)})).fail((function(e){o.reject(e)})),a}},Kn={setExternalShareLabel:function(e,t){var n,i=r.a.Deferred();if(!(e instanceof bt))throw new Error("setExternalShareLabel requires an ExternalShareModel");if(!t)throw new Error("label should be provided to setExternalShareLabel");return(n=e.clone()).setName(t),Z.trigger("api:setExternalShareLabel:start",e,n),$.get().ajax({method:"PUT",url:"/api/share/external",data:{id:e.get("id"),type:e.get("share_type"),label:t}}).done((function(t){n.set(n.parse(t)),Z.trigger("api:setExternalShareLabel:success",e,n),i.resolve(e,n)})).fail((function(t){Z.trigger("api:setExternalShareLabel:error",e,n),i.reject(e,n,t)})),i.promise()}},Xn={setExternalSharePassword:function(e,t){var n=r.a.Deferred();if(!(e instanceof bt))throw new Error("setExternalSharePassword requires an ExternalShareModel");if(l.a.isUndefined(t))throw new Error("password should be provided to setExternalSharePassword");return $.get().ajax({method:"PUT",url:"/api/share/external",data:{id:e.get("id"),type:e.get("share_type"),password:t}}).done((function(){Z.trigger("api:setExternalSharePassword:success",e),n.resolve(e)})).fail((function(t){Z.trigger("api:setExternalSharePassword:error",e),n.reject(e,t)})),n.promise()}},Yn={unzip:function(e,t){var n=r.a.Deferred();if(!l.a.isObject(e))throw new Error("unzip needs a valid file");if(!l.a.isObject(t))throw new Error("unzip needs a valid destination folder");if(e.getContext()!==t.getContext())throw new Error("context of source file and destination must be the same in unzip");return $.get(t.getContext()).ajax({method:"POST",url:"/api/file/archive/inflate",data:{pid:e.id,dst_id:t.id,exists:"skipall",forbidden:"skipall",unprocessable:"skipall"}}).done((function(e){n.resolve(e)})).fail((function(t){n.reject(e,t)})),n.promise()}},Jn={updatePermission:function(e){var t,n,i,o=r.a.Deferred();if(!l.a.isObject(e))throw new Error("attributes object required for updatePermission()");if(!e.account&&!e.invite_id)throw new Error("attributes.account or invite_id required for updatePermission()");if(e.account&&e.invite_id)throw new Error("attributes.account and invite_id are exclusive for updatePermission()");if(e.account&&(t=e.account),e.invite_id&&(t=e.invite_id),!e.path)throw new Error("attributes.path required for updatePermission()");if(n=e.path,i=l.a.pick(e.permissions,"readable","writable"),l.a.isEmpty(i))throw new Error("a valid permission needs to be specified");return $.get().ajax({type:"PUT",url:"/api/permission",data:l.a.extend(l.a.pick(e,"invite_id","account","path"),i)}).done((function(e){o.resolve(e)})).fail((function(e){o.reject(t,n,e)})),o.promise()}},Qn={updateTeamfolder:function(e,t){var n;if(!l.a.isString(e))throw new Error("source pid is required for Api.updateTeamfolder");if(!l.a.isString(t))throw new Error("target name is required for Api.updateTeamfolder");return n={pid:e,name:t},$.get().ajax({method:"PUT",url:"/api/teamfolder",data:n})}};function Zn(e){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ei(e,t){return e&&"object"===Zn(e)?"string"!=typeof e[t]?new Error("permissionsFormat: permission."+t+" is not string"):e[t]?"boolean"!=typeof e.readable?new Error("permissionsFormat: permission.readable is not boolean"):"boolean"!=typeof e.writable?new Error("permissionsFormat: permission.writable is not boolean"):null:new Error("permissionsFormat: permission."+t+" must be non-empty string"):new Error("permissionsFormat: permission is not an object")}var ti=function(e){var t,n;if(!Array.isArray(e))return new Error("ensureFolderPermissionFormat: expected array");for(t=0;t<e.length;t++)if(n=ei(e[t],"pid"))return n;return null},ni=function(e){var t,n;if(!Array.isArray(e))return new Error("ensureAccountPermissionFormat: expected array");for(t=0;t<e.length;t++)if(n=ei(e[t],"account"))return n;return null},ii={updateTeamfolderUsers:function(e,t){var n;if(!e||"string"!=typeof e)throw new Error("updateTeamfolderUsers: teamfolderId must be non-empty string");if(n=ni(t))throw n;return $.get().ajax({type:"PUT",url:"/api/teamfolder/users",contentType:"application/json",data:JSON.stringify({pid:e,users:t})})}};function ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(n),!0).forEach((function(t){ai(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var si={updateUser:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.a.Deferred();if(!e)throw new Error("accountId required for updateUser()");if(0===Object.entries(t).length)throw new Error("attributes should not be empty for updateUser()");return $.get().ajax({type:"PUT",url:"/api/user",data:oi(oi({},t),{},{account:e})}).done((function(i){t.email&&t.email!==i.email&&Z.trigger("api:email:dirty",e,t.email),Z.trigger("api:updateUser:success",e,i),n.resolve(i)})).fail((function(i){Z.trigger("api:updateUser:error",e,t,i),n.reject(i)})),n.promise()}},li={updateUserTeamfolders:function(e,t){var n;if("string"!=typeof e||""===e)throw new Error("updateUserTeamfolders: accountId must be non-empty string");if(n=ti(t))throw n;return $.get().ajax({type:"PUT",url:"/api/user/teamfolders",contentType:"application/json",data:JSON.stringify({account:e,teamfolders:t})})}},ci=ut.extend({idAttribute:"name",url:"/api/zone",defaults:{quota:0,available:0,used:0,usedbysnapshots:0,usedbyfiles:0,sched_interval:null,sched_ttl:null},parse:function(e){var t=[null,null],n=l.a.extend({},e);return l.a.has(n,"name")&&(n.name=Ue.unifyPath(n.name)),l.a.has(n,"parent")&&(n.parent=n.parent?Ue.unifyPath(n.parent):n.parent),q.get("hasBackup")||(n.usedbysnapshots=0),n.usedbyfiles=n.used-n.usedbysnapshots,n&&n.sched&&(t=n.sched.split(":")),delete n.sched,l.a.extend(n,{sched_interval:t[0],sched_ttl:t[1]}),n},fetch:function(){throw new Error("fetch zones collection, not the model!")}}),ui={updateZone:function(e,t){var n;if(!(e instanceof ci))throw new Error("Api.updateZone: zone model required");if(!t||l.a.isEmpty(t))throw new Error("Api.updateZone: attributes not set or empty");return n=l.a.extend({},t),$.get().isAdmin()&&(n.scope="all"),n.name=e.id,$.get().ajax({type:"PUT",url:"/api/zone",data:n}).done((function(t){e.set(e.parse(t))})).fail((function(){Z.trigger("api:updateZone:error",e.id,t)}))}},di={userAvailable:function(e){var t=r.a.Deferred();if(!e)throw new Error("alias required for userAvailable()");return r.a.ajax({type:"GET",url:"/api/user/available",data:{alias:e,suggestions:!1}}).done((function(e){e.available?t.resolve(e):t.reject("taken")})).fail((function(e){t.reject("error",e)})),t.promise()}},hi={zip:function(e,t){var n,i,o=r.a.Deferred();if(!Array.isArray(e)||!e.length)throw new Error("zip needs valid source files array.");if(!(t&&t instanceof $t))throw new Error("zip needs valid destination file.");if(i=t.getContext(),l.a.some(e,(function(e){return e.getContext()!==i})))throw new Error("context of source files and destination must be the same in zip");return n=l.a.map(e,(function(e){return e.urlDecode("path")})),$.get(i).ajax({method:"POST",url:"/api/file/archive/deflate",traditional:!0,data:{dst:t.urlDecode("path"),src:n}}).done((function(n,i,r){var a=[],s=[];l.a.each(n.done,(function(t){s.push(l.a.find(e,(function(e){return e.get("path")===t.src})))})),0===s.length?a=e:l.a.each(n.failed,(function(t){a.push(l.a.find(e,(function(e){return e.get("path")===t.src})))})),n.file&&t.set(t.parse(n.file)),0===s.length?o.reject(a,s,t,r):o.resolve(a,s,t,r)})).fail((function(n){o.reject(e,[],t,n)})),o.promise()}},fi={zipInfo:function(e){var t=r.a.Deferred();if(!(e instanceof $t))throw new Error("FileModel required for zipInfo");if("zip"!==e.get("ext"))throw new Error(".zip extension required for zipInfo");return $.get(e.getContext()).ajax({url:"/api/file/archive",method:"GET",data:{pid:e.id}}).done((function(e){t.resolve(e)})).fail((function(n){t.reject(e,n)})),t.promise()}};function pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pi(Object(n),!0).forEach((function(t){mi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vi=gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi(gi({},_t),xt),kt),Rt),qt),Ut),Ht),Wt),Gt),Kt),Xt),Yt),Jt),Qt),Zt),en),tn),sn),ln),cn),un),hn),fn),pn),dt),gn),vn),wn),bn),_n),kn),En),Sn),Tn),Mn),Fn),zn),Ln),Nn),qn),Un),Hn),Wn),Gn),Kn),Xn),Yn),Jn),Qn),ii),si),li),ui),di),hi),fi),yi=[1280,640,210];function wi(e){return l.a.find(yi,(function(t,n){return n===yi.length-1||e<=t&&e>yi[n+1]||e>t}))}var bi=function(e){var t=r.a.Deferred(),n=new Image;return n.onload=function(){n.onload=null,t.resolve(n)},n.onerror=t.reject,n.src=e,t.promise()},_i=function(e,t,n,i){var r={};if(!n||!i)throw new Error("displayWidth and displayHeight need to be filled!");return e&&t?e/t<n/i?(r.height=wi(Math.min(t,i)),r.shouldScale=t>i):(r.width=wi(Math.min(e,n)),r.shouldScale=e>n):(r.width=wi(n),r.height=wi(i),r.shouldScale=!0),r},xi=function(e,t,n,i,r){var o;if(!n||!i)throw new Error("targetWidth and targetHeight need to be filled!");return r>4&&(o=e,e=t,t=o),e/t>1&&t>=i||e<n?{height:i}:{width:n}},ki=function(e,t,n,i,r){var o,a,s;if(!n||!i)throw new Error("targetWidth and targetHeight need to be filled!");return r>4&&(o=e,e=t,t=o),(a=e/t)>1&&t>=i||a<1&&t>=i||e>n?(s=i/t,{width:Math.round(e*s),height:Math.round(t*s)}):{width:Math.round(n),height:Math.round(i)}},Ei=function(e,t){var n,i,o,a,s=(new Date).getTime(),c=l.a.extend({thumbWidth:140,thumbHeight:140},t),u=c.thumbWidth,d=c.thumbHeight,h=[];if(!e)throw new Error("view required to bind to");if(!e.collection)throw new Error("collection required in view");if(!e.itemViews)throw new Error("itemViews collection required in view");if(e._thumbnailLoaderMixin)throw new Error("thumbnailLoader already bound - don't re-bind()");function f(e){a=r()(e).on("scroll."+s+" resize."+s,n)}function p(){if(document.body.contains(e.el)&&e._thumbnailLoaderMixin){e._thumbnailLoaderMixin.$container||(f(o),e._thumbnailLoaderMixin.$container=a);var t=e._thumbnailLoaderMixin.$container,n=t.scrollTop(),i=t.height()+n,r=e.el.getBoundingClientRect().top;e.itemViews.find((function(e){if(e.get("load"))return!1;var t=e.get("view").el.getBoundingClientRect(),o=t.top-r;return!(o+t.height<n)&&(o>=i||(e.set({load:!0}),!1))}))}}function g(t,n,i){e.listenTo(t,n,i),h.push([t,i])}n=l.a.throttle(p,750,{leading:!1,trailing:!0}),g(i=e.collection,"load sort remove:end add:end",n),g(i,"change",(function(t){var n=e.itemViews.get(t.cid);n&&n.set("load",!1,{silent:!0})})),g(e.itemViews,"change:load",(function(e){var t,n,i=e.get("view").model,o=i.get("image");("video"!==i.get("group")||pe.canPlayVideo(i.get("mime_type")))&&["thumb","pdf","video"].indexOf(i.get("group"))>-1&&(t={width:e.width||u,height:e.height||d},o&&(n=o.exif&&o.exif.Orientation?o.exif.Orientation:void 0,t=xi(o.width,o.height,t.width,t.height,n)),vi.getThumbnail(i,t).then((function(t){t&&bi(t).then((function(t){!function(e,t){var n=t.src,i=e.get("view").$el,o=r()(".itemcontent .file-item-icon",i),a=r()("<div />").addClass("thumbnail").css("background-image","url("+n+")");i.addClass("isthumbnail"),function(e,t){var n,i,r,o,a,s,l=t.width,c=t.height;n=l>c,i=l===c,r=l>=u,o=l>=u-20,a=c>=d,s=c>=d-20,l<u&&c<d?e.css("background-size","auto"):i&&a?e.addClass("max_width_height"):n&&a?e.addClass("max_height"):!n&&r?e.addClass("max_width"):n||r||!s?n&&!a&&o&&e.addClass("max_small_width"):e.addClass("max_small_height")}(a,t),o.append(a).addClass("file-item-image-preview").removeClass("file-item-image-icon")}(e,t)}))})))})),g(e,"viewmode",(function(){n.cancel(),p()})),t&&t.container?r()(t.container).length?f(t.container):o=t.container:f(window),l.a.extend(e,{_thumbnailLoaderMixin:{namespace:s,$container:a,listeners:h}})},Si=function(e){var t,n,i,o,a,s=e._thumbnailLoaderMixin;if(s){for(;s.listeners.length;)o=(i=s.listeners.pop())[0],a=i[1],e.stopListening(o,null,a);t=s.namespace,n=s.$container,r()(n||window).off("."+t),delete e._thumbnailLoaderMixin}},Ti=Fe.extend({initialize:function(e){Fe.prototype.initialize.apply(this,arguments),Ei(this,l.a.extend({thumbWidth:48,thumbHeight:48},e))},remove:function(){Si(this),Fe.prototype.remove.apply(this,arguments)}}),Ci=Me.extend({tagName:"tile-layout",contentTagName:"tile-content"}),ji=Ci.extend({initialize:function(e){Ci.prototype.initialize.apply(this,arguments),Ei(this,l.a.extend({thumbWidth:140,thumbHeight:140},e))},remove:function(){Si(this),Ci.prototype.remove.apply(this,arguments)}}),Di=n(7),Oi=n.n(Di),Pi=a.a.View.extend({className:"sj-breadcrumb",segments:[],events:{"click .link":"_onLinkClick","click .segment-icon":"_onIconClick"},defaults:{single_segment_length:19,path_max_length:70,prefix:""},initialize:function(e){this.config=l.a.extend({},this.defaults,e)},template:l.a.template([Oi.a].join("")),render:function(){return this.$el.empty().append(this.template({segments:l.a.clone(this.segments)},this)),this},_onLinkClick:function(e){e.preventDefault();var t,n=r()(e.target).attr("href"),i=r()(e.target).hasClass("level-up");n||(n=r()(e.currentTarget).attr("href")),n&&(i||(i=r()(e.currentTarget).hasClass("level-up")),n=n.replace(this.config.prefix,""),t=i?"breadcrumb-arrow":"breadcrumb-path",this.trigger("click",n,t))},_onIconClick:function(e){this.trigger("iconclick",e)},setSegments:function(e){return l.a.each(e,(function(e){e.href=this.config.prefix+e.href}),this),this.segments=e,this.render()},addSegment:function(e){return this.segments.push(e),this.render()}}),Ai=42,Mi=function(){return Ai++},Ii=n(8),Fi=n.n(Ii),zi={negative:11e3,info:7e3,positive:3e3},Li=Object.keys(zi),Ni=Li[0],Vi=a.a.View.extend({className:"toast",events:{"click .toast-close":"onToastClose",mouseover:"stopTimeOut",mouseout:"restartTimeOut"},initialize:function(){this.messages=[],this._currentMessage=null,this.listenTo(O,"change",this.onLanguageChange)},render:function(e){return(l.a.isString(e)||l.a.isFunction(e))&&(e={msg:e}),!l.a.isUndefined(e.type)&&l.a.contains(Li,e.type)||(e.type=Ni),e=l.a.defaults(e,{unescape:!1}),this.messages.push(e),this._renderNext(),this},_renderNext:function(){delete this._currentMessage,this.messages.length&&(this._timeout||(this._currentMessage=this.messages.shift(),this._renderBody(),this._startTimeout(zi[this._currentMessage.type]||3e3)))},onLanguageChange:function(){this._renderBody()},_renderBody:function(){var e=this._currentMessage;if(e){var t=l.a.result(e,"msg");e.unescape||(t=l.a.escape(t)),this.$el.removeClass(Li.join(" ")).addClass(e.type);var n=r()(l.a.template(Fi.a)({msg:t})).hide();this.$el.css("z-index",Mi()),this.$el.prependTo("body").html(n),this.$(".toast-body").fadeIn(500)}},_hide:function(e){var t=this;this.$(".toast-body").fadeOut(500,(function(){t.$el.detach(),e&&e()}))},stopTimeOut:function(){clearTimeout(this._timeout),delete this._timeout},restartTimeOut:function(){this._startTimeout(3e3)},onToastClose:function(){clearTimeout(this._timeout),delete this._timeout,this._hideAndContinue()},_hideAndContinue:function(){this._hide(function(){this._renderNext()}.bind(this))},_startTimeout:function(e){this._timeout=setTimeout(function(){delete this._timeout,this._hideAndContinue()}.bind(this),e)}}),$i=n(9),Ri=n.n($i),Bi=a.a.View.extend({tpl:l.a.template(Ri.a),initialize:function(e){this._html=e.html,this._namespace=String((new Date).getTime()),this._$relatedEl=r()(e.relatedEl)},render:function(){return this.$el.html(this.tpl({body:l.a.result(this,"_html")})),this.$el.appendTo("body"),this.$el.addClass("sj-tooltip"),this.$el.css({"z-index":Mi()}),this.align(),r()(window).on("resize."+this._namespace,this._onResize.bind(this)),r()(window).on("scroll."+this._namespace,this._onScroll.bind(this)),this._ticking=!1,this},_onResize:function(){var e=window.innerWidth,t=window.innerHeight;this._latestContainerWidth===e&&this._latestContainerHeight===t||(this._hasResized=!0,this._latestContainerWidth=e,this._latestContainerHeight=t,this._requestTick())},_onScroll:function(){var e=window.scrollX||window.pageXOffset,t=window.scrollY||window.pageYOffset;this._latestContainerScrollX===e&&this._latestContainerScrollY===t||(this._hasScrolled=!0,this._latestContainerScrollX=e,this._latestContainerScrollY=t,this._requestTick())},_requestTick:function(){this._ticking||(this._requestId=window.requestAnimationFrame(this._updateAll.bind(this)),this._ticking=!0)},_updateAll:function(){this._ticking=!1,(this._hasResized||this._hasScrolled)&&(this._hasResized=!1,this._hasScrolled=!1,this.align())},align:function(){if(this.$el.is(":visible")&&this._$relatedEl.length){var e=parseInt(this.$el.css("margin-bottom"),10)||0,t=this._$relatedEl.offset();this.$el.css({left:t.left,top:t.top-e-this.$el.height()})}},remove:function(){return cancelAnimationFrame(this._requestId),delete this.$relatedEl,r()(window).off("resize."+this._namespace),a.a.View.prototype.remove.call(this),this}}),qi=a.a.View.extend({tagName:"span",className:"sj-info-tooltip",events:{click:"_onClick"},initialize:function(e){this.options=l.a.extend({},e),this._isTooltipVisible=!1},render:function(){return this.$el.addClass("icon icon-info-tooltip"),this.options.iconClassname&&this.$el.addClass(this.options.iconClassname),this},_onClick:function(e){e.preventDefault(),this._isTooltipVisible||this.tooltipShow()},tooltipShow:function(){r()(document).on("click."+this.cid,function(e){r()(e.target).closest(this.$el).length||r()(e.target).closest(this.tooltip.$el).length||this.tooltipHide()}.bind(this)),this.tooltip=new Bi({relatedEl:this.$el,html:l.a.result(this.options,"contentHtml")}).render(),this._isTooltipVisible=!0},_unbindDocumentClick:function(){r()(document).off("click."+this.cid)},tooltipHide:function(){this.tooltip&&this.tooltip.remove(),this._unbindDocumentClick(),this._isTooltipVisible=!1},remove:function(){this.tooltipHide(),a.a.View.prototype.remove.apply(this)}}),Ui=a.a.View.extend({toggle:function(){this.$el.hasClass("open")?this.close():this.open()},open:function(){var e=this;this.$el.addClass("open"),r()(document).on("mousedown.sj-flyout",(function(t){r()(t.target).closest(e.$el).length||e.close()}))},close:function(){this.$el.removeClass("open"),r()(document).off("mousedown.sj-flyout")},render:function(){if(!this.triggerView)throw new Error("triggerView is mandatory");if(!this.contentView)throw new Error("contentView is mandatory");return this.triggerView instanceof a.a.View?this.$el.append(this.triggerView.render().$el.addClass("trigger")):this.$el.append(this.triggerView.addClass("trigger")),this.el.classList.add("sj-flyout"),this.$el.append(this.contentView.render().$el),this},remove:function(){return this.triggerView&&this.triggerView.remove(),this.contentView&&this.contentView.remove(),a.a.View.prototype.remove.apply(this,arguments)}}),Hi=n(10),Wi=n.n(Hi),Gi=a.a.View.extend({tagName:"ul",itemTemplate:l.a.template(Wi.a),events:{"click .sj-navigation-item > a":"_onItemClick"},initialize:function(e){if(!l.a.isObject(e))throw new Error("no options were provided.");if(!l.a.isObject(e.items))throw new Error("no items were defined.");Object.keys(e.items).forEach((function(t){var n=e.items[t];if(!n.icon)throw new Error("no icon was defined for "+t);if(!n.label)throw new Error("no label was defined for "+t);if(!n.items)throw new Error("no items were defined for "+t);Object.keys(n.items).forEach((function(e){if(!n.items[e].label)throw new Error("no label was defined for "+e+" in "+t)}))})),this._items=e.items,this._currentSelection=null},setItems:function(e){this._items=e,this.render()},render:function(){return this.$el.addClass("sj-navigation"),this.$el.html(this._buildItems(this._items,null)),this._currentSelection&&this.select(this._currentSelection),this},_getSelectableSegments:function(e){var t=e.split("."),n={items:this._items};return l.a.reduce(t,(function(e,i,r){return n&&n.items&&n.items[i]?(e.push(t.slice(0,r+1).join(".")),n=n.items[i],e):[]}),[])},select:function(e){var t=this._getSelectableSegments(e);this.$(".selected").removeClass("selected"),l.a.each(t,(function(e){this.$("[data-name='"+e+"']").addClass("selected")}),this),t.length?this._currentSelection=e:this._currentSelection=null},_buildItems:function(e,t){return l.a.map(e,(function(e,n){return t&&(n=t+"."+n),this.itemTemplate({item:l.a.extend({name:n},e),items:this._buildItems(e.items||{},n)})}),this)},_onItemClick:function(e){var t=r()(e.target).closest(".sj-navigation-item").attr("data-name");t&&this.trigger("click",t),e.preventDefault()}}),Ki={shift:[16,!0],ctrl:[17,!0],alt:[18,!0],altGr:[225,!0],capsLock:[20,!0],meta1:[91,!0],meta2:[92,!0],meta3:[93,!0],backspace:8,tab:9,enter:13,pause:19,escape:27,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,delete:46},Xi=l.a.chain(Ki),Yi=l.a.extend({keyCodes:Xi.map((function(e){return Array.isArray(e)?e[0]:e})).value(),modifierKeys:Xi.filter((function(e){return Array.isArray(e)&&e[1]})).map((function(e){return Array.isArray(e)?e[0]:e})),scrollKeys:[Ki.pageUp,Ki.pageDown,Ki.end,Ki.home,Ki.upArrow,Ki.downArrow]},Ki),Ji=Q.Object.extend({initialize:function(){this._overlays=[],this._checkFocusInListener=this._checkFocusIn.bind(this),this._checkKeyDownListener=this._checkKeyDown.bind(this)},trapFocus:function(){document.addEventListener("focusin",this._checkFocusInListener),document.addEventListener("keydown",this._checkKeyDownListener)},untrapFocus:function(){document.removeEventListener("focusin",this._checkFocusInListener),document.removeEventListener("keydown",this._checkKeyDownListener)},push:function(e){if(!e)throw new Error("OverlayManager.push: overlay parameter required.");this._overlays.push(e),this.trigger("pushed",e),1===this._overlays.length&&(this.trigger("pushed:first"),this.trapFocus()),e.$overlayEl.focus()},pop:function(e){if(0===this._overlays.length)throw new Error("OverlayManager.pop() called while there aren't any open overlays?!");if(this._overlays[this._overlays.length-1]!==e)throw new Error("OverlayManager.pop() called with non-top overlay");this._overlays.pop(),this.trigger("popped",e),0===this._overlays.length&&(this.trigger("popped:last"),this.untrapFocus())},getStack:function(){return l.a.clone(this._overlays)},_checkKeyDown:function(e){e.keyCode===Yi.tab&&this._handleTab(e)},_checkFocusIn:function(e){this._topOverlay().$overlayEl[0].contains(e.target)||this._focusable()[0].focus()},_handleTab:function(e){var t=this._focusable(),n=t.indexOf(e.target),i=t[t.length-1],r=t[0];if(e.preventDefault(),e.stopImmediatePropagation(),e.shiftKey)return e.target===r||-1===n?void i.focus():void t[n-1].focus();e.target!==i&&-1!==n?t[n+1].focus():r.focus()},_topOverlay:function(){return this._overlays[this._overlays.length-1]},_focusable:function(){return this._topOverlay().getFocusableElements()}});Ji.instance=function(){return Ji._instance||(Ji._instance=new Ji),Ji._instance};var Qi=Ji,Zi=["input:not([type='hidden']):not([disabled])","select:not([disabled])","a[href]:not([href=''])","textarea:not([disabled])","button:not([disabled])","[tabindex]:not([tabindex=''])"];function er(e,t){var n=k(t);return"none"!==n.display&&"hidden"!==n.visibility&&(t===e||er(e,t.parentNode))}var tr,nr=function(e){var t;if(!(e instanceof Element))throw new Error("focusable.find: Element required.");return t=e.querySelectorAll(Zi),t=Array.from(t),l.a.filter(t,er.bind(null,e))},ir=Q.Object.extend({initialize:function(e){if(!l.a.isObject(e))throw new Error("options object required for stateObject");if(l.a.isUndefined(e.action)||!l.a.isFunction(e.action))throw new Error("action has to be a function in stateObject");this._action=e.action,this._state=this._castState(e.state)},_castState:function(e){return!!e},getState:function(){return this._state},setState:function(e){e=this._castState(e),this._state!==e&&(this._state=e,this.trigger("state",this._state))},getAction:function(){return this._action}});function rr(e){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function or(e){return"object"!==rr(e)&&(e={keyCode:e}),[e.keyCode,e.ctrlKey?"1":"0",e.altKey?"1":"0",e.shiftKey?"1":"0"].join("_")}(tr=Q.Object.extend({forbiddenActive:["INPUT","TEXTAREA","SELECT"],initialize:function(){this._views=[],this.currentLevel=0,this.overlayManager=Qi.instance(),q.get("hasHotkeySupport")&&(this.overlayManager.on("pushed",this._addOverlay.bind(this)),this.overlayManager.on("popped",this._removeOverlay.bind(this)),r()(document).on("keydown."+this.cid,this._handleKeyPress.bind(this)))},_findView:function(e){return l.a.findWhere(this._views,{cid:e.cid})},_addView:function(e,t){var n=this._findView(e);return n?n.level=n.level||t:(n={cid:e.cid,level:t},this._views.push(n),e.once("removed",this._removeView.bind(this,e))),n},_addOverlay:function(e){this.currentLevel++,this._addView(e,this.currentLevel)},_removeView:function(e){this._views=l.a.reject(this._views,(function(t){return t.cid===e.cid}))},_removeOverlay:function(e){this._removeView(e),this.currentLevel--},_handleKeyPress:function(e){var t,n,i=document.activeElement;i&&-1!==this.forbiddenActive.indexOf(i.tagName)||(this.currentLevel>0&&(t=l.a.findWhere(this._views,{level:this.currentLevel})),t&&(n=t[or(e)])&&n.getState()&&(e.preventDefault(),n.getAction()()))},addHotkey:function(e,t,n){var i;if(!e||!t||!n)throw new Error("Parameters view, hotkey and handler required");if(q.get("hasHotkeySupport")){if("function"!=typeof n&&!(n instanceof ir))throw new Error("Handler has to be a function or StateObject");i=this._addView(e),"function"==typeof n&&(n=new ir({action:n,state:!0})),i[or(t)]=n}},remove:function(){this.overlayManager.off(),r()(document).off("keydown."+this.cid),this._views=[]}})).instance=function(){return tr._instance||(tr._instance=new tr),tr._instance};var ar=tr,sr=n(11),lr=n.n(sr),cr=n(12),ur=n.n(cr),dr=Q.View.extend({overlayClasses:"sj-overlay",overlayTemplate:l.a.template(lr.a),overlayContentContainer:".sj-overlay-body",canClose:!0,isModal:!0,resultPromise:null,constructor:function(){this._createOverlayElement(),this._isLoading=!1,Q.View.prototype.constructor.apply(this,arguments)},overlayTemplateData:function(){return{options:{canClose:this.canClose,isModal:this.isModal}}},open:function(){var e=l.a.result(this,"overlayTemplateData",{});return this.hotkeyManager=ar.instance(),this._closeHotkeyPrevented=!1,this.$overlayEl.html(this.overlayTemplate(e)),this.render().$el.appendTo(this.$overlayEl.find(this.overlayContentContainer)),this.$overlayEl.css("z-index",Mi()).appendTo("body"),this._overlayPushed||(Qi.instance().push(this),this._overlayPushed=!0),this.trigger("opened"),this.onAfterOpen(),this.canClose&&this.hotkeyManager.addHotkey(this,Yi.escape,function(){this._closeHotkeyPrevented||this._isLoading||this.close()}.bind(this)),this.resultPromise=r.a.Deferred(),this.resultPromise.promise()},disableCloseHotkey:function(){this._closeHotkeyPrevented=!0},enableCloseHotkey:function(){this._closeHotkeyPrevented=!1},onAfterOpen:function(){},getFocusableElements:function(){var e=this.$overlayEl[0],t=nr(e);return t.length?t:[e]},close:function(){l.a.isFunction(this.onBeforeClose)&&this.onBeforeClose.apply(this,arguments),this.remove(),this.resultPromise&&this.resultPromise.resolve.apply(this.resultPromise,arguments)},setVisible:function(e){e?this.enableCloseHotkey():this.disableCloseHotkey(),this.$overlayEl.toggleClass("sj-overlay-hidden",!e)},setIsLoading:function(e){this._isLoading=e,this.$overlayEl.toggleClass("sj-overlay-loading",e)},showError:function(e){var t=r.a.Deferred(),n=new Q.View({className:"sj-overlay-error",template:l.a.template(ur.a),templateData:{message:e.message},subviews:{okButton:{klass:he,target:".ok-button-target",options:{text:e.okButtonText},listeners:{click:function(){n.remove(),t.resolve("error_closed")}}}}});return this.$overlayEl.find(".sj-overlay-content").append(n.render().$el),t.promise()},remove:function(){return this._overlayPushed&&(Qi.instance().pop(this),this._overlayPushed=!1),this.$overlayEl.remove(),Q.View.prototype.remove.call(this),this.trigger("removed"),this},_createOverlayElement:function(){this.$overlayEl=r()("<div/>").addClass(this.overlayClasses).attr("tabIndex",-1).on("click","[data-action~='close-overlay']",this._onCloseOverlay.bind(this)),this.overlayEl=this.$overlayEl[0]},_onCloseOverlay:function(){this.close()}}),hr=dr.extend({defaults:{message:""},canClose:!1,initialize:function(e){this.options=l.a.extend(this.defaults,e)},render:function(){var e=l.a.result(this.options,"message");return this.$overlayEl.addClass("sj-wait-overlay sj-selectable"),this.$el.html('<span class="icon icon-loading"></span><span class="wait-overlay-message">'+e+"</span>"),this}});function fr(e,t,n){return r()(['<span class="icon '+t+(n?" clickable":"")+'">','<span class="'+e+'"></span>',"<span>"].join(""))}var pr=a.a.View.extend({inputTpl:l.a.template('<input spellcheck="false" type="text">'),events:{"keypress input":"_onKeypress","keyup input":"_onKeyup","input input":"_onInput",focusin:"_onFocusIn",focusout:"_onFocusOut","focus input":"_onFocus","blur input":"_onBlur","click .icon.left":"_onLeftIconClicked","click .icon.right":"_onRightIconClicked"},defaults:{busyWhileValidating:!1,showValidationErrorIcon:!0,selectOnFocus:!1,leftIcon:null,rightIcon:null,disabled:!1,leftIconClickable:!1,rightIconClickable:!1},initialValue:null,config:null,placeholder:null,initialize:function(e){this.config=l.a.extend({},this.defaults,e),this.config.filter&&(this.config.filter instanceof RegExp||(this.config.filter=null,console.error("EditorView expected a regex as filter in constructor config"))),this.$input=r()(this.inputTpl(this)),this.config.name&&this.$input.attr("name",this.config.name),this.config.inputAttributes&&this.$input.attr(this.config.inputAttributes),this.config.placeholder&&(this.placeholder=this.config.placeholder),this.config.disabled&&this.setDisabled(!0),this.setValue("",!0),this._validationCounter=0},_onKeypress:function(e){this.config.filter&&this.filterText(e)},_onKeyup:function(e){27===e.keyCode&&(this.setValue(this.tempValue),this.$input.focusout().blur())},_onInput:function(){this.trigger("input",this.getValue())},_onFocusIn:function(e){this.trigger("focusIn",e),this.$el.addClass("sj-editor-focused"),r()(e.target).is("input")&&(this.tempValue=this.$input.val()),this.config.selectOnFocus&&l.a.delay(this.setSelection.bind(this)),this.stopValidation()},focus:function(){this.$input[0].focus()},_onFocus:function(){this.trigger("focus")},_onFocusOut:function(e){this.trigger("focusOut",e),this.$el.removeClass("sj-editor-focused"),l.a.isFunction(this.config.validationFunc)&&this._validateOnBlur()},_validateOnBlur:function(){this.validate(this.getValue())},blur:function(){this.$input[0].blur()},_onBlur:function(){this.trigger("blur")},_onLeftIconClicked:function(e){r()(e.target).closest(".clickable").length>0&&this.trigger("iconclick:left")},_onRightIconClicked:function(e){r()(e.target).closest(".clickable").length>0&&this.trigger("iconclick:right")},_updateIcons:function(){var e;this.config.leftIcon&&(e=this.config.leftIconClickable&&!this.getDisabled(),this.setLeftIcon(this.config.leftIcon,e)),this.config.rightIcon&&(e=this.config.rightIconClickable&&!this.getDisabled(),this.setRightIcon(this.config.rightIcon,e))},render:function(){return this.$el.html(this.$input),this.delegateEvents(),this.$el.addClass("sj-editor"),this._updateIcons(),this.toggleError(this.hasError()),this},setDisabled:function(e){this.$input.prop("disabled",!0===e),this.$el.toggleClass("sj-editor-disabled",!0===e),this._updateIcons(),!0===e&&this.toggleError(!1)},getDisabled:function(){return this.$input.prop("disabled")},setValue:function(e,t){return(l.a.isUndefined(e)||l.a.isNull(e))&&(e=""),e=String(e),this.$input.val(e),t&&(this.initialValue=e,this.toggleError(!1)),this},getValue:function(){return this.$input.val()},setPlaceholder:function(e){var t=e||this.placeholder;t&&this.$input.attr("placeholder",t)},unsetPlaceholder:function(){this.$input.attr("placeholder",null)},setLeftIcon:function(e,t){this.$("span.icon.left").remove(),e&&(fr(e,"left",t).prependTo(this.$el),this.$el.addClass("sj-editor-icon"))},setRightIcon:function(e,t){this.$("span.icon.right").remove(),e&&(fr(e,"right",t).appendTo(this.$el),this.$el.addClass("sj-editor-icon"))},remove:function(){return window.cancelAnimationFrame(this._requestId),this._tooltip&&this._tooltip.remove(),a.a.View.prototype.remove.call(this),this},showTooltip:function(){this.hideTooltip(),this.config.tooltipHtml&&(this._tooltip=new Bi({relatedEl:this.$el,html:this.config.tooltipHtml}),this._requestId=window.requestAnimationFrame(function(){this._tooltip.render()}.bind(this)))},hideTooltip:function(){window.cancelAnimationFrame(this._requestId),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)},setTooltipHtml:function(e){return this.config.tooltipHtml=e,this},filterText:function(e){var t=String.fromCharCode(e.which||e.keyCode);this.config.filter.test(t)&&(e.preventDefault(),this.trigger("filter:error",t))},setSelection:function(e){e||(e=this.getValue().length),this.$el.hasClass("sj-editor-focused")||this.$input.focus(),this.$input[0].setSelectionRange(0,e)},isDirty:function(){return this.getValue()!==this.initialValue},validate:function(){var e,t=r.a.Deferred(),n=this.getValue(),i=++this._validationCounter;if(this.getDisabled())e=t.resolve().promise();else if(l.a.result(this.config,"required")&&0===n.length)e=t.reject().promise();else if(l.a.isFunction(this.config.validationFunc)&&this.isDirty()){if(!(e=this.config.validationFunc(n,this))||!l.a.isFunction(e.then))throw new Error("The validation function doesn't return a promise.");this.config.busyWhileValidating&&this.setRightIcon("icon-validation-busy")}else e=t.resolve().promise();return this._isValidating=!0,e.done(function(){this._validationCounter===i&&(this._isValidating=!1,this.trigger("validate:success",n),this.toggleError(!1))}.bind(this)).fail(function(e,t){this._validationCounter===i&&(this._isValidating=!1,this.trigger("validate:error",n,e,t),this.toggleError(!0))}.bind(this))},stopValidation:function(){this._isValidating&&(this._isValidating=!1,this._validationCounter++,this.config.busyWhileValidating&&(this._hasError?this.toggleError(!0):this.setRightIcon(null)))},toggleError:function(e){this._hasError=e,this.$el.toggleClass("error",e),this.config.showValidationErrorIcon?this._hasError?this.setRightIcon("icon-validation-error",!1):this.setRightIcon(this.config.rightIcon,this.config.rightIconClickable&&!this.getDisabled()):this.config.busyWhileValidating&&this.setRightIcon(null)},getInput:function(){return this.$input},hasError:function(){return!!this._hasError}}),gr=pr.extend({inputTpl:l.a.template('<textarea rows="1"></textarea>'),tooltipAutohideTimeout:3e3,events:l.a.extend({},pr.prototype.events,{"keypress textarea":"_onKeypress","click textarea":"_stopPropagation","dblclick textarea":"_stopPropagation","touchstart textarea":"_stopPropagation","touchend textarea":"_stopPropagation","longpress textarea":"_stopPropagation","mouseup textarea":"_stopPropagation","mousedown textarea":"_stopPropagation","MSPointerDown textarea":"_stopPropagation","MSPointerUp textarea":"_stopPropagation","MSHoldVisual textarea":"_stopPropagation","pointerup textarea":"_stopPropagation","pointerdown textarea":"_stopPropagation","contextmenu textarea":"_stopPropagation","blur textarea":"_blur","focus textarea":"_constrainDimensions","keyup textarea":"_keyup","paste textarea":"_paste"}),initialize:function(){pr.prototype.initialize.apply(this,arguments),this.config.pasteFilter&&(this.config.pasteFilter instanceof RegExp||(this.config.pasteFilter=null,console.error("Config ignored: 'pasteFilter' config should be a Regular Expression!"))),this.listenTo(this,"filter:error",this.onFilter)},render:function(){return pr.prototype.render.apply(this,arguments),this.$el.addClass("sj-inline-editor"),this},remove:function(){return this._tooltip&&this._stopTooltipAutohide(),pr.prototype.remove.call(this),this},save:function(e){this.trigger("done",e)},_paste:function(e){var t;if(this.config.pasteFilter){if(e.preventDefault(),e.originalEvent.clipboardData)t=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;t=window.clipboardData.getData("Text")}t=t.replace(this.config.pasteFilter," "),this._insert(t),this.trigger("paste",e)}},_insert:function(e){var t,n,i=this.$input.val(),r=this.$input[0];t=r.selectionStart,n=r.selectionEnd,this.$input.val(i.substring(0,t)+e+i.substring(n)),r.selectionStart=t+e.length,r.selectionEnd=t+e.length},_onKeypress:function(e){13===e.which&&e.preventDefault(),pr.prototype._onKeypress.apply(this,arguments),this._constrainDimensions()},_constrainDimensions:function(){var e=this.$input[0];e.scrollWidth===e.clientWidth&&this.$input.css("width",""),e.scrollHeight===e.clientHeight&&this.$input.css("height",""),e.scrollWidth>e.clientWidth&&this.$input.css("width",e.scrollWidth),e.scrollHeight>e.clientHeight&&this.$input.css("height",e.scrollHeight)},_blur:function(e){this.save(e)},_stopPropagation:function(e){e.stopPropagation()},_keyup:function(e){13===e.which?this.save(e):27===e.which?this.trigger("abort",e):this._constrainDimensions()},_stopTooltipAutohide:function(){this._autoHideTimeout&&(clearTimeout(this._autoHideTimeout),this._autoHideTimeout=null)},onFilter:function(){this.showTooltip(),this._autoHideTimeout=setTimeout(this.hideTooltip.bind(this),this.tooltipAutohideTimeout)}}),mr=pr.extend({initialize:function(e){pr.prototype.initialize.apply(this,arguments),e&&(e.readonly&&(this.$input.prop("readonly",!0),this.$el.addClass("sj-text-editor-readonly")),e.autocomplete&&this.$input.prop("autocomplete",e.autocomplete))},render:function(){return pr.prototype.render.apply(this,arguments),this.$el.addClass("sj-text-editor"),this}}),vr=mr.extend({initialDisabled:null,initialize:function(e){mr.prototype.initialize.apply(this,arguments),this.$input.attr("type","password"),this.initialDisabled=!!e&&!!e.disabled},isDirty:function(){return mr.prototype.isDirty.call(this)||this.initialDisabled!==this.getDisabled()},render:function(){return mr.prototype.render.call(this),this.config.disableAutoComplete&&this.$el.prepend(r()('<input type="text" style="display: none"><input type="password" style="display: none">')),this},_validateOnBlur:function(){""!==this.getValue()?this.validate(this.getValue()):this.toggleError(!1)}});var yr,wr,br,_r,xr=mr.extend({_tags:void 0,_separator:/[\s,;]+/,defaults:l.a.extend({},mr.prototype.defaults,{submitOnEnter:!0,showValidationErrorIcon:!1}),events:(yr={"keypress input":"_onKeypress","keyup .tag button":"onKeyupTag","keydown .tag button":"onKeyDownTag","keydown input":"_onKeydown","click .icon-removetag":"onRemoveTag","click .tag":"onClickTag",click:"onClick","focus .tag button":"onFocusButtonTag","blur .tag button":"onBlurButtonTag","keyup input":"_onKeyup","blur input":"_onBlur"},wr=mr,br=l.a.result(wr.prototype,"events"),_r=l.a.extend(l.a.clone(br),yr),l.a.intersection(Object.keys(br),Object.keys(yr)).forEach((function(e){_r[e]=function(t){var n,i,r,o;return l.a.extend(t,{isDelegationStopped:l.a.constant(!1),stopDelegation:function(){this.isDelegationStopped=l.a.constant(!0)}}),n=e,n=l.a.isFunction(n)?n:yr[e],i=(n=l.a.isFunction(n)?n:this[yr[e]]).apply(this,arguments),l.a.result(t,"isDelegationStopped")||(o=r=br[e],i=(o=l.a.isFunction(o)?o:wr.prototype[r]).apply(this,arguments)),i}})),_r),initialize:function(){mr.prototype.initialize.apply(this,arguments),this._tags=[],this._tagCreationEnabled=!0},render:function(){return mr.prototype.render.apply(this,arguments),this.$el.addClass("taglist"),l.a.each(this._tags,function(e){r()(this._tagTpl({value:e})).insertBefore(this.$input)}.bind(this)),this},_tagTpl:l.a.template('<span class="tag" title="<%- value %>"><button type="button"><%- value %></button><span class="icon-removetag" /></span>'),setValue:function(e){var t,n=this._getEditorValue();Array.isArray(e)||(e=[e]);do{t=this.$(".tag").first(),this.removeTag(t)}while(t.length);return e=n.split(this._separator).concat(e),this._buildTags(e),this},_setEditorValue:function(){mr.prototype.setValue.apply(this,arguments)},_getEditorValue:function(){return mr.prototype.getValue.call(this)},createTags:function(){return this._buildTags(this._getEditorValue().split(this._separator))},_buildTags:function(e){if(e=l.a.uniq(l.a.compact(e)),this._setEditorValue(""),!e.length)return r.a.Deferred().resolve().promise();var t=l.a.map(e,function(e){var t=r.a.Deferred();return this.validateTag(e).done(function(){this.createTag(e),t.resolve()}.bind(this)).fail(function(){t.reject(e)}.bind(this)),t}.bind(this)),n=r.a.Deferred(),i={all:t.length,failed:0,done:0,notCreatedTags:[]};return l.a.each(t,function(e){e.done((function(){i.done++})).fail((function(e){i.notCreatedTags.push(e),i.failed++}))}.bind(this)),i.failed?(this._setEditorValue(i.notCreatedTags.join(" ")),this.trigger("validate:error"),this.toggleError(!0),n.reject(i)):(this.trigger("validate:success"),this.toggleError(!1),n.resolve(i)),n},createTag:function(e){var t;return e&&this._tags.indexOf(e)<0&&(this._tags.push(e),r()(this._tagTpl({value:e})).insertBefore(this.$input),this.unsetPlaceholder(),t=!0),t},validateTag:function(e){var t,n=r.a.Deferred();return n.done(function(){this.trigger("tag:success",e)}.bind(this)).fail(function(){this.trigger("tag:error",e)}.bind(this)),l.a.isFunction(this.config.tagValidationFunc)?(t=this.config.tagValidationFunc(e,this)).then&&l.a.isFunction(t.then)?n=t:t?n.resolve():n.reject():n.resolve(),n},onKeyDownTag:function(e){e.keyCode===Yi.backspace&&e.preventDefault()},onKeyupTag:function(e){var t=this.$(e.target).closest(".tag");switch(e.keyCode){case Yi.leftArrow:t.prev().find("button").focus();break;case Yi.rightArrow:var n=t.next().find("button");(n=n.length?n:this.$input).focus();break;case Yi.backspace:this.removeTag(t.prev(),!0);break;case Yi.delete:this.removeTag(t,!1);break;case Yi.escape:this.$(e.target).blur()}},onRemoveTag:function(e){this.removeTag(this.$(e.target).closest(".tag"))},removeTag:function(e,t){if(e.length){var n=e.text(),i=e.next().find("button");i=i.length?i:this.$input,this._tags.splice(this._tags.indexOf(n),1),e.remove(),this.validate(),i.focus(),0===this._tags.length&&this.setPlaceholder()}else t||this.$input.focus()},_onKeydown:function(e){if(!this._tags.length||e.shiftKey||e.keyCode!==Yi.leftArrow&&e.keyCode!==Yi.backspace)delete this._caretOut;else{var t;if("selectionStart"in e.target)t=e.target.selectionStart;else if(document.selection){e.target.focus();var n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-e.target.value.length),t=n.text.length-i}0===t&&(this._caretOut=!0)}},_onKeyup:function(e){this._caretOut&&(delete this._caretOut,e.keyCode===Yi.backspace?this.removeTag(this.$(".tag:last"),!0):this.$(".tag:last button").focus()),this.trigger("keyup",e)},_onKeypress:function(e){var t=String.fromCharCode(e.which||e.keyCode),n=!this.config.submitOnEnter;if(this._separator.test(t)){if(e.stopDelegation(),!this._tagCreationEnabled)return void(e.keyCode===Yi.enter&&n&&e.preventDefault());this.createTags().always((function(t){(n||e.keyCode!==Yi.enter||t)&&e.preventDefault()}))}},setTagCreationEnabled:function(e){this._tagCreationEnabled=!!e},_onBlur:function(){this.createTags()},onFocusButtonTag:function(e){this.$(e.target).closest(".tag").addClass("tag-focused")},onBlurButtonTag:function(e){this.$(e.target).closest(".tag").removeClass("tag-focused")},onClickTag:function(e){e.stopPropagation()},onClick:function(){this.$input.focus()},remove:function(){return r.a.removeData(this.$input,"width"),mr.prototype.remove.apply(this,arguments)},getValue:function(){return l.a.clone(this._tags)},setSelection:function(e){l.a.isUndefined(e)&&(e=this.$input.val().length),mr.prototype.setSelection.call(this,e)},validate:function(){return this.createTags().then(function(){return mr.prototype.validate.apply(this,arguments)}.bind(this))}}),kr=n(13),Er=n.n(kr),Sr=Q.View.extend({tagName:"label",viewClass:"sj-checkbox",events:{"change :checkbox":"_check"},defaults:{disabled:!1,checked:!1,text:""},template:l.a.template(Er.a),initialize:function(e){this.options=l.a.defaults(e||{},this.defaults),this._disabled=l.a.defaults(this.options,this.defaults).disabled,this._checked=l.a.defaults(this.options,this.defaults).checked,this._initalValue=this._checked,this.$el.addClass(this.viewClass)},render:function(){return this.$el.html(this.template({text:l.a.result(this.options,"text")})),this.$input=this.$el.find("input"),this.$input.attr("name",this.options.name),this.setChecked(this._checked),this.setDisabled(this._disabled),this.delegateEvents(),this},setChecked:function(e,t){this._checked=!0===e,t&&(this._initalValue=this._checked),this.$input&&this.$input.prop("checked",this._checked)},setDisabled:function(e){this._disabled=!0===e,this.$input&&(this.$el.toggleClass("disabled",this._disabled),this.$input.prop("disabled",this._disabled))},getValue:function(){return this._checked},isDirty:function(){return this._initalValue!==this._checked},_check:function(e){this._checked=r()(e.target).prop("checked"),this.trigger("check",this._checked)},toggleError:function(e){this.$el.toggleClass("error",e)}}),Tr=n(14),Cr=n.n(Tr),jr=Sr.extend({viewClass:"sj-toggle",template:l.a.template(Cr.a)}),Dr=a.a.View.extend({className:"menubar",defaults:{items:{}},initialize:function(e){this.options=l.a.defaults(e||{},this.defaults),this._createItems(this.options.items)},_toggleClass:function(e,t){var n=e.$el;n.toggleClass("disabled",t),n.prev().toggleClass("disabled",t)},toggle:function(e,t){l.a.each(this.items,(function(n,i){i.match(e)&&this._toggleClass(n,!t)}),this)},enable:function(e){this.toggle(e,!0)},disable:function(e){this.toggle(e,!1)},disableAll:function(){l.a.each(this.items,function(e){this._toggleClass(e,!0)}.bind(this))},setActive:function(e){this.$el.toggleClass("active",e)},setItems:function(e){this._createItems(e),this.render()},render:function(){var e=Object.keys(this.items);return this.$el.contents().detach(),l.a.each(e,(function(e,t){var n=this.items[e];t>0&&this.$el.append(r()('<div class="menubar-separator" />')),this.$el.append(n.render().$el),l.a.isFunction(n.isDisabled)&&this._toggleClass(n,n.isDisabled()),n.delegateEvents()}),this),this},remove:function(){return this._removeItems(),a.a.View.prototype.remove.apply(this,arguments)},_createItems:function(e){this._removeItems(),this.items=l.a.clone(e),l.a.each(this.items,(function(e){if(!(e instanceof a.a.View))throw new Error("nothing else than Backbone.View based menubar items allowed");this.listenTo(e,"state",function(t){this._toggleClass(e,!t)}.bind(this))}),this)},_removeItems:function(){l.a.each(this.items,(function(e){this.stopListening(e),e.remove()}),this)}});function Or(e){var t;if(!l.a.isString(e))throw new Error("Only strings are allowed as position values.");if(2!==(t=l.a.uniq(e.trim().split(/ +/))).length)throw new Error("A position should consist of exactly two values");if(l.a.difference(t,["top","right","bottom","left"]).length)throw new Error("A position only supports top, right, bottom and left.");return t}function Pr(e,t,n){return e<=t?e/2-t/2:n+t>e?Math.max(0,e/2-t/2,n-t):n}function Ar(e,t,n,i,r){var o=w(),a=y(),s=function(e){return e?e.getBoundingClientRect():{top:0,left:0,bottom:y(),right:w()}}(r),l=t.indexOf("left")>-1?e.left:e.right,c=t.indexOf("top")>-1?e.top:e.bottom,u={};return l+=i.h,c+=i.v,n.indexOf("left")>-1?(u.left=l-s.left,u.width=o-l):(u.right=s.right-l,u.width=l),n.indexOf("top")>-1?(u.top=c-s.top,u.height=a-c):(u.bottom=a-(c-s.top),u.height=c),u}var Mr=function(e,t){return e.length?function(e,t,n){return{left:Pr(t.width,e.width,n.left),top:Pr(t.height,e.height,n.top)}}(e[0].getBoundingClientRect(),{width:w(),height:y()},t):t},Ir=function(e,t,n,i,r){if(!e)throw new Error("Anchor element required for alignment");if(t=Or(t),n=Or(n),i||(i={}),i=l.a.defaults(i,{v:0,h:0}),!l.a.isNumber(i.h)||!l.a.isFinite(i.h))throw new Error("Horizontal offset offset.h should be a finite number");if(!l.a.isNumber(i.v)||!l.a.isFinite(i.v))throw new Error("Vertical offset offset.v should be a finite number");return Ar(e.getBoundingClientRect(),t,n,i,r)},Fr=ce.extend({events:l.a.extend({},ce.prototype.events,{mousemove:"_onMouseMove",mouseleave:"_onMouseLeave"}),initialize:function(e){this.text=e.text,this._onlyMobileSmall=e.onlyMobileSmall,this.listenTo(this,"state",this.onChangeActionState),this._selected=!1},render:function(){return this.$el.empty().html(l.a.result(this,"text")).addClass("sj-menuitem"),this._onlyMobileSmall&&this.el.classList.add("show-on-mobile-small"),this.renderActionState(this.getActionState()),this},renderActionState:function(e){this.$el.toggleClass("sj-menuitem-disabled",!e)},isDisabled:function(){return!this.getActionState()},canSelect:function(){return!!this.getActionState()},isSelected:function(){return this._selected},setSelected:function(e){(e=!!e)===this.isSelected()||e&&!this.canSelect()||(this._selected=e,this.$el.toggleClass("sj-menuitem-selected",this._selected),this.trigger("selected",this._selected))},_onMouseMove:function(){this.setSelected(!0)},_onMouseLeave:function(){this.setSelected(!1)},onChangeActionState:function(e){!e&&this.isSelected()&&this.setSelected(!1),this.renderActionState(e)}}),zr=a.a.View.extend({defaults:{itemClass:Fr},initialize:function(e){e=e||{},this._config=l.a.extend({},this.defaults,l.a.omit(e,"items")),this._isDisabled=!0,this._createItems(e.items||[]),this._preventEvent=this._preventEvent.bind(this),this._eventSuffix=".menu"+this.cid,this._registeredGlobalEvents=!1},render:function(){return this.$el.contents().detach(),this.$el.addClass("sj-menu"),l.a.each(this.items,function(e){this.$el.append(e.render().$el)}.bind(this)),this},remove:function(){return this._removeItems(),this._unregisterGlobalEvents(),a.a.View.prototype.remove.apply(this,arguments)},isDisabled:function(){return this._isDisabled},open:function(e){var t;e=l.a.extend({},{left:0,top:0},e),this.el.classList.remove("sj-menu-hidden"),this.render().$el.appendTo(e.parent||"body"),e=e.anchor?Ir(e.anchor,e.alignment||"left bottom",e.origin||"left top",e.offset,e.parent):Mr(this.$el,e),t=l.a.pick(e,"top","left","bottom","right"),t=l.a.extend(t,{"max-height":e.height||"","max-width":e.width||""}),this.$el.css(t),this.trigger("open"),this._registerGlobalEvents()},close:function(){this.el.classList.add("sj-menu-hidden"),l.a.invoke(this.items,"setSelected",!1),this.trigger("close"),this._unregisterGlobalEvents()},setItems:function(e){this._createItems(e),this.render()},_removeItems:function(){l.a.each(this.items,function(e){e.remove(),this.stopListening(e)}.bind(this))},_createItems:function(e){this._removeItems(),this.items=l.a.map(e,function(e){var t=new(e.itemClass||this._config.itemClass)(l.a.omit(e,"itemClass"));return this.listenTo(t,"executed",this._onItemExecuted),this.listenTo(t,"selected",l.a.partial(this._onItemSelected,t)),this.listenTo(t,"state",this._onItemState),t}.bind(this)),this._onItemState(),this._selectedItem=null},_registerGlobalEvents:function(){this._registeredGlobalEvents||(document.addEventListener("wheel",this._preventEvent,{passive:!1,capture:!0}),document.addEventListener("contextmenu",this._preventEvent),r()(document).on("mousedown"+this._eventSuffix,this._handleMousedown.bind(this)).on("keydown"+this._eventSuffix,this._handleKeydown.bind(this)).on("keyup"+this._eventSuffix,this._handleKeyup.bind(this)),r()(window).on("resize"+this._eventSuffix,this._handleResize.bind(this)),this._registeredGlobalEvents=!0)},_unregisterGlobalEvents:function(){this._registeredGlobalEvents&&(document.removeEventListener("wheel",this._preventEvent,{passive:!1,capture:!0}),document.removeEventListener("contextmenu",this._preventEvent),r()(document).off(this._eventSuffix),r()(window).off(this._eventSuffix),this._registeredGlobalEvents=!1)},_preventEvent:function(e){var t=this.el;t.contains(e.target)&&t.scrollHeight!==t.clientHeight||e.preventDefault()},_handleMousedown:function(e){r()(e.target).closest(this.$el).length||this.close()},_handleKeyup:function(e){e.which===Yi.enter&&this._selectedItem&&(e.preventDefault(),this._selectedItem.execute())},_handleKeydown:function(e){l.a.contains(Yi.scrollKeys,e.which)&&e.preventDefault(),e.which===Yi.escape?this.close():e.which===Yi.upArrow?this._selectPreviousItem():e.which===Yi.downArrow?this._selectNextItem():e.which===Yi.tab?(e.shiftKey?this._selectPreviousItem():this._selectNextItem(),e.preventDefault()):e.which===Yi.pageUp||e.which===Yi.home?this._selectFirstItem():e.which!==Yi.pageDown&&e.which!==Yi.end||this._selectLastItem(),e.which===Yi.enter&&e.preventDefault()},_handleResize:function(){this.close()},_getSelectableItems:function(){return l.a.filter(this.items,(function(e){return e.canSelect()}))},_selectNextItem:function(){var e=this._getSelectableItems(),t=e.indexOf(this._selectedItem),n=t<e.length-1?t+1:0;n>-1&&n<e.length&&e[n].setSelected(!0)},_selectPreviousItem:function(){var e=this._getSelectableItems(),t=e.indexOf(this._selectedItem),n=t>0?t-1:e.length-1;n>-1&&n<e.length&&e[n].setSelected(!0)},_selectFirstItem:function(){var e=this._getSelectableItems();e.length&&e[0].setSelected(!0)},_selectLastItem:function(){var e=this._getSelectableItems();e.length&&e[e.length-1].setSelected(!0)},_onItemExecuted:function(){this.close()},_onItemState:function(){var e=l.a.some(this.items,(function(e){return!l.a.isFunction(e.isDisabled)||!e.isDisabled()})),t=this._isDisabled;this._isDisabled=!e,this.$el.toggleClass("sj-menu-disabled",this._isDisabled),t!==this._isDisabled&&this.trigger("state",!this._isDisabled)},_onItemSelected:function(e,t){t?(this._selectedItem&&this._selectedItem.setSelected(!1),this._selectedItem=e):this._selectedItem===e&&(this._selectedItem=null)}}),Lr=a.a.View.extend({initialize:function(e){this.config=e,this._menuOpen=!1;var t=l.a.pick(e,"text","iconClass","className");l.a.has(e,"buttonAttributes")&&(t.attributes=e.buttonAttributes),this._button=new fe(t),this.listenTo(this._button,"mousedown",this._onMouseDown),this.listenTo(this._button,"click",this._onClick),this._menu=new zr(l.a.pick(e,"items")),this.listenTo(this._menu,"open",this._onMenuOpen),this.listenTo(this._menu,"close",this._onMenuClose),this.listenTo(this._menu,"state",this._onMenuState)},render:function(){return this.$el.addClass("sj-menu-button"),this._button.render().$el.appendTo(this.$el),this._onMenuState(!this._menu.isDisabled()),this},remove:function(){return this._button.remove(),this._menu.remove(),a.a.View.prototype.remove.apply(this)},isDisabled:function(){return this._menu.isDisabled()},_onMenuOpen:function(){this.$el.addClass("sj-menu-button-open"),this._menuOpen=!0},_onMenuClose:function(){this.$el.removeClass("sj-menu-button-open"),this._menuOpen=!1},_onMenuState:function(e){this.$el.toggleClass("sj-menu-button-disabled",!e),this.trigger("state",e)},_onMouseDown:function(e){this._menuOpen&&e.stopPropagation()},_onClick:function(){var e={anchor:this._button.el,parent:this.el};this.config.alignment&&(e.alignment=this.config.alignment),this.config.origin&&(e.origin=this.config.origin),this._menuOpen?this._menu.close():this._menu.open(e)}}),Nr=Fr.extend({tagName:"label",initialize:function(e){Fr.prototype.initialize.call(this,e),this._fileInput=new me(e),this.listenTo(this._fileInput,"add",this._onFileAdd)},render:function(){return Fr.prototype.render.apply(this,arguments),this.$el.append(this._fileInput.render().$el),this},_onClick:function(e){this.trigger("click",e)},_onFileAdd:function(e){this.execute(e)}}),Vr=Dr.extend({initialize:function(e){var t={items:{"new/upload":new ve({state:e.states.upload,text:O.bind("header.item.upload"),iconClass:"icon-upload",tracking:{op:"upload",target:"toolbar"},attributes:{"data-qa":"menubar_upload"}}),"upload/more":new Lr({text:O.bind("header.item.upload"),iconClass:"icon-upload",alignment:"bottom right",origin:"top right",buttonAttributes:{"data-qa":"menubar_upload_more"},items:[{attributes:{"data-qa":"menubar_upload_files"},state:e.states.uploadFiles,itemClass:Nr,text:O.bind("header.item.upload.files"),tracking:{op:"upload-files",target:"toolbar"}},{attributes:{"data-qa":"menubar_upload_folder"},state:e.states.uploadFolder,itemClass:Nr,text:O.bind("header.item.upload.folder"),directories:!0,tracking:{op:"upload-folder",target:"toolbar"}}]}),shareFolder:new fe({state:e.states.shareFolder,text:O.bind("header.item.share"),iconClass:"icon-share-item",tracking:{op:"share-folder",target:"toolbar"},attributes:{"data-qa":"menubar_share_folder"}}),shareFolderEdit:new fe({state:e.states.shareFolderEdit,text:O.bind("header.item.share.edit"),iconClass:"icon-share-item",tracking:{op:"share-folder-edit",target:"toolbar"},attributes:{"data-qa":"menubar_share_folder_edit"}}),restoreFolder:new fe({state:e.states.restoreFolder,text:O.bind("header.item.restore"),iconClass:"icon-restore-snapshot",tracking:{op:"restore-snapshot",target:"toolbar"},attributes:{"data-qa":"menubar_snapshot_restore"}}),restoreSelection:new fe({state:e.states.restoreSelection,text:O.bind("filemanager.restore.prompt.title"),iconClass:"icon-restore-snapshot",tracking:{op:"restore-snapshot",target:"toolbar",data:"selection"},attributes:{"data-qa":"menubar_snapshot_restore_selection"}}),selectionShare:new fe({state:e.states.shareSelected,text:O.bind("header.selection.share"),iconClass:"icon-share-item",tracking:{op:"share",target:"toolbar",data:"selection"},attributes:{"data-qa":"menubar_selection_share"}}),selectionShareEdit:new fe({state:e.states.shareEdit,text:O.bind("header.selection.share.edit"),iconClass:"icon-share-item",tracking:{op:"share-edit",target:"toolbar",data:"selection"},attributes:{"data-qa":"menubar_selection_share_edit"}}),"select/download":new fe({state:e.states.download,text:O.bind("common.download"),iconClass:"icon-download-selection",attributes:{"data-qa":"menubar_selection_download"}}),"select/more":new Lr({text:O.bind("filemanager.more"),iconClass:"icon-more",className:"show-on-mobile-small",alignment:"bottom right",origin:"top right",buttonAttributes:{"data-qa":"menubar_selection_more"},items:[{text:O.bind("header.item.upload"),state:e.states.upload,itemClass:Nr,onlyMobileSmall:!0,attributes:{"data-qa":"menubar_upload"},tracking:{op:"upload",target:"toolbar"}},{text:O.bind("header.item.upload.files"),state:e.states.uploadFiles,itemClass:Nr,onlyMobileSmall:!0,attributes:{"data-qa":"menubar_upload_files"},tracking:{op:"upload-files",target:"toolbar"}},{text:O.bind("header.item.upload.folder"),state:e.states.uploadFolder,itemClass:Nr,onlyMobileSmall:!0,attributes:{"data-qa":"menubar_upload_folder"},directories:!0,tracking:{op:"upload-folder",target:"toolbar"}},{text:O.bind("header.item.share"),state:e.states.shareFolder,onlyMobileSmall:!0,attributes:{"data-qa":"menubar_share_folder"},tracking:{op:"share-folder",target:"toolbar"}},{text:O.bind("header.item.share.edit"),state:e.states.shareFolderEdit,onlyMobileSmall:!0,attributes:{"data-qa":"menubar_share_folder_edit"},tracking:{op:"share-folder-edit",target:"toolbar"}},{text:O.bind("header.item.restore"),state:e.states.restoreFolder,onlyMobileSmall:!0,attributes:{"data-qa":"menubar_snapshot_restore"},tracking:{op:"restore-snapshot",target:"toolbar"}},{text:O.bind("filemanager.restore.prompt.title"),state:e.states.restoreSelection,onlyMobileSmall:!0,attributes:{"data-qa":"menubar_snapshot_restore_selection"},tracking:{op:"restore-snapshot",target:"toolbar",data:"selection"}},{text:O.bind("header.selection.share"),state:e.states.shareSelected,onlyMobileSmall:!0,attributes:{"data-qa":"menubar_selection_share"},tracking:{op:"share",target:"toolbar",data:"selection"}},{text:O.bind("header.selection.share.edit"),state:e.states.shareEdit,onlyMobileSmall:!0,attributes:{"data-qa":"menubar_selection_share_edit"},tracking:{op:"share-edit",target:"toolbar",data:"selection"}},{text:O.bind("common.download"),state:e.states.download,onlyMobileSmall:!0,attributes:{"data-qa":"menubar_selection_download"}},{text:O.bind("filemanager.selectall"),state:e.states.selectAll,tracking:function(){return{op:"select-all",target:"toolbar",viewmode:e.viewmode()}},attributes:{"data-qa":"menubar_select_all"}},{text:O.bind("filemanager.copy.button.title"),state:e.states.copy,tracking:{op:"copy-start",target:"toolbar"},attributes:{"data-qa":"menubar_copy"}},{text:O.bind("filemanager.move.button.title"),state:e.states.move,tracking:{op:"move-start",target:"toolbar"},attributes:{"data-qa":"menubar_move"}},{text:O.bind("filemanager.rename.button.title"),state:e.states.rename,tracking:function(){return{op:"rename-start",target:"toolbar",viewmode:e.viewmode()}},attributes:{"data-qa":"menubar_rename"}},{text:O.bind("header.item.unzip"),state:e.states.unzip,tracking:function(){return{op:"unzip-start",target:"toolbar",viewmode:e.viewmode()}},attributes:{"data-qa":"menubar_unzip"}},{text:O.bind("header.item.newfolder"),state:e.states.newFolder,tracking:{op:"new-folder",target:"toolbar"},attributes:{"data-qa":"menubar_new_folder"}},{text:O.bind("filemanager.contextmenu.git.create"),state:e.states.gitCreate,tracking:{op:"git-start",target:"toolbar"},attributes:{"data-qa":"menubar_git"}},{text:O.bind("header.selection.zip"),state:e.states.zip,tracking:{op:"zip-start",target:"toolbar"},attributes:{"data-qa":"menubar_zip"}},{text:O.bind("filemanager.contextmenu.git.info"),state:e.states.gitInfo,tracking:{op:"git-info",target:"toolbar"},attributes:{"data-qa":"menubar_git_info"}},{text:O.bind("common.delete"),state:e.states.delete,tracking:{op:"delete-start",target:"toolbar"},attributes:{"data-qa":"menubar_delete"}}]}),unselect:new fe({state:e.states.unselect,className:"cancel sj-icon-only-button show-on-mobile-small",text:O.bind("header.select.cancel"),iconClass:"icon-unselectall",secondary:!0,tracking:function(){return{op:"select-end",target:"cancel",viewmode:e.viewmode()}},attributes:{"data-qa":"menubar_selection_cancel"}})}};Dr.prototype.initialize.call(this,t)}}),$r=function(e){var t=0,n=l.a.reduce(e,(function(e,t){l.a.isObject(t)||(t={value:t});var n=l.a.extend({},t,{value:Math.max(0,t.value)||0,percent:0});return e.totalSum+=n.value,e.segments.push(n),e}),{totalSum:0,segments:[]});return n.totalSum>0&&l.a.each(n.segments,(function(e,i){var r;e.value>0&&(i===n.segments.length-1?r=100-t:(r=Math.round(e.value/n.totalSum*1e3)/10,t+=r),e.percent=r)})),n},Rr=a.a.View.extend({className:"sj-barchart",initialize:function(e){this.options=l.a.extend({},{values:[],hideEmptySegments:!1},e),this.setValues(this.options.values)},render:function(){return this.$el.empty(),this._data&&this._data.totalSum>0&&l.a.each(this._data.segments,(function(e){var t=r()('<span class="sj-barchart-segment" />');!e.percent&&this.options.hideEmptySegments||(l.a.has(e,"className")&&t.addClass(e.className),t.css("width",e.percent.toFixed(1)+"%"),t.appendTo(this.$el))}),this),this},setValues:function(e){if(!Array.isArray(e))throw new Error("Provided values need to be an array.");this._data=$r(e)}}),Br=n(15),qr=n.n(Br);function Ur(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})}var Hr=Q.View.extend({className:"sj-list-checker",template:l.a.template(qr.a),subviews:function(){var e=Ur(this._initialValue||[]);return this._fields.reduce(function(t,n,i){if(t[n.key])throw new Error("ListChecker: duplicate field key '"+n.key+"'");return t[n.key]={klass:Sr,target:".sj-list-checker-items",appendToTarget:!0,order:i,options:{checked:!!e[n.key],disabled:n.disabled,name:n.key,text:n.displayName,attributes:{"data-key":"key-"+n.key}}},t}.bind(this),{})},initialize:function(e){if(!l.a.isObject(e))throw new Error("ListChecker: opts object is required.");if(!Array.isArray(e.fields))throw new Error("ListChecker: opts.fields must be array.");this._fields=e.fields,this._initialValue=e.initialValue},setValue:function(e,t){var n;if(!Array.isArray(e))throw new Error("ListChecker.setValue: keys-array required.");n=Ur(e),Object.keys(this._subviews).forEach((function(e){this.getSubview(e).setChecked(!!n[e],t)}),this)},getValue:function(){return Object.keys(this._subviews).filter(function(e){return this.getSubview(e).getValue()}.bind(this))},validate:function(){return r.a.Deferred().resolve().promise()},isDirty:function(){return l.a.some(this._subviews,(function(e){return e.view.isDirty()}))}}),Wr={highlightMatches:function(e,t){if(""===e||""===t)return t;e=e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");var n=new RegExp(e,"gi"),i=l.a.uniq(t.match(n));return l.a.each(i,(function(e){n=new RegExp(e,"g"),t=t.replace(n,"<>"+e+"</>")})),t.replace(/<>/g,"<em>").replace(/<\/>/g,"</em>")}},Gr=n(16),Kr=n.n(Gr),Xr=a.a.View.extend({tagName:"ul",className:"sj-radio-group",template:l.a.template(Kr.a),itemTemplate:l.a.template('<span class="sj-radio-text"><%- text %></span>'),events:{"change input[type=radio]":"_onChange"},initialize:function(e){var t=e||{};this._groupId=this.cid,t.items&&this.setItems(t.items,t.initialValue)},setItems:function(e,t){if(!Array.isArray(e))throw new Error("items has to be an array in RadioGroup");if(!e.length)throw new Error("items array is empty in RadioGroup");this.items=e,l.a.isUndefined(t)||(this._initialValue=t,this._value=t),this.render()},render:function(){var e,t;return this.$el.empty(),this.items&&(e=l.a.map(this.items,(function(e,n){return this._value===e.value&&(t=e.value),this.template({itemHtml:e.html||this.itemTemplate({text:e.text}),className:e.className||"",value:n,name:this._groupId})}),this),this.$el.append(e),l.a.isUndefined(t)||this.setValue(t)),this},setValue:function(e){var t;if(l.a.isUndefined(e))throw new Error("RadioGroup setValue() required a value.");if((t=l.a.findIndex(this.items,{value:e}))<0)throw new Error("RadioGroup setValue("+e+") is not allowed");return this.$el.find("input[value="+t+"]").prop("checked",!0),this._value=e,this.getValue()},getValue:function(){return this._value},isDirty:function(){return this._value!==this._initialValue},_onChange:function(e){this._value=this.items[e.target.value].value,this.trigger("change",this._value)}}),Yr={Button:he,IconButton:fe,UploadButton:ve,SimpleDropdown:ye,List:Fe,LazyList:Ti,Tile:Ci,LazyTile:ji,Breadcrumb:Pi,Toast:Vi,Tooltip:Bi,InfoTooltip:qi,Flyout:Ui,Navigation:Gi,OverlayManager:Qi,BaseOverlayView:dr,WaitOverlay:hr,Editor:pr,InlineEditor:gr,TextEditor:mr,PasswordEditor:vr,TaglistEditor:xr,Toggle:jr,Menubar:Dr,AppMenubar:Vr,Menu:zr,BarChart:Rr,Checkbox:Sr,ListChecker:Hr,highlight:Wr,RadioGroup:Xr},Jr=n(17),Qr=n.n(Jr),Zr=Y.extend({tagName:"span",template:l.a.template(Qr.a),events:{click:"onClick"},onClick:function(e){e.preventDefault(),this.trigger("click",e)}}),eo=n(18),to=n.n(eo),no=a.a.View.extend({tagName:"ul",className:"content",events:{"click li":"onSelect"},template:l.a.template([to.a].join("")),render:function(){var e=O.getLanguages().map((function(e){return{value:e,text:O.getInLang("lang.name",e),selected:e===O.getLang()}}));return this.$el.empty().append(this.template({selected:O.getLang(),options:e})),this},onSelect:function(e){var t=r()(e.currentTarget).data("lang");this.trigger("selected",t)}}),io=Yr.Flyout.extend({initialize:function(){this.triggerView=new Zr,this.contentView=new no,this.listenTo(this.contentView,"selected",this._onLanguageSelected),this.listenTo(this.triggerView,"click",this.toggle)},render:function(){return Yr.Flyout.prototype.render.call(this),this.el.classList.add("sj-lang-flyout"),this},_onLanguageSelected:function(e){this.close(),O.getLang()!==e&&this.trigger("change",e)}}),ro=function(){return{help:O.get("help.url"),imprint:O.get("imprint.url"),privacy:O.get("privacy.url"),euCookie:O.get("eu_cookie.url")}},oo=Q.View.extend({id:"footer",template:l.a.template(re.a),templateData:function(){return{hasPoweredBy:!!q.get("hasPoweredBy")&&O.exists("poweredBy.url"),urls:ro()}},subviews:function(){return{languageFlyout:{klass:io,target:".language-target",options:{className:"sj-drop-up-down-flyout sj-drop-up-flyout"},listeners:{change:this._onLanguageChange}}}},_onLanguageChange:function(e){a.a.history.navigate("#lang/"+e,{trigger:!0,replace:!1})}}),ao=n(19),so=n.n(ao),lo=a.a.View.extend({className:"password-page",template:l.a.template(so.a),events:{submit:"login"},initialize:function(e){l.a.has(e,"loginCallback")&&(this.loginCallback=e.loginCallback),this.passwordEditor=new Yr.PasswordEditor({name:"share_password",leftIcon:"icon-password",selectOnFocus:!0}),this.acceptButton=new Yr.Button({text:O.get("login.accept"),attributes:{"data-qa":"login_accept",type:"submit"}})},remove:function(){this.passwordEditor.remove(),this.acceptButton.remove(),a.a.View.prototype.remove.apply(this,arguments)},render:function(e){var t,n;return e&&(t=e.error),t&&(n="empty"===t?O.get("error.password_empty"):"expired"===t?O.get("error.expired"):"password"===t?O.get("error.password"):O.get("error.500")),this.$el.html(this.template({lang:O,shareName:"???",error:n})),this.$(".password-wrapper").append(this.passwordEditor.render().$el),this.$(".password-wrapper").append(this.acceptButton.render().$el),this.passwordEditor.setPlaceholder(O.get("login.placeholder")),this},login:function(e){var t,n;e.preventDefault(),this.acceptButton.disable(),""===(t=this.passwordEditor.getValue())?this.render({error:"empty"}):l.a.isFunction(this.loginCallback)&&(n=this.passwordEditor,this.loginCallback({password:t}).done((function(){n.setValue("")})))}}),co=n(20),uo=n.n(co),ho=a.a.View.extend({className:"error-page",template:l.a.template(uo.a),defaults:{errorCode:500},render:function(e){e||(e={code:this.defaults.errorCode});var t,n,i=e.code,r={400:[O.get("error.404"),404],401:[O.get("error.401"),500],403:[O.get("error.403"),500],404:[O.get("error.404"),404],410:[O.get("error.410"),410],500:[O.get("error.500"),500],503:[O.get("error.503"),500]};return r[i]||(i=this.defaults.errorCode),t=r[i][0],n=r[i][1],this.$el.html(this.template({code:i,message:t,mappedCode:n})),this}}),fo=n(21),po=n.n(fo),go=a.a.View.extend({className:"teaser sj-selectable",template:l.a.template(po.a),render:function(){return!!q.get("hasTeaser")&&this.$el.html(this.template({lang:O})),this}}),mo=n(22),vo=n.n(mo),yo=a.a.View.extend({className:"sj-thumbnail",initialize:function(e){if(!(e=e||{}).size)throw new Error("Missing size config");if(this.size={},!isNaN(Number(e.size.width))&&e.size.width>0&&(this.size.width=e.size.width),!isNaN(Number(e.size.height))&&e.size.height>0&&(this.size.height=e.size.height),l.a.isEmpty(this.size))throw new Error("size.width and/or size.height did no pass the check");this.imageUrl=e.imageUrl,this._imageSize=null},_onLoadError:function(){this.trigger("load:error")},renderImage:function(e){this._imageSize={height:e.height,width:e.width},this.el.style.setProperty("background-image","url("+e.src+")"),this.el.style.setProperty("max-width",e.width+"px"),this.el.style.setProperty("max-height",e.height+"px"),this.el.classList.add("image-loaded")},_toggleLoading:function(e){e?this.el.classList.add("sj-thumbnail-loading"):this.el.classList.remove("sj-thumbnail-loading")},render:function(){return this._imageSize||(this._toggleLoading(!0),this.imageUrl(this.size).then(bi).always(this._toggleLoading.bind(this,!1)).then(this.renderImage.bind(this)).fail(this._onLoadError.bind(this))),this},resize:function(e){this._imageSize&&(e.width<=this.size.width&&e.height<=this.size.height||(this._imageSize=null,this.size=e,this.render()))}}),wo=n(23),bo=n.n(wo),_o=Q.View.extend({className:"videoview",template:l.a.template(bo.a),templateData:function(){return{url:this._url}},initialize:function(e){this._url=e.url,this._mimeType=e.mimeType},onAfterRender:function(){var e=this.$("video");""!==e[0].canPlayType(this._mimeType)?e.on("error",this._onError.bind(this)):this._onError()},_onError:function(){this.trigger("error")}}),xo=n(24),ko=n.n(xo),Eo=n(25),So=n.n(Eo),To=Yr.BaseOverlayView.extend({overlayClasses:"imageview-wrapper",overlayTemplate:l.a.template(ko.a),initialize:function(e){this.imageUrl=(e||{}).imageUrl,this.debounceResize=l.a.debounce(this._onResize.bind(this),300),window.addEventListener("resize",this.debounceResize)},render:function(){return this._thumbnail=new yo({imageUrl:this.imageUrl,size:this._getWindowSize()}),this._thumbnail.render(),this.$overlayEl.append(this._thumbnail.$el),this.listenTo(this._thumbnail,"load:error",this._onLoadError),this},_getWindowSize:function(){return{width:E(),height:S()}},_onResize:function(){this._thumbnail&&this._thumbnail.resize(this._getWindowSize())},_onLoadError:function(){this.$overlayEl.html(l.a.template(So.a)({lang:O}))},onBeforeClose:function(){window.removeEventListener("resize",this.debounceResize)}}),Co=a.a.View.extend({className:"shlnk",template:l.a.template(vo.a),sid:null,hasPassword:!1,password:null,download_code:null,infoPromise:null,loginError:null,events:{"click .sj-thumbnail":"onThumbClick"},initialize:function(){this.downloadButton=new Yr.IconButton({text:O.bind("sharelink.buttons.download"),iconClass:"icon-download-folder",className:"download-button"}),this.listenTo(this.downloadButton,"click",this.onDownload),this.onWindowResize=l.a.debounce(function(){this._thumbnail&&this._thumbnail.resize(this.getPreviewSize())}.bind(this),300),window.addEventListener("resize",this.onWindowResize,{passive:!0})},render:function(e){return e&&e.sid&&(this.sid=e.sid),this.$el.contents().detach(),this.sid&&this.getShareInfo().then(this.authenticate.bind(this)).then(this.getShareData.bind(this)).then(this.renderContents.bind(this)).fail(this.showError.bind(this)),this},getShareInfo:function(){return this.infoPromise||(this.infoPromise=r.a.get("/api/sharelink/info",{id:this.sid})),this.infoPromise},authenticate:function(e){return e.has_password&&!this.password?(this.hasPassword=!0,this.showLogin()):null},getShareData:function(){var e={id:this.sid,fields:"name,type,size,ttl,remaining,mime_type"};return this.hasPassword&&(e.password=this.password,e.fields+=",download_code"),r.a.post("/api/sharelink/info",e)},showLogin:function(){var e=r.a.Deferred(),t=new lo({loginCallback:function(t){return this.password=t.password,e.resolve(),e.promise()}.bind(this)});return this.$el.html(t.render({error:this.loginError}).$el),this.$el.append((new go).render().$el),e.promise()},showError:function(e){this.hasPassword&&401===e.status?(this.password=null,this.loginError="password",this.render()):this.trigger("error",e.status)},renderContents:function(e){var t=new On(e,{parse:!0}),n=t.get("group");t.has("download_code")&&(this.download_code=t.get("download_code")),this.$el.html(this.template({lang:O,formatters:z,model:t})),"thumb"===n?(this._thumbnail=new yo({size:this.getPreviewSize(),imageUrl:this.getThumbnailUrl.bind(this)}),this._thumbnail.on("load:error",this._noPreview.bind(this)),this._thumbnail.render(),this.$(".shlnk-media-placeholder").replaceWith(this._thumbnail.$el)):"video"!==n||t.has("download_code")?this._noPreview():(this._video=new _o({mimeType:t.get("mime_type"),url:"/api/sharelink/download?id="+this.sid}),this._video.on("error",this._noPreview.bind(this)),this._video.render(),this.$(".shlnk-media-placeholder").replaceWith(this._video.$el)),this.$(".download-target").replaceWith(this.downloadButton.render().$el)},refreshShareData:function(e){var t={id:this.sid,password:this.password,fields:e};return r.a.post("/api/sharelink/info",t).done(function(e){e.download_code&&(this.download_code=e.download_code),e.remaining&&this.$(".downloads").html(O.get("sharelink.downloads",e.remaining))}.bind(this)).fail(this.showError.bind(this))},onDownload:function(){if(!this.downloadButton.isDisabled()){var e={id:this.sid},t=this;this.download_code&&(e.download_code=this.download_code),this.downloadButton.disable(),u("/api/sharelink/download?"+an(e)),l.a.delay((function(){var e="remaining";t.hasPassword&&(e+=",download_code"),t.refreshShareData(e).done((function(){t.downloadButton.enable()}))}),1e3)}},onThumbClick:function(){this._imageView=new To({imageUrl:this.getThumbnailUrl.bind(this)}),this._imageView.open()},remove:function(){window.removeEventListener("resize",this.onWindowResize,{passive:!0}),this.downloadButton.remove(),this._thumbnail&&this._thumbnail.remove(),this._video&&this._video.remove(),this._imageView&&this._imageView.close(),a.a.View.prototype.remove.apply(this,arguments)},_noPreview:function(){this.$el.addClass("nopreview")},getThumbnailUrl:function(e){var t=l.a.extend({},e);return this.password&&(t.password=this.password),vi.getShareLinkThumbnail(this.sid,t)},getPreviewSize:function(){return{height:this.el.clientHeight,width:this.el.clientWidth}}}),jo=function(e,t){var n=t||"";return(e||"").split("/").filter((function(e){return!!e})).map((function(e){return n+="/"+e,{name:K.urlDecode(e),href:n,title:K.urlDecode(n)}}))},Do=function(e){if("function"!=typeof e)throw new Error("rootNameCallback function required.");return function(t){var n=e();return[{name:n,href:"/",title:n}].concat(jo(t))}},Oo=Object.freeze({error:Object.freeze({ABORT:"abort",EDQUOT:"quota",EXIST:"exists",NETWORK:"network",GENERIC:"generic"}),upload:Object.freeze({NEW:"new",PREPARED:"prepared",CHECKING:"checking",READY:"ready",QUEUED:"queued",WAITING:"waiting",RUNNING:"running",COMPLETE:"complete",CANCELLED:"cancelled",FAILED:"failed",RESUMABLE:"resumable"})}),Po=function(e,t){return new Promise((function(n,i){var r=e.slice(),o=!0,a=setInterval((function(){if(o){if(!r.length)return clearInterval(a),void n();try{o=!1,t(r.shift()).then((function(){o=!0}),(function(e){clearInterval(a),i(e)}))}catch(e){clearInterval(a),i(e)}}}),10)}))};function Ao(e,t,n){var i,o=r.a.Deferred();if(e.isFile)n.fileCount++,e.file((function(t){n.maxFileSize=Math.max(n.maxFileSize,t.size),o.resolve([{file:t,path:e.fullPath}])}),o.reject);else if(e.isDirectory){n.directoryCount++;try{(i=e.createReader(),new Promise((function(e,t){var n=[];!function r(){i.readEntries((function(t){t.length?([].push.apply(n,t),l.a.defer(r)):e(n)}),t)}()}))).then((function(i){if(n.maxDepth=Math.max(n.maxDepth,t),n.maxEntryCount=Math.max(n.maxEntryCount,i.length),i.length){var r=[],a=l.a.after(i.length,(function(){o.resolve(l.a.flatten(r))}));l.a.each(i,(function(e,i){Ao(e,t+1,n).then((function(e){r[i]=e,a()}),o.reject)}))}else o.resolve([{path:e.fullPath}])}),o.reject)}catch(e){o.reject(e)}}return o.promise()}var Mo=function(e){var t={maxDepth:0,maxEntryCount:0,maxFileSize:0,fileCount:0,directoryCount:0};if(!e)throw new Error("no entry-argument was provided");if(!e.isFile&&!e.isDirectory)throw new Error("no FileSystemEntry provided");return Ao(e,0,t).then((function(e){return r.a.Deferred().resolve(e,t)}),(function(e){return l.a.extend(t,{incomplete:1}),r.a.Deferred().reject(e,t)}))},Io=new(a.a.Model.extend({defaults:{decreasing:!1,quality:10},initialize:function(){Object.defineProperty(this,"MAX_QUALITY",{value:10,writable:!1})},increaseQuality:function(){this.set("quality",Math.min(10,this.get("quality")+1)),this.set("decreasing",!1)},decreaseQuality:function(){this.set("quality",Math.max(0,this.get("quality")-1)),this.set("decreasing",!0)},neutralize:function(){this.set("decreasing",!1)}})),Fo=function(){return Io};function zo(e){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lo(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return No(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return No(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function No(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Vo(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}var $o=Oo.error,Ro=B.extend({currentRequest:null,chunkCursor:0,initialize:function(e,t){this.file=e,this.chunkHandler=t,this.metrics=Fo()},run:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n,i,r,o,a,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,i=!1,r=new Promise((function(e,n){t.triggerAbortInterrupt=function(){n($o.ABORT),i=!0}})),o=Lo(t.getChunk()),e.prev=4,o.s();case 6:if((a=o.n()).done){e.next=27;break}if(s=a.value,e.prev=8,!i){e.next=11;break}return e.abrupt("return",r);case 11:return t.currentRequest=t.chunkHandler(s,t.chunkCursor),e.next=14,t.currentRequest;case 14:t.chunkCursor+=s.size,n=0,t.metrics.increaseQuality(),e.next=25;break;case 19:return e.prev=19,e.t0=e.catch(8),e.delegateYield(regeneratorRuntime.mark((function i(){var o,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.t0&&e.t0!==$o.ABORT&&0===e.t0.status){i.next=2;break}return i.abrupt("return",{v:Promise.reject(e.t0)});case 2:if(10!==n){i.next=4;break}return i.abrupt("return",{v:Promise.reject($o.NETWORK)});case 4:return o=1e3*n,a=new Promise((function(e){return setTimeout(e,o)})),n++,t.metrics.decreaseQuality(),i.next=10,Promise.race([r,a]);case 10:case"end":return i.stop()}}),i)}))(),"t1",22);case 22:if("object"!==zo(l=e.t1)){e.next=25;break}return e.abrupt("return",l.v);case 25:e.next=6;break;case 27:e.next=32;break;case 29:e.prev=29,e.t2=e.catch(4),o.e(e.t2);case 32:return e.prev=32,o.f(),e.finish(32);case 35:return e.abrupt("return",Promise.resolve());case 36:case"end":return e.stop()}}),e,null,[[4,29,32,35],[8,19]])})),function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Vo(o,i,r,a,s,"next",e)}function s(e){Vo(o,i,r,a,s,"throw",e)}a(void 0)}))})()},abort:function(){if(!this.triggerAbortInterrupt)throw new Error("ChunkTransferController: abort() before run()");this.triggerAbortInterrupt(),this.currentRequest.abort()},getChunk:regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.file.size){e.next=4;break}return e.next=3,new Blob;case 3:return e.abrupt("return");case 4:if(!(this.chunkCursor<this.file.size)){e.next=11;break}return t=Math.pow(2,this.metrics.MAX_QUALITY-this.metrics.get("quality")),n=Math.floor(15728640/t),e.next=9,this.file.slice(this.chunkCursor,this.chunkCursor+n);case 9:e.next=4;break;case 11:case"end":return e.stop()}}),e,this)}))});function Bo(e){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qo(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}var Uo=Oo.error,Ho=B.extend({abortInterrupt:null,initialize:function(e){this.request=e,this.metrics=Fo()},run:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n,i,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,t.abortInterrupt=new Promise((function(e,n){t.triggerAbortInterrupt=function(){return n(Uo.ABORT)}}));case 2:return e.prev=2,i=new Promise((function(e,n){t.request().then(e,n)})),e.next=6,Promise.race([t.abortInterrupt,i]);case 6:return r=e.sent,t.metrics.increaseQuality(),e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(2),e.delegateYield(regeneratorRuntime.mark((function i(){var r,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.t0&&e.t0!==Uo.ABORT&&0===e.t0.status){i.next=2;break}return i.abrupt("return",{v:Promise.reject(e.t0)});case 2:if(10!==n){i.next=4;break}return i.abrupt("return",{v:Promise.reject(Uo.NETWORK)});case 4:return r=1e3*n,o=new Promise((function(e){return setTimeout(e,r)})),n++,t.metrics.decreaseQuality(),i.next=10,Promise.race([t.abortInterrupt,o]);case 10:case"end":return i.stop()}}),i)}))(),"t1",14);case 14:if("object"!==Bo(o=e.t1)){e.next=17;break}return e.abrupt("return",o.v);case 17:if(n<=10){e.next=2;break}case 18:return e.abrupt("return",Promise.reject("RequestRetryController.run: loop break"));case 19:case"end":return e.stop()}}),e,null,[[2,11]])})),function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){qo(o,i,r,a,s,"next",e)}function s(e){qo(o,i,r,a,s,"throw",e)}a(void 0)}))})()},abort:function(){if(!this.triggerAbortInterrupt)throw new Error("RequestRetryController: abort() before run()");this.triggerAbortInterrupt()}});function Wo(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function Go(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Wo(o,i,r,a,s,"next",e)}function s(e){Wo(o,i,r,a,s,"throw",e)}a(void 0)}))}}function Ko(e,t,n){return new Promise((function(i,r){vi.rename(e,t,n,!0).then((function(){return i()}),(function(e,t,n){return r(n)}))}))}var Xo=function(e,t,n){return new Ho(Go(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Ko(e,t,n);case 3:i.next=15;break;case 5:if(i.prev=5,i.t0=i.catch(0),409!==i.t0.status){i.next=14;break}return i.next=10,e.getMeta(["name"]);case 10:if(i.sent.name!==t){i.next=13;break}return i.abrupt("return");case 13:case 14:throw i.t0;case 15:case"end":return i.stop()}}),i,null,[[0,5]])}))))};function Yo(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function Jo(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Yo(o,i,r,a,s,"next",e)}function s(e){Yo(o,i,r,a,s,"throw",e)}a(void 0)}))}}var Qo=B.extend({_transferController:null,_renameController:null,_tempModel:null,initialize:function(e){if(this.folder=e.folder,this.file=e.file,this.onexist=e.onexist,!(this.folder instanceof $t))throw new Error("the provided folder needs to be a FileModel");if(!this.file)throw new Error("no file was provided");var t,n,i;this._tempFilename=(t=this.file,n=new Date,i=z.date(n.getTime()/1e3,"YmdHis"),[t.name,i,"webupload"].join("."))},_patch:function(e,t,n){return vi.patchFile(this._tempModel,e,t,(function(e){return n(t+e.loaded)}))},_create:function(e,t){var n,i=this,r=vi.newFile({folder:this.folder,filename:this._tempFilename,on_exist:"overwrite",mtime:(n=this.file,n.lastModified?Math.round(n.lastModified/1e3):n.lastModifiedDate?Math.round(n.lastModifiedDate.getTime()/1e3):Math.round(Date.now()/1e3)),content:e,onProgress:function(e){return t(e.loaded)}});return r.then((function(e){i._tempModel=e})).catch((function(){})),r},run:function(){var e=arguments,t=this;return Jo(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:function(){},!t._settled){n.next=3;break}return n.abrupt("return",Promise.resolve());case 3:if("function"==typeof i){n.next=5;break}throw new Error("the progressCallback was expected to be a function");case 5:return t._transferController||(t._transferController=new Ro(t.file,(function(e,n){return 0!==n||t._tempModel?t._patch(e,n,i):t._create(e,i)}))),n.next=8,t._transferController.run();case 8:return t._renameController||(t._renameController=Xo(t._tempModel,t.file.name,t.onexist)),n.next=11,t._renameController.run();case 11:return t._tempModel=null,t._settled=!0,n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n)})))()},abort:function(){this._renameController?this._renameController.abort():this._transferController.abort()},cleanUp:function(){this._tempModel&&(vi.deleteFiles([this._tempModel]),this._tempModel=null)}});var Zo={createDirs:function e(t,n){var i=r.a.Deferred();return vi.getDir(encodeURIComponent(t),n,{fields:"id,path",members:"none"}).then((function(e){i.resolve(new $t(e,{parse:!0,context:n}))}),(function(r){404===r.status?e(Ue.getParentPath(t),n).then((function(e){vi.newFolder(e,Ue.getLastComponent(t)).then(i.resolve,(function(e,t){i.reject(t)}))}),i.reject):i.reject(r)})),i.promise()}};var ea=function(e,t){return new Ho((function(){return function(e,t){var n=e.urlDecode("path"),i=t.path||t.file.webkitRelativePath||"";return t.file&&(i=Ue.getParentPath(i)||""),(i=Ue.joinPath(n,i))===n?r.a.Deferred().resolve(e).promise():Zo.createDirs(i,e.getContext())}(e,t)}))};function ta(e){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var na=B.extend({initialize:function(e){if(this.folder=e.folder,this.entry=e.entry,this.onprogress=e.onprogress,this.onexist=e.onexist,this._interrupt=function(){},"object"!==ta(this.entry))throw new Error("EntryUpload: entry must be object");if(!this.entry.file&&!this.entry.path)throw new Error("EntryUpload: either 'entry.path' or 'entry.file' are required");if("function"!=typeof this.onprogress)throw new Error("EntryUpload: onprogress callback required (function)")},_createFolder:function(){var e=this,t=r.a.Deferred(),n=t.promise();if(this._createdFolder)return r.a.Deferred().resolve().promise();var i=ea(this.folder,this.entry);return this._interrupt=function(){i.abort(),t.reject(Oo.error.ABORT)},i.run().then((function(n){e._createdFolder=n,t.resolve()}),t.reject),n},_uploadFile:function(){var e=this,t=r.a.Deferred(),n=t.promise();return this._fileUploadController||(this._fileUploadController=new Qo({folder:this._createdFolder,file:this.entry.file,onexist:this.onexist}),this._interrupt=function(){e._fileUploadController.abort(),t.reject(Oo.error.ABORT)}),this._fileUploadController.run(this.onprogress).then(t.resolve,t.reject),n},run:function(){var e=this;return this._settled?r.a.Deferred().resolve().promise():this._createFolder().then((function(){return e._aborted?r.a.Deferred().reject(Oo.error.ABORT):e.entry.file?e._uploadFile():r.a.Deferred().resolve().promise()}))},abort:function(){this._aborted=!0,this._interrupt()},cleanUp:function(){this._fileUploadController&&(this._fileUploadController.cleanUp(),this._fileUploadController=null)}});function ia(e){return function(e){if(Array.isArray(e))return ra(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ra(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ra(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var oa=0;function aa(e){var t,n=e.split(".");return n.length>1&&""!==n[0]&&(t=n.pop()),We(t)}var sa=a.a.Model.extend({defaults:{progress:0,completed:0,error:null},initialize:function(e){var t,n,i=this;if(e.file)this._file=e.file,this._relativePath=this._file.webkitRelativePath,n=aa(t=this._file.name);else{if(!e.entry)throw new Error("no file or entry were provided");this._entry=e.entry,this._relativePath=this._entry.path,t=this._entry.name,n=this._entry.isDirectory?"dir":aa(t)}this._folder=e.folder,this._eventId=e.eventId,this._upload=null,this._totalCompleted=0,this.set({id:++oa,name:t,relativePath:this._relativePath||"",group:n}),this._enumerationPromise=this._enumerateFiles().then((function(e){var t=e.entries,n=e.stats;return i._setStats(t,n)}),(function(e){var t=e.error,n=e.stats;return i._setErrorStats(t,n)}))},collectData:function(){var e=this;return new Promise((function(t,n){e._enumerationPromise.then(t,n)}))},_enumerateFiles:function(){var e=this,t=this._entry;return new Promise((function(n,i){if(t&&t instanceof ge){var r=ia(t.files).map((function(e){return{file:e,path:e.webkitRelativePath}}));n({entries:r})}else t?Mo(e._entry).then((function(e,t){return n({entries:e,stats:t})}),(function(e,t){return i({error:e,stats:t})})):n({entries:[{file:e._file}]})}))},_setStats:function(e,t){var n=this;return new Promise((function(i){n._entries=Array.isArray(e)?e:[];var r=n._entries.reduce((function(e,t){return e+(t.file?t.file.size:0)}),0);n.set({size:r,statistics:t}),i({entries:e,statistics:t})}))},_setErrorStats:function(e,t){var n=this;return new Promise((function(i,r){n.set({statistics:t}),r(e,t)}))},_handleUploads:function(){var e=this;if(this._serialRunner)return this._serialRunner;var t=this.get("on_exist");return this._serialRunner=Po(this._entries,(function(n){return e._upload=e._upload||new na({folder:e._folder,entry:n,onexist:t,onprogress:function(t){return e._onProgress(t)}}),e._upload.run().then((function(){n.file&&(e._totalCompleted+=n.file.size,e._onProgress(0)),e._upload=null,e._entries.shift()}))})).catch((function(t){return e._serialRunner=null,Promise.reject(t)})),this._serialRunner},upload:function(){var e=this;return this._enumerationPromise.then((function(){return e._handleUploads()})).then((function(){return e._onSuccess()}),(function(t){return e._onError(t)}))},_onProgress:function(e){var t=this._totalCompleted+e;this.set({completed:t,progress:Math.min(1,+(t/this.get("size")).toFixed(3))})},_onSuccess:function(){return this.set("progress",1),Promise.resolve()},_onError:function(e){var t=this;return new Promise((function(n,i){var r;e!==Oo.error.ABORT?(r={error:e},t.set(r),i(e)):i(e)}))},cancel:function(){this._upload&&this._upload.abort()},getFolder:function(){return this._folder},getEventId:function(){return this._eventId},cleanUp:function(){this._upload&&(this._upload.cleanUp(),this._upload=null)}}),la=a.a.Collection.extend({model:sa,comparator:function(e,t){return e.id>t.id?1:-1},findByStatus:function(e){return this.findWhere({status:e})},findByAnyStatus:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.find((function(e){return t.indexOf(e.get("status"))>-1}))},filterByStatus:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.filter((function(e){return t.indexOf(e.get("status"))>-1}))}}),ca=Oo.upload,ua=B.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.uploadItems instanceof la))throw new Error("uploadItems is no uploadItems collection");this.listenTo(e.uploadItems,"add",this._onAdd)},_onAdd:function(e){e.collectData().then((function(){return e.set("status",ca.PREPARED)}),(function(t){return e.set({error:t,status:ca.FAILED})}))}}),da=function(){return Promise.resolve(Number.POSITIVE_INFINITY)},ha=Oo.upload,fa=B.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.uploadItems instanceof la))throw new Error("uploadItems is no uploadItems collection");this.uploads=e.uploadItems,this.listenTo(this.uploads,"remove change:status",this._onStatusChange)},_onStatusChange:function(){if(!this.uploads.findByAnyStatus(ha.CHECKING,ha.WAITING,ha.RUNNING)){var e=this.uploads.findByStatus(ha.PREPARED);if(e){e.set("status",ha.CHECKING);var t=e.getFolder().get("path");da(t).then((function(t){e.get("size")<t?e.set("status",ha.READY):e.set({error:Oo.error.EDQUOT,status:ha.FAILED})}),(function(t){e.set({error:t,status:ha.FAILED})}))}}}}),pa=Oo.upload,ga=B.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.uploadItems instanceof la))throw new Error("uploadItems is no uploadItems collection");if(!e.conflictCheck)throw new Error("conflictCheck required");this.uploads=e.uploadItems,this.conflictCheck=e.conflictCheck,this.listenTo(this.uploads,"remove change:status",this._next.bind(this))},_getPendingByGroup:function(e){return this.uploads.filter((function(t){return t.getEventId()===e.getEventId()&&[pa.COMPLETE,pa.FAILED,pa.CANCELLED,pa.RESUMABLE].indexOf(t.get("status"))<0}))},_next:function(){if(!this.uploads.findByAnyStatus(pa.RUNNING,pa.WAITING)){var e=this.uploads.findByStatus(pa.READY);e&&(e.set("status",pa.WAITING),this.conflictCheck(e,this._getPendingByGroup.bind(this),(function(){e.set("status",pa.QUEUED)}),function(){this.uploads.remove(e)}.bind(this),function(){for(var t=this._getPendingByGroup(e);t.length>0;)this.uploads.remove(t.shift())}.bind(this),(function(t){t===Oo.error.NETWORK?e.set({status:pa.RESUMABLE,error:t,statusToResume:pa.READY}):e.set({status:pa.FAILED,error:t})})))}}});function ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(n),!0).forEach((function(t){ya(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wa=Oo.upload,ba=B.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.uploadItems instanceof la))throw new Error("uploadItems is no uploadItems collection");this.uploads=e.uploadItems,this.listenTo(this.uploads,"change:status",this._onStatusChange)},_onStatusChange:function(){if(!this.uploads.findByStatus(wa.RUNNING)){var e=this.uploads.findByStatus(wa.QUEUED);e&&(Fo().neutralize(),e.set("status",wa.RUNNING),e.upload().then((function(){e.set("status",wa.COMPLETE)}),(function(t){var n={};t===Oo.error.ABORT?n.status=wa.CANCELLED:t===Oo.error.NETWORK?(n.status=wa.RESUMABLE,n.statusToResume=wa.QUEUED):n.status=wa.FAILED,e.set(va(va({},n),{},{error:t}))})))}}}),_a=Oo.upload,xa=[_a.CANCELLED,_a.FAILED],ka=B.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.uploadItems instanceof la))throw new Error("uploadItems is no uploadItems collection");this.uploads=e.uploadItems,this.listenTo(this.uploads,"remove",this._onRemove),this.listenTo(this.uploads,"change:status",this._onStatusChange)},_onRemove:function(e){e.get("status")!==_a.COMPLETED&&e.cleanUp()},_onStatusChange:function(e){xa.includes(e.get("status"))&&e.cleanUp()}});function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(n),!0).forEach((function(t){Ta(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ca=Oo.upload,ja=Object.freeze({all:0,completed:0,running:0,failed:0,resumable:0,cancelled:0,remaining:0}),Da=[Ca.NEW,Ca.PREPARED,Ca.CHECKING,Ca.READY,Ca.QUEUED,Ca.WAITING],Oa=[].concat(Da,[Ca.RUNNING]),Pa=[Ca.RESUMABLE],Aa=B.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.conflictCheck)throw new Error("conflictCheck required");this.uploadItems=new la,this._stats=Sa({},ja),this.listenTo(this.uploadItems,"add reset change:status remove",this._updateStats),new ua({uploadItems:this.uploadItems}),new fa({uploadItems:this.uploadItems}),new ga({uploadItems:this.uploadItems,conflictCheck:e.conflictCheck}),new ba({uploadItems:this.uploadItems}),new ka({uploadItems:this.uploadItems})},getUploads:function(){return this.uploadItems},addFiles:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i={eventId:(new Date).getTime(),folder:new $t(e.attributes,{parse:!0,context:e.getContext()}),status:Ca.NEW},r=Array.from(n);r.forEach((function(e){var n=Sa({},i);e.isFile||e.isDirectory?n.entry=e:n.file=e,t.uploadItems.add(n)}),this),this.trigger("add")},_updateStats:function(){this._stats=this.uploadItems.reduce((function(e,t){var n=t.get("status"),i=Sa({},e);return i.all++,n===Ca.COMPLETE?i.completed++:n===Ca.FAILED?i.failed++:n===Ca.RESUMABLE?i.resumable++:n===Ca.CANCELLED?i.cancelled++:n===Ca.RUNNING?(i.running++,i.remaining++):i.remaining++,i}),Sa({},ja)),this.trigger("update-stats",this._stats)},getStats:function(){return this._stats},cancel:function(e){e&&Oa.includes(e.get("status"))&&(e.cancel(),e.set({status:Ca.CANCELLED,progress:0,error:Oo.error.ABORT}))},_resume:function(e){var t=e.get("statusToResume");e.unset("statusToResume"),e.set({status:t,error:null})},resume:function(e){e&&Pa.includes(e.get("status"))&&this._resume(e)},resumeAll:function(){var e,t=this;(e=this.uploadItems).filterByStatus.apply(e,Pa).forEach((function(e){return t._resume(e)}))},abort:function(){var e;(e=this.uploadItems).filterByStatus.apply(e,Da).forEach((function(e){return e.set({status:Ca.CANCELLED,progress:0,error:Oo.error.ABORT})})),this.cancel(this.uploadItems.findByStatus(Ca.RUNNING))},removeFinished:function(){var e=this.uploadItems.filterByStatus(Ca.COMPLETE,Ca.FAILED,Ca.CANCELLED,Ca.RESUMABLE);this.uploadItems.remove(e)},reset:function(){if(this.uploadItems.findByAnyStatus(Ca.RUNNING,Ca.WAITING))throw new Error("Refusing to reset: there's one item in running or waiting state");this.uploadItems.reset()}}),Ma=n(26),Ia=n.n(Ma),Fa=0,za=1,La=2,Na=3,Va=Y.extend({loadingTemplate:l.a.template(Ia.a),errorTemplate:null,cancelTemplate:null,_loadingBaseViewState:za,_loadingBaseViewWasRendered:!1,render:function(){var e;return this._loadingBaseViewWasRendered=!0,this._loadingBaseViewState!==Fa&&(e=this._getLoadingStateTemplate(this._loadingBaseViewState))?(this.renderTemplate(e),this):Y.prototype.render.apply(this)},_getLoadingStateTemplate:function(e){switch(e){case La:return this.errorTemplate;case za:return this.loadingTemplate;case Na:return this.cancelTemplate;default:return null}},_setLoadingState:function(e){this._loadingBaseViewState=e,this._loadingBaseViewWasRendered&&this.render()},_applyStateChange:function(e,t){t?this._loadingBaseViewState!==e&&this._setLoadingState(e):this._loadingBaseViewState===e&&this._setLoadingState(Fa)},setIsLoading:function(e){this._applyStateChange(za,e)},setHasError:function(e){this._applyStateChange(La,e)},setCancelled:function(e){this._applyStateChange(Na,e)}}),$a=n(27),Ra=n.n($a),Ba=n(28),qa=n.n(Ba);function Ua(e,t){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}var Ha=a.a.View.extend({className:"sj-mouse-selector",defaults:{selector:">",ignoreSelector:"",delay:150,distance:50},initialize:function(e){if(!(e=l.a.extend({},this.defaults,e)).parentEl)throw new Error("no parent element was provided.");this._parentEl=e.parentEl,this._boundingEl=e.boundingEl||this._parentEl,this._scrollParent=r()(je(this._parentEl)),this._scrollParent.is("body")&&(this._scrollParent=r()(window)),this._itemSelector=e.selector,this._ignoreSelector=e.ignoreSelector,this._delay=e.delay,this._distance=e.distance,r()(this._parentEl).on("mousedown."+this.cid,this._onMouseDown.bind(this)),this._onClick=this._onClick.bind(this),this._parentEl.addEventListener("click",this._onClick,!0)},remove:function(){return r()(this._parentEl).off("mousedown."+this.cid),r()(document).off("."+this.cid),this._parentEl.removeEventListener("click",this._onClick,!0),a.a.View.prototype.remove.apply(this,arguments)},_renderInRect:function(e){this.$el.parent().length||this.$el.appendTo("body"),this.$el.css({left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top})},_onMouseDown:function(e){var t=this._scrollParent.scrollTop(),n=this._boundingEl.getBoundingClientRect(),i={top:n.top+t,bottom:n.bottom+t,left:n.left,right:n.right},o={left:e.pageX,top:e.pageY,right:e.pageX,bottom:e.pageY};this._preventClick=!1,e.button===N.mouseButtons.left&&Ua(o,i)&&(this._ignoreSelector&&r()(e.target).closest(this._ignoreSelector).length||(e.preventDefault(),this._parentRect=i,this._startPosition={x:o.left,y:o.top},this._startTime=Date.now(),this._started=!1,this._selectedItems=[],this._selectableItems=l.a.map(r()(this._parentEl).find(this._itemSelector).get(),(function(e){var n=e.getBoundingClientRect();return[e,{top:n.top+t,bottom:n.bottom+t,right:n.right,left:n.left}]})),r()(document).on("mousemove."+this.cid,this._onMouseMove.bind(this)).one("mouseup."+this.cid,this._onMouseUp.bind(this))))},_onMouseMove:function(e){var t,n,i,r,o,a,s=Date.now()-this._startTime,c=(i=this._startPosition.x,r=this._startPosition.y,o=e.pageX,a=e.pageY,Math.sqrt(Math.pow(Math.abs(i-o),2)+Math.pow(Math.abs(r-a),2)));s<this._delay&&c<this._distance||(this._started||(this._started=!0,this.trigger("select:start")),t=function(e,t,n,i,r){return{left:Math.max(e.left,Math.min(t,i)),top:Math.max(e.top,Math.min(n,r)),right:Math.min(e.right,Math.max(t,i)),bottom:Math.min(e.bottom,Math.max(n,r))}}(this._parentRect,this._startPosition.x,this._startPosition.y,e.pageX,e.pageY),this._renderInRect(t),n=this._selectedItems,this._selectedItems=l.a.reduce(this._selectableItems,(function(e,n){var i=n[0],r=n[1];return Ua(t,r)&&e.push(i),e}),[]),l.a.isEqual(this._selectedItems,n)||(n=l.a.difference(n,this._selectedItems),this.trigger("select",this._selectedItems,n)))},_onMouseUp:function(e){this.$el.detach(),r()(document).off("mousemove."+this.cid),this._started&&(e.preventDefault(),this.trigger("select:end",this._selectedItems),this._started=!1,this._selectedItems=[],this._preventClick=!0)},_onClick:function(e){this._preventClick&&e.stopImmediatePropagation()}});function Wa(e){return(Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ga(e){var t=[],n=0,i=0,r=l.a.extend({itemSpacing:4,width:1024,scaleToFit:!1},e),o=r.scaleToFit?.8:1;this.add=function(e){var a,s={id:e.id,left:0,width:e.width,height:e.height};if(function(e){if("object"!==Wa(e))throw new Error("no itemSize object given");if(!e.width)throw new Error("itemSize without width");if(!e.height)throw new Error("itemSize without height")}(e),t.length){if(r.width/o<(a=n+r.itemSpacing+e.width))return!1;s.left=n+r.itemSpacing,n=a}else s.width=Math.min(e.width,r.width),n=s.width;return t.push(s),i=Math.max(i,s.height),!0},this.fitToWidth=function(){var e,o,a=0,s={items:t,height:i},c=t.length-1;return r.scaleToFit?(o=(t.length-1)*r.itemSpacing,(e=(r.width-o)/(n-o))>=2?s:(t.forEach((function(t,n){var i=Math.round(t.width*e),o=Math.round(t.height*e);n===c&&(i=r.width-a),l.a.extend(t,{width:i,height:o,left:a}),a+=i+r.itemSpacing})),i=Math.max.apply(null,t.map((function(e){return e.height}))),{items:t,height:i})):s}}function Ka(e){return new Ga({width:e.width,itemSpacing:e.itemSpacing,scaleToFit:e.scaleToFit})}function Xa(e){return Math.floor(e)===e&&e<1/0}var Ya,Ja=function(e,t){if(!Array.isArray(e))throw new Error("items array missing");var n=[],i=function(e){return l.a.extend({itemSpacing:4,width:1024,scaleToFit:!1,top:0},e)}(t),r=0,o=i.top,a=Ka(i),s=function(){var e=a.fitToWidth();e.items.forEach((function(e){n.push(l.a.extend({},e,{top:o}))})),r+=e.height,o+=e.height};if(!Xa(i.width)||i.width<=0)throw new Error("width is not a number > 0");if(!Xa(i.itemSpacing)||i.itemSpacing<0)throw new Error("itemSpacing it not a number >= 0");return e.forEach((function(e){a.add(e)||(s(),r+=i.itemSpacing,o+=i.itemSpacing,(a=Ka(i)).add(e))})),e.length&&s(),{items:n,height:r}},Qa=Me.extend({tagName:"fluid-layout",contentTagName:"fluid-content",initialize:function(){Me.prototype.initialize.apply(this,arguments),this._namespace="fluid-layout-"+String((new Date).getTime()),r()(window).on("resize."+this._namespace,this._onResize.bind(this)),this._ticking=!1},_hasScrollbar:function(){return this._scrollingEl||(this._scrollingEl=je(this.el)),this._scrollingEl.scrollHeight!==this._scrollingEl.offsetHeight},_onResize:function(){var e=this.$contentEl.width();e<=0||this._latestContainerWidth!==e&&(this._hasResized=!0,this._latestContainerWidth=e,this._requestTick())},_requestTick:function(){this._ticking||(this._ticking=!0,window.requestAnimationFrame(this._update.bind(this)))},_update:function(){this._ticking=!1,this._hasResized&&(this._hasResized=!1,this._calculateLayout())},remove:function(){this._hasResized=!1,r()(window).off("."+this._namespace),Me.prototype.remove.apply(this,arguments)},_adjustItemViews:function(){this.itemViewImages=[],this.itemViewNonImages=[],this.itemViews.models.forEach(function(e){var t,n,i,r=e.get("view").model;r.has("image")?(n=(t=r.get("image")).exif?t.exif.Orientation:void 0,i=ki(t.width,t.height,140,230,n),e.width=i.width,e.height=i.height,e.get("view").el.classList.add("fluid-thumbnail"),this.itemViewImages.push(e)):this.itemViewNonImages.push(e)}.bind(this)),this.itemViews.reset(this.itemViewImages.concat(this.itemViewNonImages),{silent:!0,sort:!1})},_sortItemViews:function(){this.itemViewImages=[],this.itemViewNonImages=[],Me.prototype._sortItemViews.call(this),this._adjustItemViews()},_appendAll:function(){var e;if(!this._isParentAttached())return window.cancelAnimationFrame(this.renderId),void(this.renderId=window.requestAnimationFrame(this._appendAll.bind(this)));window.cancelAnimationFrame(this.renderId),e=this._hasScrollbar()?0:pe.getScrollbarWidth(),this._latestContainerWidth=this.$contentEl.width()-e,this._calculateLayout(),Me.prototype._appendAll.call(this),this._onResize(),this.trigger("viewmode")},_isParentAttached:function(){return document.body.contains(this.el)},_onRemoveEnd:function(e){Me.prototype._onRemoveEnd.call(this,e),this._adjustItemViews(),this._calculateLayout()},_calculateLayout:function(){var e,t,n={items:[],height:0},i={items:[],height:0},r={width:this._latestContainerWidth},o=0;this._latestContainerWidth<=0||(this.collection.length?(this.itemViewImages.length&&(e=this.itemViewImages.map((function(e){return{id:e.cid,width:Math.max(e.width,140),height:e.height}})),o+=(n=Ja(e,l.a.extend({},r,{itemSpacing:4,scaleToFit:!0,top:0}))).height),this.itemViewNonImages.length&&(this.itemViewImages.length&&(o+=22),t=this.itemViewNonImages.map((function(e){return{id:e.cid,width:160,height:160}})),o+=(i=Ja(t,l.a.extend({},r,{itemSpacing:22,top:o}))).height),[].concat(n.items,i.items).forEach(function(e){var t=this.itemViews.get(e.id).get("view");if(!t)throw new Error("Failed to get view");t.update(e)}.bind(this)),this.el.style.height=o+"px"):this.el.style.height="")}}),Za=Qa.extend({initialize:function(e){Qa.prototype.initialize.apply(this,arguments),Ei(this,e)},remove:function(){Si(this),Qa.prototype.remove.apply(this,arguments)}}),es=n(29),ts=n.n(es),ns=Y.extend({tagName:"drag-shadow",template:l.a.template(ts.a),fileCount:0,templateData:function(){return{fileCount:this.fileCount}},setFileCount:function(e){this.fileCount=e,this.render()}});function is(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rs,os,as=(is(Ya={},L.file,"file"),is(Ya,L.directory,"dir"),is(Ya,L.symlink,"symlink"),Ya),ss=we.extend({onBeforeRender:function(){this.toggleDraggable(!0),this.model.selected?this.el.classList.add("selected"):this.el.classList.remove("selected"),this.model.get("readable")?this.el.classList.remove("notReadable"):this.el.classList.add("notReadable"),this.el.classList.add(as[this.model.get("type")]||this.model.get("type"))},templateData:function(){return{fileTypes:L,draggable:this._isDraggable()}},_isDraggable:function(){return this.dragdropEnabled&&this.model.get("parent_writable")&&this.model.get("readable")},toggleDraggable:function(e){e&&this._isDraggable()?this.el.setAttribute("draggable","true"):this.el.removeAttribute("draggable")}}),ls=ss.extend({tagName:"list-item"}),cs=ss.extend({tagName:"tile-item"}),us=ss.extend({tagName:"fluid-item",update:function(e){e&&(this.el.setAttribute("data-row",e.row),this.el.style.width=e.width+"px",this.el.style.height=e.height+"px",this.el.style.transform="translate( "+e.left+"px, "+e.top+"px)")}}),ds=n(30),hs=n.n(ds),fs=n(31),ps=n.n(fs),gs=n(32),ms=n.n(gs),vs=n(33),ys=n.n(vs),ws=n(34),bs=n.n(ws),_s=n(35),xs=n.n(_s),ks=Va.extend({tagName:"x-filemanager",className:"fm-grid",template:l.a.template(xs.a),errorTemplate:l.a.template(qa.a),defaults:{viewMode:tt.TILES,container:null,downloadArchivePrefix:"",selectmodeEnabled:!0,uploadManager:null,dragdropEnabled:!1,uploadEnabled:!1,editEnabled:!0,headerTpl:ys.a,emptyTpl:Ra.a},subviews:function(){var e,t,n=this.defaults.viewMode,i={collection:this.collection,itemTpl:hs.a,itemViewClass:ls,headerTpl:this.headerTpl,container:this.container,emptyTpl:this.emptyTpl,emptyTplData:{model:this.model},dragdropEnabled:!!this.dragdropEnabled},r={click:this.onItemClick.bind(this),contextmenu:this.onContextmenu.bind(this)};return(this.dragdropEnabled||this.uploadEnabled)&&(i.canDrop=this._canDrop.bind(this),r["drag:over"]=this._onDragOver.bind(this),r["drag:leave"]=this._onDragLeave.bind(this),r.drop=this._onDrop.bind(this)),this.dragdropEnabled&&(r["drag:start"]=this._onDragStart.bind(this),r["drag:end"]=this._onDragEnd.bind(this)),this.selectmodeEnabled&&(r.select=this.onItemSelect.bind(this),r.longpress=this.onItemSelect.bind(this)),(t={})[tt.TILES]={klass:ji,options:l.a.extend({},i,{itemTpl:ps.a,itemViewClass:cs}),listeners:r},t[tt.LIST]={klass:Ti,options:i,listeners:r},t[tt.FLUID]={klass:Za,options:l.a.extend({},i,{itemTpl:ms.a,itemViewClass:us,parent:this}),listeners:r},this.viewMode in t&&(n=this.viewMode),e={content:{klass:J,target:".content-target",options:{className:"view-switcher",defaultView:n,subviews:t}}},this.dragdropEnabled&&(e.dragShadow={klass:ns,target:".drag-shadow-target"}),e},initialize:function(e){l.a.defaults(this,e,this.defaults),e.errorTemplate&&(this.errorTemplate=e.errorTemplate),e.cancelTemplate&&(this.cancelTemplate=e.cancelTemplate),this.dropUploadEnabled=!0,this.listenTo(this.model,"download",this.onDownload),this.listenTo(this.collection,"download",this.onSingleDownload),this.listenTo(this.collection,"add add:end remove remove:end reset",this.checkEmpty),this.listenTo(this.collection,"load:start",this.onLoadStart),this.listenTo(this.collection,"load",this.onLoad),this.listenTo(this.collection,"load:error",this.onLoadError),this.listenTo(this.collection,"load:cancel",this.onLoadCancel),this.listenTo(this.collection,"change:selected",this.onChangeSelected),this.listenTo(this.collection,"selectAll",this.onSelectAll),this.listenTo(this.collection,"deselectAll",this.onDeselectAll),this.listenTo(this.collection,"remove:end",this.onRemoveEnd),this._dragItemsIds=[],this._editor=null,this._editingModel=null,this._editingStopped=!1,this._itemToEdit=null,this._selectMode=!1},checkEmpty:function(){this.$el.toggleClass("isEmpty",!this.collection.length),this.selectmodeEnabled&&(this._removeMouseSelector(),this.collection.length&&this._addMouseSelector())},_addMouseSelector:function(){this._mouseSelector||(this._mouseSelector=new Ha({parentEl:this.el,boundingEl:this.$(".selection-boundary")[0],selector:".sj-grid-content .sj-grid-item:visible:not(:has(.notReadable))",ignoreSelector:this.dragdropEnabled?".sj-grid-item.selected, .draggable":""}),this.listenTo(this._mouseSelector,"select:end",this.onMouseSelect))},_removeMouseSelector:function(){this._mouseSelector&&(this.stopListening(this._mouseSelector),this._mouseSelector.remove(),this._mouseSelector=null)},onAfterRender:function(){this.setViewMode(this.viewMode),this.onLoad()},_renderSelectMode:function(){this.$el.toggleClass("selected",this._selectMode)},getSelectMode:function(){return this._selectMode},setSelectMode:function(e){e=!!e,this.selectmodeEnabled&&this._selectMode!==e&&(this._selectMode=e,this._renderSelectMode(),this.trigger("selectmode",this._selectMode))},setViewMode:function(e){var t;l.a.contains(tt,e)?this.viewMode=e:this.viewMode=tt.TILES,(t=this.getSubview("content").show(this.viewMode))&&t.trigger("viewmode",this.viewMode)},scrollIntoView:function(e){this.getSubview("content").currentView.scrollIntoView(e)},highlight:function(e){this.getSubview("content").currentView.highlight(e)},rename:function(e){e||(e=this.collection.firstSelected()),this.startEditor(e)},startEditor:function(e){var t,n=this.getSubview("content").currentView.getItemViewByModel(e),i=l.a.template(bs.a)({lang:O,chars:"/"});n?(this._editor&&(oe.track({op:"rename-end",target:"accident"}),this._completeEditing()),this._removeMouseSelector(),this._editingModel=e,n.$el.addClass("editing"),n.toggleDraggable(!1),t=n.$el.find(".file-item-displayname"),this._editor=new gr({pasteFilter:new RegExp("[/\\t\\n\\r]","g"),filter:new RegExp("[/]"),tooltipHtml:i}),this._editor.render().$el.appendTo(t),this.listenTo(this._editor,"done",this._saveEdit),this.listenTo(this._editor,"abort",this._abortEdit),this.listenTo(this._editor,"paste",this._editorPaste),this._editor.setValue(e.get("display_name")),this._editor.focus(),this._editor.setSelection(e.get("base_name").length)):console.error("Cannot start editor: view not found by model",e)},_completeEditing:function(){var e=this.getSubview("content").currentView.getItemViewByModel(this._editingModel);e&&(e.$el.removeClass("editing"),e.toggleDraggable(!0)),this._editor.remove(),this.stopListening(this._editor,"abort done paste"),this._editor=null,this._editingModel=null,this._addMouseSelector()},_saveEdit:function(e){var t,n=this._editor.getValue();e&&("blur"===e.type||"focusout"===e.type?t="blur":"keyup"===e.type&&13===e.which?t="enter":"click"===e.type&&(t="click")),t&&oe.track({op:"rename-end",target:t}),n&&n!==this._editingModel.get("display_name")&&(this.model.rename(this._editingModel,n).done(function(e,t){this.scrollIntoView(t)}.bind(this)),1===this.collection.getSelected().length&&this.collection.deselectAll()),this._completeEditing()},_abortEdit:function(){oe.track({op:"rename-end",target:"abort"}),this._completeEditing()},_editorPaste:function(){oe.track({op:"rename",target:"paste"})},stopEditing:function(e){return!!this._editor&&(this._saveEdit(e),!0)},onItemClick:function(e,t,n){if(this._editingStopped||(this._editingStopped=this.stopEditing(n)),e){if(e.get("readable"))return this.editEnabled&&this.model.get("writable")&&e.get("renamable")?r()(n.target).closest(".label-text.display_name").length?this._itemToEdit&&this._itemToEdit!==e?(this._dblclick_timeout&&(clearTimeout(this._dblclick_timeout),this._dblclick_timeout=null),void(this._itemToEdit=null)):void(this._dblclick_timeout&&this._itemToEdit===e?(clearTimeout(this._dblclick_timeout),this._dblclick_timeout=null,this._itemToEdit=null,this.startEditor(e),oe.track({op:"rename-start",target:"dblclick",viewmode:this.viewMode}),this._editingStopped=!1):(this._itemToEdit=e,this._dblclick_timeout=setTimeout(function(){this._dblclick_timeout=null,this._itemToEdit=null,this._editingStopped?this._editingStopped=!1:this._actionOrSelect(e,t,n)}.bind(this),N.doubleClickDelay))):(this._itemToEdit=null,this._dblclick_timeout&&(clearTimeout(this._dblclick_timeout),this._dblclick_timeout=null),this._editingStopped?void(this._editingStopped=!1):void this._actionOrSelect(e,t,n)):(this._itemToEdit=null,void this._actionOrSelect(e,t,n));this._itemToEdit=null}else this._itemToEdit=null},onContextmenu:function(e,t){this.selectmodeEnabled&&(t&&!t.selected?(this.collection.firstSelected()&&this.collection.deselectAll(),this.collection.select(t)):t||this.collection.deselectAll()),this.trigger("contextmenu",e,t)},_actionOrSelect:function(e,t,n){var i,o,a=r()(n.target);a.is(".icon-item-shared")&&oe.track({op:"share-info",target:"file-shareicon"}),o=(i=a.closest("[data-action]")).data("action"),this.collection.firstSelected()||this._selectMode?this.onItemSelect(e,n,!0):i&&o?"download"===o?this.onSingleDownload(e):"share-info"===o?this.model.trigger("share-info",e):(oe.track({op:"fileitem-action",target:o,viewmode:this.viewMode,data:e.get("type")}),this.trigger("action:"+o,e,t)):(this._trackNavigation(e,n),this.trigger("open",e,t))},_trackNavigation:function(e,t){var n="sj-item";t&&(r()(t.target).closest(".file-item-icon").length?n="sj-item-icon":r()(t.target).closest(".file-item-label").length&&(n="sj-item-title")),oe.track({op:"navigate",target:n,viewmode:this.viewMode,data:e.get("type")})},_isMoreThenOneSelected:function(){var e=!1;return this.collection.find((function(t){return e?t.selected:(e=t.selected,!1)}))},onItemSelect:function(e,t,n){if(!this.stopEditing()&&e.get("readable")){var i=this.viewMode,r=function(t){e.selected?this._isMoreThenOneSelected()?oe.track({op:"select-remove",target:t,viewmode:i}):oe.track({op:"select-end",target:t,viewmode:i}):oe.track({op:"select-add",target:t,viewmode:i})}.bind(this);n?r("icon"):this.collection.firstSelected()?r("checkbox"):oe.track({op:"select-start",target:"checkbox",viewmode:i}),e.trigger("select",e,t.shiftKey,t.ctrlKey)}},onDownload:function(){var e,t=this.collection,n=t.getSelected(),i=n.length===t.length,r=!!n.find((function(e){return e.get("teamfolder")}));e=n.length&&(!i||r||1===t.length)?n:this.model.isDownloadable()?[this.model]:t.filter((function(e){return e.isDownloadable()})),n.length?1===n.length&&n[0].get("type")===L.directory?oe.track({op:"download",target:"folder"}):1===n.length&&n[0].get("type")!==L.directory?oe.track({op:"download",target:"file"}):oe.track({op:"download",target:"selection"}):oe.track({op:"download",target:"all"}),vi.download(e,{archivePrefix:this.downloadArchivePrefix,base:this.model.isDownloadable()?this.model:null}),this.collection.deselectAll()},onSingleDownload:function(e){vi.download(e,{archivePrefix:this.downloadArchivePrefix})},_updateDropState:function(e){this.canDropUpload=e&&!!this.uploadManager&&!!this.model.get("writable"),this.$el.toggleClass("canDropUpload",this.canDropUpload)},_canDrop:function(e,t,n){var i=!1,r=!!this._dragItemsIds.length,o=l.a.contains(t.types,"Files");if(n){var a=n.get("type")===L.directory;(o||r&&!l.a.contains(this._dragItemsIds,n.id))&&(i=a&&n.get("writable")&&!n.selected)}else this.dropUploadEnabled&&this.canDropUpload&&o&&(t.dropEffect="copy",i=!0);return i},_onDragStart:function(e,t){var n,i=t.get("id"),r=[i],o=l.a.pluck(this.collection.getSelected(),"id"),a=this.getSubview("dragShadow");o.length&&(l.a.contains(o,i)?r=o:this.collection.deselectAll()),this._dragItemsIds=r,(n=e.originalEvent.dataTransfer).effectAllowed="all",n.dropEffect="move",n.setData("Text",JSON.stringify(r)),n.setDragImage&&(a.setFileCount(r.length),n.setDragImage(a.el,0,0))},_onDragOver:function(e,t,n){var i=!!e,o=!!n;this.$el.toggleClass("isDraggedOver",i&&!o),this.$el.toggleClass("isDraggedInside",i&&o),this.$el.toggleClass("isDraggedFromOutside",0===this._dragItemsIds.length),this.getSubview("content").currentView.$(".sj-dragged-over").removeClass("sj-dragged-over"),i&&o&&r()(e).addClass("sj-dragged-over")},_onDragLeave:function(){this.$el.removeClass("isDraggedOver"),this.$el.removeClass("isDraggedInside"),this.$el.removeClass("isDraggedFromOutside"),this.getSubview("content").currentView.$(".sj-dragged-over").removeClass("sj-dragged-over")},_onDrop:function(e,t,n){var i,r,o=t&&t.files&&t.files.length>0,a=l.a.contains(t.types,"Files"),s=t&&t.items&&t.items.length&&t.items[0].webkitGetAsEntry,c=n||this.model;if(o)s?(i=Array.from(t.items).map((function(e){return e.webkitGetAsEntry()})).filter((function(e){return null!==e})),this._trackDropEntries(i),this.uploadManager.addFiles(c,i)):(this._trackDropFiles(t),this.uploadManager.addFiles(c,t.files));else{if(a)return void this.trigger("drop:error");if(!n)return;if(!(r=this.collection.filter((function(e){return this._dragItemsIds.indexOf(e.id)>-1}),this)).length)return;this.trigger("move",n,r)}},_onDragEnd:function(){this._dragItemsIds=[]},_trackDropFiles:function(e){var t="unknown",n=l.a.chain(e.types);t=n.contains("Files").value()&&!n.contains("text/x-moz-url").value()?"files":n.without("Files").map((function(e){return e.split("/")[0]})).uniq().value().sort().join(","),oe.track({op:"drop",target:"filemanager",data:t})},_trackDropEntries:function(e){var t,n,i="";t=e.reduce((function(e,t){return e+t.isDirectory}),0),n=e.length-t,t>0?(i+="folders: "+t,n>0&&(i+=", files: "+n)):i+="files: "+n,oe.track({op:"drop",target:"filemanager",data:i})},setDropUploadEnabled:function(e){this.dropUploadEnabled=!!e},onLoadStart:function(){this._removeMouseSelector(),this._updateDropState(!1),this.setIsLoading(!0)},onLoad:function(){this.setIsLoading(!1),this._updateDropState(!0),this.selectmodeEnabled&&this._renderSelectMode(),this.checkEmpty()},onLoadError:function(){this.setHasError(!0)},onLoadCancel:function(){this.setCancelled(!0)},remove:function(){return this._removeMouseSelector(),Va.prototype.remove.apply(this,arguments)},onMouseSelect:function(e){l.a.each(e,(function(e){var t=this.getSubview("content").currentView.findModelForElement(e);t&&this.collection.select(t)}),this)},_renderItemSelection:function(e){var t,n=this.getSubview("content").currentView;n&&(t=n.getItemViewByModel(e))&&t.$el.toggleClass("selected",!0===e.selected)},onChangeSelected:function(e){this._renderItemSelection(e),this.setSelectMode(!!this.collection.firstSelected())},onSelectAll:function(){l.a.each(this.collection.getSelected(),(function(e){this._renderItemSelection(e)}),this),this.setSelectMode(!0)},onDeselectAll:function(){this.collection.each((function(e){this._renderItemSelection(e)}),this),this.setSelectMode(!1)},onRemoveEnd:function(e){l.a.each(e,(function(e){this._renderItemSelection(e)}),this),this.collection.firstSelected()||this.setSelectMode(!1)}}),Es=n(36),Ss=n.n(Es),Ts=n(37),Cs=n.n(Ts);rs=Y.extend({tagName:"span",events:{"click .folder-icon":"_onClick","click .arrow":"_onClick","click .level-up":"_onLevelUp"},template:l.a.template(Cs.a),templateData:function(){return{segments:this.segments}},segments:[],_onClick:function(){this.segments.length>=2&&this.trigger("toggle")},_onLevelUp:function(e){e.preventDefault(),this.segments.length>=2&&this.trigger("levelup",e.currentTarget.getAttribute("href"),"folder-flyout-level-up")},setSegments:function(e){this.segments=e}}),os=Y.extend({className:"content",tagName:"ul",events:{"click li":"onClick"},segments:[],templateData:function(){return{segments:this.segments}},template:l.a.template(Ss.a),onClick:function(e){this.trigger("click",e.currentTarget.dataset.href,"folder-flyout-content")},setSegments:function(e){this.segments=e}});var js=Yr.Flyout.extend({className:"fm-folder-flyout",initialize:function(e){if(!this.model)throw new Error("model required in FolderFlyout!");if(!e.segmentBuilder)throw new Error("segmentBuilder option required in FolderFlyout!");this.segmentBuilder=e.segmentBuilder,this.triggerView=new rs({model:this.model}),this.contentView=new os({model:this.model}),this.listenTo(this.triggerView,"toggle",this.toggle),this.listenTo(this.triggerView,"levelup",this._onClick),this.listenTo(this.contentView,"click",this._onClick),this.listenTo(this.model,"load:start",this.render),Yr.Flyout.prototype.initialize.apply(this,arguments)},render:function(){var e=this.segmentBuilder(this.model.get("path"));return this.contentView.setSegments(e),this.triggerView.setSegments(e),Yr.Flyout.prototype.render.call(this)},_onClick:function(e,t){this.trigger("navigate",e,t),this.close()}}),Ds=n(38),Os=n.n(Ds),Ps=a.a.View.extend({tagName:"span",events:{click:"onClick"},template:['<span class="icon icon-sort"></span>','<span class="label"><%= label %></span>'],initialize:function(){this.listenTo(this.model.files,"sortBy",this.addTooltip)},onClick:function(){this.trigger("click")},render:function(){return this.$el.html(l.a.template(this.template.join(""))({label:O.get("sortFlyout.title")})),this.addTooltip(),this},addTooltip:function(){var e,t,n={display_name:O.get("sortFlyout.name"),mtime:O.get("sortFlyout.date"),size:O.get("sortFlyout.size"),type:O.get("sortFlyout.type")};t="asc"===this.model.files.sortable.getDir()?O.get("asc"):O.get("desc"),e=O.get("sortFlyout.sortedBy")+' "'+n[this.model.files.sortable.getKey()]+'", '+t,r()(this.$el).attr("title",e)}}),As=a.a.View.extend({className:"content",tagName:"ul",events:{"click li":"switchSort"},template:l.a.template(Os.a),initialize:function(){this.listenTo(this.model.files,"sortBy",this.render)},render:function(){var e=this.model.files.sortable.getKey(),t=this.model.files.sortable.getDir();return this.sortList={display_name:{text:O.get("sortFlyout.name")},mtime:{text:O.get("sortFlyout.date")},size:{text:O.get("sortFlyout.size")},type:{text:O.get("sortFlyout.type")}},l.a.each(this.sortList,(function(n,i){l.a.extend(n,{selected:e===i,direction:e===i&&"asc"===t?"desc":"asc"})})),this.$el.empty().append(this.template({sorting:this.sortList})),this},switchSort:function(e){var t=r()(e.target).closest("li").attr("data-cid"),n=this.sortList[t].direction;oe.track({op:"sort",target:t,data:n}),this.model.files.sortable.sortBy(t,n),this.trigger("close")}}),Ms=Yr.Flyout.extend({className:"fm-sort-flyout",initialize:function(e){if(!l.a.isObject(e))throw new Error("options-object required for SortFlyout");this.triggerView=new Ps({model:this.model}),this.contentView=new As({model:this.model}),this.listenTo(this.triggerView,"click",this.toggle),this.listenTo(this.contentView,"close",this.close),Yr.Flyout.prototype.initialize.apply(this,arguments)}}),Is=n(39),Fs=n.n(Is),zs=Y.extend({tagName:"span",events:{click:"onClick"},template:l.a.template('<span class="icon icon-view"></span><span class="label"><%= lang.get("viewModeFlyout.title") %></span>'),onAfterRender:function(){return r()(this.$el).attr("title",O.get("viewModeFlyout.title")),this},onClick:function(){this.trigger("click")}}),Ls=Y.extend({className:"content",events:{"click .tile":"setViewMode"},template:l.a.template(Fs.a),templateData:function(){return{viewModeList:[{name:tt.TILES,title:O.get("viewmode.tiles")},{name:tt.LIST,title:O.get("viewmode.list")},{name:tt.FLUID,title:O.get("viewmode.fluid")}]}},setViewMode:function(e){var t=r()(e.target).closest(".tile").attr("data-cid");this.model.set("viewMode",t),oe.track({op:"switch-viewmode",data:this.model.get("viewMode"),viewmode:t}),this.trigger("close")}}),Ns=Yr.Flyout.extend({initialize:function(){this.triggerView=new zs({model:this.model}),this.contentView=new Ls({model:this.model}),this.listenTo(this.triggerView,"click",this.toggle),this.listenTo(this.contentView,"close",this.close),this.listenTo(this.model,"change:viewMode",function(){this.contentView.render(),this.trigger("viewMode",this.model.get("viewMode"))}.bind(this)),Yr.Flyout.prototype.initialize.apply(this,arguments)},render:function(){return Yr.Flyout.prototype.render.call(this),this.el.classList.add("fm-viewmode-flyout"),this}}),Vs=a.a.View.extend({className:"bar",render:function(e){return this.$el.width(e+"%"),this}}),$s=n(40),Rs=n.n($s),Bs=Object.values(Oo.upload),qs=function(e){return"upload-status-"+e},Us=Bs.map(qs),Hs=we.extend({autoRender:!1,template:l.a.template(Rs.a),templateData:function(){return{states:Oo,uploadItemSize:this._getUploadItemSize(),uploadItemError:this._getUploadItemError(),uploadItemStatus:this._getUploadItemStatus()}},initialize:function(){we.prototype.initialize.apply(this,arguments),this.progressBar=new Vs,this.metrics=Fo(),this.listenTo(this.model,"change:size change:error",this.render),this.listenTo(this.model,"change:status",this.render),this.listenTo(this.model,"change:progress",this.updateProgress),this.listenTo(this.metrics,"change:decreasing",this.render)},render:function(){return we.prototype.render.call(this),this.updateProgress(),this},remove:function(){return this.progressBar.remove(),we.prototype.remove.apply(this,arguments)},_addStatusClasses:function(){var e=this,t=this.model.get("status");Us.forEach((function(t){return e.el.classList.remove(t)})),this.el.classList.add(qs(t))},updateProgress:function(){this._renderProgressBar(),this._addStatusClasses(),this.el.querySelector(".upload-item-size-progress")&&this._renderProgressSize()},_renderProgressBar:function(){var e=this.$(".progressbar-container");if(e.length){var t=100*this.model.get("progress");this.progressBar.render(t),e.html(this.progressBar.$el)}},_renderProgressSize:function(){var e,t=z.size(this.model.get("size"));if(this.model.get("progress")<1){var n=z.size(this.model.get("completed"));e=O.get("upload.detail.item.status.transferred",[n,t])}else e=t;this.$(".upload-item-size-progress").text(e)},_getUploadItemSize:function(){return this.model.has("size")?z.size(this.model.get("size")):O.get("upload.size.calculation")},_getUploadItemError:function(){return this.model.get("error")===Oo.error.EXIST?O.get("upload.error.exists"):this.model.get("error")===Oo.error.EDQUOT?O.get("upload.error.quota"):this.model.get("error")===Oo.error.ABORT?O.get("upload.error.abort"):this.model.get("error")===Oo.error.NETWORK?O.get("upload.error.network"):this.model.get("status")===Oo.upload.FAILED?O.get("upload.error.failed"):""},_getUploadItemStatus:function(){return this.model.get("status")===Oo.upload.RUNNING&&this.metrics.get("decreasing")?O.get("upload.status.retry"):""}}),Ws=n(41),Gs=n.n(Ws),Ks=Y.extend({tagName:"span",template:l.a.template(Gs.a),initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.uploadManager instanceof Aa))throw new Error("UploadDetailTitleView: UploadManager required.");this.uploadManager=e.uploadManager,this.listenTo(this.uploadManager,"update-stats",this.render)},templateData:function(){return{stats:this.uploadManager.getStats()}}}),Xs=n(42),Ys=n.n(Xs),Js=a.a.View.extend({className:"upload-stats",_template:l.a.template(Ys.a),events:{click:"onClick","click .close":"onClose"},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.uploadManager=e.uploadManager,this.listenTo(this.uploadManager,"update-stats",this._renderStats),this.listenTo(this.uploadManager.getUploads(),"change:progress change:error",this._renderProgressBar),this.progressBarView=new Vs},onClick:function(){this.trigger("click")},onClose:function(e){e.stopPropagation(),this.uploadManager.removeFinished(),this.trigger("close")},render:function(){return this.$el.html(this._template()),this._renderStats(this.uploadManager.getStats()),this._renderProgressBar(),this},_renderStats:function(e){var t=e.failed+e.resumable,n=e.all-e.completed-e.cancelled-t;this.$(".uploads-ok-text").text(O.get("upload.detail.stats.transfer",[e.completed,e.all])),this.$(".uploads-error-text").text(O.get("upload.detail.stats.error",[t,e.all])),this.$el.toggleClass("running",!!n),this.$el.toggleClass("error",!!t),this.$el.toggleClass("completed",!!e.completed&&!n)},_renderProgressBar:function(){var e=this.$(".progress-bar");if(e.length){var t=0;this.uploadManager.getUploads().each((function(e){e.has("error")||(t+=e.get("progress"))}));var n=100*t/(this.uploadManager.getStats().all||1);e.html(this.progressBarView.render(n).$el)}}}),Qs=n(43),Zs=n.n(Qs),el=dr.extend({template:l.a.template(Zs.a),className:"upload-details",autoClose:!1,subviews:function(){return{list:{klass:Fe,target:".grid-target",options:{collection:this.uploadManager.getUploads(),itemViewClass:Hs},listeners:{click:this.onGridClick.bind(this)}},title:{klass:Ks,target:".title-target",options:{uploadManager:this.uploadManager}},stats:{klass:Js,target:".stats-target",options:{uploadManager:this.uploadManager}},close:{klass:he,target:".button-close-target",appendToTarget:!1,options:{className:"button-close",text:O.get("upload.detail.close"),secondary:!0},listeners:{click:this.close}},minimize:{klass:he,target:".button-minimize-target",appendToTarget:!1,options:{className:"button-minimize",text:O.get("upload.detail.minimize"),secondary:!0},listeners:{click:this.close}},upload:{klass:ve,target:".button-more-uploads",appendToTarget:!0,options:{text:O.get("upload.detail.moreuploads"),iconClass:"icon-upload",disabled:!this.model.get("writable")},listeners:{click:this._trackUpload.bind(this),add:this.addUpload.bind(this)}},cancel:{klass:he,target:".button-cancel-all-target",appendToTarget:!1,options:{className:"button-cancel-all",text:O.get("upload.detail.cancelAll"),linkstyled:!0},listeners:{click:this.onCancelAll.bind(this)}},resumeAll:{klass:he,target:".button-retry-all-failed-target",options:{text:O.get("upload.detail.retryFailedUploads"),primary:!0},listeners:{click:this.onResumeAll.bind(this)}}}},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.autoClose&&(this.autoClose=!0),Object.prototype.hasOwnProperty.call(e,"canClose")&&(this.canClose=e.canClose),this.uploadManager=e.uploadManager,this.listenTo(this.uploadManager,"update-stats",this.onUploadStats)},onAfterRender:function(){this.overlayEl.classList.add("uploaddetail-overlay");var e=this.uploadManager.getStats();this.updateMinimizeButtonState(e),this.updateCloseButtonState(e),this.updateCancelAllButtonState(e),this.updateRetryAllButtonState(e)},updateMinimizeButtonState:function(e){var t=e.remaining>0;this.getSubview("minimize").setState(t)},updateCloseButtonState:function(e){var t=0===e.remaining;this.getSubview("close").setState(t)},updateCancelAllButtonState:function(e){var t=e.remaining>0;this.getSubview("cancel").setState(t)},updateRetryAllButtonState:function(e){var t=e.remaining,n=e.resumable,i=0===t&&n>0;this.getSubview("resumeAll").setState(i)},onBeforeClose:function(){this.uploadManager.getStats().remaining||this.uploadManager.removeFinished(),oe.track({op:"upload-status-hide",target:"overlay"})},addUpload:function(e){this.uploadManager.addFiles(this.model,e)},_trackUpload:function(){oe.track({op:"upload",target:"overlay"})},onCancelAction:function(e,t){t.data=e.get("status"),this.uploadManager.cancel(e)},onResumeAction:function(e,t){t.data=e.get("error"),this.uploadManager.resume(e)},onCancelAll:function(){this.uploadManager.abort()},onResumeAll:function(){this.uploadManager.resumeAll()},onGridClick:function(e,t,n){if(e){var i=n.target.closest("[data-action]"),r={};if(!i)return;var o=i.dataset.trackOp,a=i.dataset.trackTarget;o&&a&&(r={op:o,target:a});var s=this[{cancel:"onCancelAction",resume:"onResumeAction"}[i.dataset.action]];"function"==typeof s&&s.call(this,e,r),r.op&&r.target&&oe.track(r)}},onUploadStats:function(e){this.updateMinimizeButtonState(e),this.updateCloseButtonState(e),this.updateCancelAllButtonState(e),this.updateRetryAllButtonState(e),this.autoClose&&0===e.remaining&&0===e.failed&&this.close()}}),tl=Et.extend({model:$t,defaults:{sortCol:"display_name",sortDir:"asc"},comparators:{display_name:function(e,t){return Dt.compare(e,t)},type:function(e,t){return Dt.compare(e,t,(function(e,t){return Dt.compareString(e.get("ext"),t.get("ext"))}))},size:function(e,t){return Dt.compare(e,t,(function(e,t){return(e.has("size")?parseInt(e.get("size"),10):0)-(t.has("size")?parseInt(t.get("size"),10):0)}))},mtime:function(e,t){return Dt.compare(e,t,(function(e,t){return(e.has("mtime")?e.get("mtime")-new Date(1e3*e.get("mtime")).getSeconds():0)-(t.has("mtime")?t.get("mtime")-new Date(1e3*t.get("mtime")).getSeconds():0)}))}},initialize:function(e,t){Et.prototype.initialize.apply(this,arguments),this.options=l.a.extend({},this.defaults,t),this.comparator=this.comparators.display_name,Ot(this,{filter:function(e){return e.get("readable")}}),jt(this,{key:this.options.sortCol,direction:this.options.sortDir})},parse:function(e){Array.isArray(e)||(e=new Array(e));for(var t=0;t<e.length;t++){var n=e[t];n.path&&(n.path=Ue.unifyPath(n.path))}return this.options.itemFilter&&(e=e.filter(this.options.itemFilter,this)),e},getSelectionSummary:function(){var e,t={total:0,byExt:{},downloadable:0,renamable:0,encrypted:0,parentWritable:0,shared:0,shareable:0,selectable:0};return this.each((function(n){n.get("readable")&&t.selectable++,n.selected&&(t.total++,n.isDownloadable()&&t.downloadable++,n.get("renamable")&&t.renamable++,n.get("encrypted")&&t.encrypted++,n.get("parent_writable")&&t.parentWritable++,n.get("share")&&t.shared++,n.get("shareable")&&t.shareable++,e=n.get("ext")||"",t.byExt[e]?t.byExt[e]++:t.byExt[e]=1)})),t}}),nl=B.extend({_runningLoad:null,_runningRefresh:null,initialize:function(e){if(!e)throw new Error("FolderSyncService.initialize: folder model required.");this._folder=e},_requestFolderData:function(e){var t=this._folder;return vi.getDir(t.get("path"),t.getContext(),e)},_abortLoad:function(){this._runningLoad&&(this._runningLoad.abort(),this._runningLoad=null)},_abortRefresh:function(){this._runningRefresh&&(this._runningRefresh.abort(),this._runningRefresh=null)},load:function(e){var t=this._folder;return this._abortRefresh(),this._abortLoad(),this._runningLoad=this._requestFolderData(e),this._runningLoad.done((function(e){t.set(t.parse(e)),t.files.reset(t.get("members"),{parse:!0})}))},refresh:function(e){var t=this._folder;return this._abortRefresh(),this._runningRefresh=this._requestFolderData(e),this._runningRefresh.done((function(e){t.set(t.parse(e)),t.files.set(t.get("members"),{parse:!0,add:!0,remove:!0,stripTempfileMtime:!0})}))}});function il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?il(Object(n),!0).forEach((function(t){ol(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ol(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var al=$t.extend({defaults:{path:"",id:"",type:L.directory},files:null,classItemFilter:function(){return!0},initialize:function(e,t){var n,i;$t.prototype.initialize.apply(this,arguments),this.options=l.a.extend({},t),i=(n=this.options.itemFilter)?function(){return n.apply(this,arguments)&&this.classItemFilter.apply(this,arguments)}.bind(this):this.classItemFilter.bind(this),this._queryData=l.a.clone(this.queryData)||{fields:[]},this.options.queryData&&l.a.extend(this._queryData,this.options.queryData),this._queryData.fields=this._queryData.fields.join(","),this.files=new tl([],{context:this.getContext(),itemFilter:i,sortCol:this.options.sortCol||"display_name",sortDir:this.options.sortDir||"asc"}),this.listenTo(Z,"api:newFolder:created api:newFile:created api:copyFiles:done api:moveFiles:done",this._onCreatedNewItem),this.listenTo(this.files,"add",this.onAdd),this.listenTo(Ct,"added",this._onDeleteListAdded),this.listenTo(Ct,"recovered",this._onDeleteListRecovered),this._syncService=new nl(this)},_onCreatedNewItem:function(e,t){var n=[].concat(t),i=this.getContext();this.get("path")===e&&l.a.every(n,(function(e){return i===e.getContext()}))&&this.files.add(l.a.invoke(n,"clone"))},onAdd:function(e){e&&e.set({parent_writable:this.get("writable")},{silent:!0})},_prepareFetchData:function(){var e=l.a.clone(this._queryData),t=this.get("path");return Ue.isEncrypted(K.urlDecode(t))&&l.a.extend(e,{members:"none"}),e},load:function(e){return this.reset({path:e}),this.trigger("load:start",e),this.files.trigger("load:start",e),this._syncService.load(this._prepareFetchData()).done(function(){this.files.trigger("load"),this.trigger("load")}.bind(this)).fail(function(){this.files.trigger("load:error"),this.trigger("load:error")}.bind(this))},refresh:function(){return this._syncService.refresh(this._prepareFetchData())},parse:function(e){var t,n,i,r=e.members||[],o=L.directory,a=$t.prototype.parse.call(this,rl(rl({},e),{},{type:o}));return a.writable&&r.forEach((function(e,t){r[t].parent_writable=!0})),t=r.map((function(e){return e.id})),n=Ct.filterByType(this.getItemType(),(function(e){return-1!==t.indexOf(e.get("id"))})),i=l.a.pluck(n,"id"),r=r.filter((function(e){return-1===i.indexOf(e.id)})),a.members=r,a},reset:function(e){var t=l.a.extend({},this.defaults,e),n=l.a.omit(this.attributes,Object.keys(t));this.set(t),this.set(n,{unset:!0}),this.files.reset([])},getPath:function(e){return this.get("path")+(this.get("path")===N.rootPath?"":"/")+e.get("name")},getFileCount:function(){return this.files.where({isDir:!1}).length},sort:function(){},_onDeleteListAdded:function(e,t){var n,i;if(e===this.getItemType()){if(!(n=t.filter(function(e){return!!this.files.get(e.get("id"))}.bind(this))).length)return;(i=l.a.compact(this.files.remove(n,{silent:!0}))).length&&this.files.trigger("remove:end",i)}},_onDeleteListRecovered:function(e,t){var n;if(e===this.getItemType()){if(!(n=t.filter(function(e){return e.get("parent_id")===this.get("id")}.bind(this))).length)return;this.files.add(n,{silent:!0}),this.files.trigger("add:end",n)}}}),sl=al.extend({isShareable:function(){return!!this.get("shareable")},initialize:function(){al.prototype.initialize.apply(this,arguments),this.listenTo(Z,"api:rename:success",this._onRenameSuccess)},queryData:{fields:["id","path","readable","writable","shareable","rshare","chash","members.id","members.parent_id","members.name","members.ctime","members.mtime","members.mime_type","members.path","members.readable","members.writable","members.shareable","members.teamfolder","members.type","members.size","members.rshare","members.image.height","members.image.width","members.image.exif.Orientation"],members:"all"},rename:function(e,t){if(!e)throw new Error("no model to rename defined");if(!(e instanceof this.files.model))throw new Error("FileItem Model required to rename");if(void 0===t)throw new Error("new name required in rename");if(!l.a.isString(t))throw new Error("new name must be of type string in rename");return this.modelToRename=e,vi.rename(e,t).progress(function(e,t){this.files.remove(e),this.files.add(t)}.bind(this)).fail(function(e,t){this.files.remove(t),this.files.add(e)}.bind(this)).always(function(){this.modelToRename=null}.bind(this))},_onRenameSuccess:function(e,t){this.files.get(e.id)&&e!==this.modelToRename&&(this.files.remove(e),this.files.remove(this.files.where({path:t.get("path")})),this.files.add(t.clone()))}}),ll=sl.extend({isShareable:function(){return!1},classItemFilter:function(e){return e.readable&&"symlink"!==e.type},parse:function(e){return(e=al.prototype.parse.apply(this,arguments))?(e.path&&0!==e.path.indexOf("/")&&(e.path="/"+e.path),e):null},queryData:{fields:["id","path","readable","writable","members.id","members.parent_id","members.name","members.mtime","members.mime_type","members.path","members.readable","members.writable","members.type","members.image.width","members.image.height","members.image.exif.Orientation","members.size"],members:"all"}}),cl=n(44),ul=n.n(cl),dl=n(45),hl=n.n(dl),fl=n(46),pl=n.n(fl),gl=Q.Object.extend({initialize:function(){this._cache={}},set:function(e,t){if("string"!=typeof e)throw new Error("Provided key must be a string");if("string"!=typeof t)throw new Error("Provided value must be a string");this._cache[e]=t},get:function(e){if("string"!=typeof e)throw new Error("Provided key must be a string");return l.a.has(this._cache,e)?this._cache[e]:null},remove:function(e){if("string"!=typeof e)throw new Error("Provided key must be a string");l.a.has(this._cache,e)&&delete this._cache[e]}}),ml=gl.extend({initialize:function(e){if(!(e instanceof window.Storage))throw new Error("Provided backend needs to be instance of window.Storage");this._backend=e},set:function(e,t){var n=this._getKey(e);if("string"!=typeof t)throw new Error("Provided value must be a string");try{this._backend.setItem(n,t)}catch(e){}},get:function(e){var t=this._backend.getItem(this._getKey(e));return null!=t?String(t):null},remove:function(e){this._backend.removeItem(this._getKey(e))},_getKey:function(e){if("string"!=typeof e)throw new Error("Provided key must be a string");return q.getAppNamespaceKey(e)}},{isAvailable:function(e){var t,n="__storage_test__";try{return(t=window[e]).setItem(n,n),t.removeItem(n),!0}catch(e){return!1}}}),vl=ml.isAvailable("localStorage")?new ml(window.localStorage):new gl,yl=function(){};l.a.extend(yl.prototype,{check:function(e,t,n,i,o,a){return function(e){var t,n;return"dir"!==e.get("group")?r.a.Deferred().resolve().promise():(t=e.getFolder(),n=r.a.Deferred(),vi.getMeta({context:t.getContext(),pid:t.get("id"),path:e.get("name")}).then((function(){n.reject(Oo.error.EXIST)}),(function(e){404!==e.status?0!==e.status?n.reject(Oo.error.GENERIC):n.reject(Oo.error.NETWORK):n.resolve()})),n.promise())}(e).then((function(){e.set("on_exist","autoname"),n()}),(function(e){a(e)}))},reset:function(){}});var wl=yl;function bl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var xl=Q.View.extend({className:"appView",template:l.a.template(ul.a),initialize:function(){var e=this;this.views={};var t=vl.get("fm_sort_key"),n=vl.get("fm_sort_dir"),i=new wl;this.viewModeModel=new a.a.Model({viewMode:tt.TILES}),this.uploadManager=new Aa({conflictCheck:i.check.bind(i)}),this.listenTo(this.uploadManager,"add",this.onUploadAdded),this._filemanagerModel=new ll({},{sortCol:t,sortDir:n}),this.listenTo(this._filemanagerModel,"change",this.onFilesUpdated),this.listenTo(this._filemanagerModel.files,"sortBy",this.onSortBy),this.listenTo(this._filemanagerModel.files,"load add add:end remove remove:end selectAll deselectAll change:selected",this.onFilesUpdated),this.listenTo(this._filemanagerModel.files,"selectAll deselectAll change:selected",this._onFilesSelectionChanged),this.listenTo(this._filemanagerModel.files,"load:start",this.onLoadStart),this.listenTo(Z,"api:rename:error",this.onRenameError),this.listenTo(Z,"api:download:error",this.onDownloadError),this.listenTo(Yr.OverlayManager.instance(),"pushed:first",this.onOverlayRendered),this.listenTo(Yr.OverlayManager.instance(),"popped:last",this.onOverlayRemoved),this.listenTo(this.viewModeModel,"change:viewMode",this.onViewmode),this.states={delete:new ir({action:function(){le.execute("deleteFiles",e._filemanagerModel.files.getSelected())}}),downloadAll:new ir({action:function(){e._filemanagerModel.trigger("download")}}),downloadSelection:new ir({action:function(){e._filemanagerModel.trigger("download")}}),newFolder:new ir({action:function(){le.execute("newFolder",{folder:e._filemanagerModel,targetView:e.getSubview("filemanager")})}}),rename:new ir({action:function(){le.execute("rename",{view:e.getSubview("filemanager"),model:e._filemanagerModel.files.firstSelected()})}}),select:new ir({action:function(){e._filemanagerModel.files.selectAll()}}),unselect:new ir({action:function(){e._filemanagerModel.files.deselectAll()}}),upload:new ir({action:function(t){e.uploadManager.addFiles(e._filemanagerModel,t)}})},this._boundOnScrollFn=this._onScroll.bind(this),window.addEventListener("scroll",this._boundOnScrollFn,{passive:!0})},subviews:function(){var e=this,t=new Ms({model:this._filemanagerModel,attributes:{"data-qa":"toolbar_sortFlyout"}}),n=new Ns({model:this.viewModeModel});return{header:{klass:ne,target:".header-target",listeners:{logout:function(){return e.trigger("navigate","logout",{trigger:!0})},show:function(){e._toggleHeader(!0),e._toggleMenubar(!0)}}},footer:{klass:oo,target:".footer-target"},menubar:{klass:Yr.Menubar,target:".menubar-target",options:{className:"menubar",items:{upload:new Yr.UploadButton({text:O.bind("toolbar.item.upload"),state:this.states.upload,iconClass:"icon-upload",attributes:{"data-qa":"menubar_upload"}}),downloadAll:new Yr.IconButton({state:this.states.downloadAll,text:O.bind("filemanager.downloadAll"),iconClass:"icon-toolbar-download",attributes:{"data-qa":"menubar_download_all"}}),downloadSelection:new Yr.IconButton({state:this.states.downloadSelection,text:O.bind("filemanager.downloadSelected"),iconClass:"icon-toolbar-download",attributes:{"data-qa":"menubar_download_selection"}}),more:new Lr({text:O.bind("toolbar.item.more"),iconClass:"icon-more",alignment:"bottom right",origin:"top right",buttonAttributes:{"data-qa":"menubar_more_button"},items:[{text:O.bind("filemanager.selectall"),state:this.states.select,tracking:{op:"selectAll",target:"moreButton"},attributes:{"data-qa":"menubar_selection"}},{text:O.bind("filemanager.deselectAll"),state:this.states.unselect,tracking:{op:"deselectAll",target:"moreButton"},attributes:{"data-qa":"menubar_selection_cancel"}},{text:O.bind("moremenu.files.delete"),state:this.states.delete,tracking:{op:"delete-start",target:"moreButton"},attributes:{"data-qa":"menubar_delete"}},{text:O.bind("filemanager.rename.button.title"),state:this.states.rename,tracking:function(){return{op:"rename-start",target:"moreButton",viewmode:e.viewModeModel.get("viewMode")}},attributes:{"data-qa":"menubar_rename"}},{text:O.bind("filemanager.newfolder.button"),state:this.states.newFolder,tracking:{op:"new-folder",target:"moreButton"},attributes:{"data-qa":"menubar_new_folder"}}]})}}},toolbar:{klass:Yr.Menubar,target:".toolbar-target",options:{className:"toolbar",items:{sortFlyout:t,viewModeFlyout:n}}},login:{klass:lo,target:"#content",appendToTarget:!0,options:{loginCallback:$.get().login.bind($.get())}},loading:{klass:Q.View,target:"#content",appendToTarget:!0,options:{className:"loading-page",template:hl.a}},error:{target:"#content",appendToTarget:!0,klass:ho},teaser:{target:"#content",appendToTarget:!0,klass:go},folderFlyout:{klass:js,target:".folder-flyout-target",options:{model:this._filemanagerModel,segmentBuilder:Do((function(){return K.urlDecode(e.rootName)}))},listeners:{navigate:this.onFolderFlyoutNavigate.bind(this)}},filemanager:{klass:ks,target:"#content",appendToTarget:!0,options:{model:this._filemanagerModel,collection:this._filemanagerModel.files,downloadArchivePrefix:O.bind("filemanager.download.archiveprefix"),editEnabled:!0,uploadEnabled:!0,uploadManager:this.uploadManager,emptyTpl:pl.a,viewMode:this.viewModeModel.get("viewMode")},listeners:{open:this.onOpen.bind(this)}},sharelink:{klass:Co,target:"#content",appendToTarget:!0,listeners:{error:function(t){return e.trigger("error",t)}}}}},onUploadAdded:function(){var e=this;this.uploadDetailsOpen||(new el({uploadManager:this.uploadManager,model:this._filemanagerModel,autoClose:!1,canClose:!1}).open().then((function(){e.uploadDetailsOpen=!1})),this.uploadDetailsOpen=!0)},_onMessage:function(e){le.execute("showToast",e)},onDownloadError:function(e,t){var n=bl(e,1)[0],i=n.urlDecode("path"),r=O.bind("filemanager.download.error.common",i);404===t.status&&(r=n.files?O.bind("filemanager.download_dir.error.404",i):O.bind("filemanager.download.error.404",i)),this._onMessage({msg:r})},onRenameError:function(e,t,n){var i=[z.breakable(e.get("display_name"))],r=409===n.status?O.bind("filemanager.rename.toast.error.exists",i):O.bind("filemanager.rename.toast.error.general",i);this._onMessage({msg:r})},onViewmode:function(){this.getSubview("filemanager").setViewMode(this.viewModeModel.get("viewMode"))},onSortBy:function(e,t){vl.set("fm_sort_key",e),vl.set("fm_sort_dir",t)},onAfterRender:function(){this._disableActions()},remove:function(){window.removeEventListener("scroll",this._boundOnScrollFn),Q.View.prototype.remove.apply(this)},show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.path||"/";switch(this._hideOtherPages(e),this.getSubview("toolbar").setActive(!1),this.el.setAttribute("data-page",e),e){case"error":this._showViews(["error","teaser"],t);break;case"login":this._showViews(["login","teaser"],t.error?t:null);break;case"filemanager":t.shareInfo&&this.viewModeModel.set({viewMode:ot(t.shareInfo.viewmode)}),this._showViews(["folderFlyout","filemanager"]),this._filemanagerModel.load(n);break;case"sharelink":this._showViews(["sharelink"],t);break;case"loading":this._showViews(["loading"])}},_hideOtherPages:function(e){var t=this,n=Object.keys(this.subviews()),i=["header","footer","menubar",e];n.filter((function(e){return i.indexOf(e)<0})).forEach((function(e){t.getSubview(e).el.classList.add("hidden")}))},_showViews:function(e,t){var n=this;e.forEach((function(e){n.getSubview(e).el.classList.remove("hidden"),t&&n.getSubview(e).render(t)}))},setRoot:function(e){this.rootName=e},onOverlayRendered:function(){document.body.classList.add("overlayed")},onOverlayRemoved:function(){document.body.classList.remove("overlayed")},onOpen:function(e,t){var n=e.get("type");n===L.directory?this._filemanagerModel.load(e.get("path")):n!==L.symlink&&le.execute("showFile",e,t)},onFolderFlyoutNavigate:function(e){this._filemanagerModel.load(e)},onLoadStart:function(e){this.trigger("navigate","$"+e),this.getSubview("toolbar").setActive(!1),this._disableActions()},onFilesUpdated:function(){var e=this.getSubview("toolbar"),t=this._filemanagerModel,n=this._filemanagerModel.files.getSelectionSummary(),i=!!t.get("writable");e.setActive(!!n.selectable),this._setState("delete",i&&!!n.total),this._setState("downloadAll",!!n.selectable&&!n.total),this._setState("downloadSelection",!n.byExt.webupload&&n.total>0),this._setState("newFolder",i&&!n.total),this._setState("rename",i&&!!n.renamable&&1===n.total),this._setState("select",n.selectable>n.total),this._setState("unselect",n.total>0),this._setState("upload",i&&!n.total),this.getSubview("filemanager").setDropUploadEnabled(!n.total)},_disableActions:function(){l.a.invoke(this.states,"setState",!1)},_setState:function(e,t){this.states[e].setState(t)},_onScroll:function(){var e=T(),t=this._isAtTheTop(),n=e-(this._scrollPos||0),i=Math.abs(n)>=50,r=this._hasSelection();this._toggleHeader(t),i&&(this._toggleMenubar(t||r||n<0),this._scrollPos=e)},_isAtTheTop:function(){return T()<1},_hasSelection:function(){return!!this._filemanagerModel.files.firstSelected()},_onFilesSelectionChanged:function(){var e=this._isAtTheTop(),t=this._hasSelection();this._toggleMenubar(e||t)},_toggleMenubar:function(e){e?this.el.classList.remove("menubar-hidden"):this.el.classList.add("menubar-hidden")},_toggleHeader:function(e){e?this.el.classList.remove("header-hidden"):this.el.classList.add("header-hidden")}});var kl=a.a.Router.extend({defaultRoute:"login",routesHit:0,defaults:{langStorageKey:"lang",lang:"en"},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return l.a.map(n,(function(e){return e||null}))},_setTitle:function(){var e=O.get("app.tabtitle");b(e)},initialize:function(){this.route("lang/:lang",this.language);var e,t,n,i,r=(e=O.getLanguages(),t=this.defaults.lang,(i=g())&&(i=-1!==(n=i).indexOf("-")?n.split("-")[0]:n,-1!==e.indexOf(i))?i:t&&-1!==e.indexOf(t)?t:e[0]),o=this.getStoredLanguageKey();try{O.setLang(o||r)}catch(e){O.setLang(r),this.removeStoredLanguageKey()}this._setTitle(),this.auth=$.get(),a.a.history.on("route",(function(){this.routesHit++}),this),this.buildViews()},execute:function(e,t,n){var i,r=Qi.instance().getStack();if(r.length>0)return r[r.length-1].canClose&&r.reverse().forEach((function(e){e.close()})),void(t&&t.originalEvent.oldURL&&(i=t.originalEvent.oldURL.split("#")[1])&&this.navigate(i));a.a.Router.prototype.execute.call(this,e,t,n)},buildViews:function(){},back:function(e){this.routesHit>e?window.history.go(0-e):this.navigate(this.defaultRoute,{trigger:!0,replace:!1})},restart:function(e){this.buildViews(),e&&this.back(e)},language:function(e){var t=this;r()("body").fadeOut("fast",(function(){try{t.setLanguage(e),t.restart(1)}catch(e){console.error("Error while switch language: ",e),t.back(1)}finally{r()("body").show()}}))},setLanguage:function(e){O.setLang(e),this._setTitle(),this.setStoredLanguageKey(e)},getStoredLanguageKey:function(){return vl.get(this.defaults.langStorageKey)||null},setStoredLanguageKey:function(e){vl.set(this.defaults.langStorageKey,e)},removeStoredLanguageKey:function(){vl.remove(this.defaults.langStorageKey)}}),El=Q.Object.extend({initialize:function(e,t){if("number"!=typeof e||e<2)throw new Error("length must be number greater 1");if("number"!=typeof t||t<1)throw new Error("interval must be number greater 0");this._length=e,this._interval=t,this.reset()},update:function(){this._streak.push((new Date).getTime()),this._streak.length>this._length&&this._streak.shift()},hasStreak:function(){return this._streak.length===this._length&&this._streak[this._length-1]-this._streak[0]<=this._interval},reset:function(){this._streak=[]}});function Sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sl(Object(n),!0).forEach((function(t){Cl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jl=Q.Object.extend({REAUTH_STREAK_LENGTH:5,REAUTH_STREAK_INTERVAL:1e4,initialize:function(){this._reauthStreakDetector=new El(this.REAUTH_STREAK_LENGTH,this.REAUTH_STREAK_INTERVAL),this._access_token=null,this._reauth_fn=null},init:function(e){e.reauth_fn&&(this._reauth_fn=e.reauth_fn),e.access_token&&(this._access_token=e.access_token)},getAccessToken:function(){return this._access_token},isAuthorized:function(){return!!this._access_token},_invalidateAuthorization:function(){this._access_token=null},addAuthToUrl:function(e){var t=this.getAccessToken();return t?on(e,"access_token",t):""},addAuthToXhr:function(e,t){this.getAccessToken()&&(e.beforeSend=function(e){e.setRequestHeader("Authorization","Bearer "+this._access_token),t&&t(e)}.bind(this))},ajax:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isAuthorized())throw new Error("not logged in");var t,n,i,o={timeout:9e4,retry:!0},a=Tl(Tl(Tl({},o),e),{},{error:void 0});return this.addAuthToXhr(a,e.beforeSend),t=r.a.ajax(a),n=function(){return this._reauthStreakDetector.reset(),t}.bind(this),i=function(n,i){var o=e.error||r.a.noop,s=e.context||this;return"timeout"===i?(o.apply(s,arguments),t):this._shouldReauth(n,a)?(this._invalidateAuthorization(),this._reauth_fn().then(this.ajax.bind(this,e),(function(){return t}))):(o.apply(s,arguments),t)}.bind(this),l.a.extend({},t,t.then(n,i))},_shouldReauth:function(e,t){return 401===e.status&&(!!t.retry&&(!!this._reauth_fn&&(this._reauthStreakDetector.update(),!this._reauthStreakDetector.hasStreak())))}}),Dl=jl.extend({initialize:function(){this._sid=null,this._password_login=!1,jl.prototype.initialize.apply(this,arguments)},init:function(e){e.sid&&(this._sid=e.sid),jl.prototype.init.apply(this,arguments)},_invalidateAuthorization:function(){this._password_login=!1,jl.prototype._invalidateAuthorization.apply(this)},hasPassword:function(){return this._password_login},getShareInfo:function(){return r.a.get("/api/share/info",{id:this._sid})},getUser:function(){return{home:N.rootPath}},login:function(e){var t={id:this._sid};return(e=l.a.extend({password:null},e)).password&&(l.a.extend(t,{password:e.password}),this._password_login=!0),r.a.ajax({url:"/api/share/token",method:"POST",data:t}).then(function(e){return this._access_token=e.access_token,t.password&&(e.password=t.password),this.trigger("login:success",e),e}.bind(this),function(e){return this._password_login=!1,this.trigger("login:error",e.status),e}.bind(this)).always(function(){this.trigger("auth")}.bind(this))},logout:function(){return this.ajax({url:"/api/share/token",method:"DELETE"}).done(function(){this._invalidateAuthorization(),this.trigger("logout:success"),this.trigger("auth")}.bind(this))}});function Ol(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Al=["max-age","domain","comment","commenturl","path","secure","version","discard","port"];function Ml(){var e=f().split(".");if(e.length>2&&e.splice(0,1),!(e.length<2))return e.join(".")}function Il(e,t){return e+"="+t}var Fl=function(e,t,n){var i,r;if("string"!=typeof e)throw new Error("cookie.set: name must be string");if(Al.indexOf(e.toLowerCase())>-1)throw new Error("cookie.set: name ("+e+") must not be a preserved keyword");if("string"!=typeof t)throw new Error("cookie.set: value must be string");if(i={"max-age":n||31536e4,SameSite:"Strict"},q.get("setParentDomainCookies")){var o=Ml();o&&(i.domain=o)}i=Object.entries(i).map((function(e){var t=Ol(e,2);return Il(t[0],t[1])})).join("; "),r=Il(encodeURIComponent(e),encodeURIComponent(t)),_(r+"; "+i)},zl=function(e){var t,n,i;if(!e)throw new Error("cookie.get: no name parameter defined");return i=encodeURIComponent(e),t=new RegExp("(?:^|; )"+i+"=([^;]*)(?:;|$)"),(n=x().match(t))?decodeURIComponent(n[1]):null},Ll=function(e){var t,n;if(!e)throw new Error("cookie.remove: no name parameter defined");n=encodeURIComponent(e)+"=; max-age=0",q.get("setParentDomainCookies")&&(t=Ml()),t&&(n+="; domain="+t),_(n)},Nl=n(47),Vl=n.n(Nl),$l=a.a.View.extend({className:"eu-cookie",events:{"click .close":"onClose"},initialize:function(e){var t={show_cb:l.a.noop,hide_cb:l.a.noop,cookieName:"eu_cookie",cookieVersion:1};this.config=l.a.extend({},t,e),q.get("EuCookieVersion")&&(this.config.cookieVersion=q.get("EuCookieVersion")),q.get("EuCookieName")&&(this.config.cookieName=q.get("EuCookieName")),this.render()},onClose:function(){var e=this;this.createCookie()&&this.$el.fadeOut("fast",(function(){e.config.hide_cb.apply(e),e.remove()}))},isValidCookieVersion:function(){var e=zl(this.config.cookieName);return null!==e&&""!==e&&(e=parseInt(e,10),!isNaN(e)&&e>=this.config.cookieVersion)},isEnabled:function(){return q.get("hasEuCookie")},createCookie:function(){return Fl(this.config.cookieName,this.config.cookieVersion.toString()),this.isValidCookieVersion()},render:function(){return this.isEnabled()&&!this.isValidCookieVersion()?(this.$el.html(l.a.template(Vl.a)({text:O.get("eu_cookie.text"),url:ro().euCookie,url_text:O.get("eu_cookie.url_text")})),this.config.show_cb.apply(this)):(this.isEnabled()||Ll(this.config.cookieName),this.remove()),this}}),Rl=kl.extend({defaultRoute:"$/",sid:null,shareInfo:{},views:{},routes:{"$*path":"path","!:error":"error","login(/:state)":"login",logout:"logout",file:"sharelink"},initialize:function(){$.register(N.authContext.default,(function(){return new Dl})),kl.prototype.initialize.apply(this,arguments),this.initialRoute=d().hash.replace(/^#$/,""),this.listenTo(this.auth,"login:success",this._onLoginSuccess),this.listenTo(this.auth,"login:error",this._onLoginError)},start:function(){var e=d().pathname,t=e.match(/lnk\/([a-zA-Z0-9]{8})/),n=e.match(/share\/([a-z0-9.-]{10})/);this.navigate(),this.initialRoute.search(/^#lang\/.*$/)>-1&&this.navigate(this.initialRoute,!0),t?(this.sid=t[1],this.navigate("file",{replace:!0,trigger:!0})):n?(this.sid=n[1],this.authenticate()):this.navigate("!404",!0)},_onLoginSuccess:function(e){this.appView.setRoot(e.root_name);var t=this.initialRoute.replace(/^#[^$/].*/,"$/")||"$/";this.navigate(t,{trigger:!0,replace:!1})},_onLoginError:function(e){if(d().hash.match(/#login/)){var t=500;403!==e&&401!==e||(t="password"),this.appView.show("login",{error:t})}else 401===e?this.navigate("login",{trigger:!0,replace:!1}):this.navigate("!"+e,{trigger:!0,replace:!1})},_onReauthError:function(e){401===e.status?this.navigate("login/expired",{trigger:!0,replace:!0}):404===e.status?this.navigate("!404",!0):this.navigate("!500",!0)},authenticate:function(){var e=this;this.sid?(this.auth.init({sid:this.sid,reauth_fn:function(){return this.auth.login().fail(this._onReauthError.bind(this))}.bind(this)}),this.auth.getShareInfo().done((function(t){e.shareInfo=t,t.is_encrypted?e.navigate("!500",!0):t.has_password?e.navigate("login",!0):e.auth.login()})).fail((function(t){var n=t.status;400===n&&(n=404),e.navigate("!"+n,!0)}))):this.navigate("!404",!0)},buildViews:function(){this.appView?this.appView.render():(this.appView=new xl,this.listenTo(this.appView,"navigate",(function(e,t){var n=l.a.defaults({},t,{trigger:!1});this.navigate(e,n)})).listenTo(this.appView,"error",this.error),r()("body").html(this.appView.render().$el)),this.eu_cookie&&this.eu_cookie.remove(),this.eu_cookie=new $l({show_cb:function(){this.$el.prependTo(r()("body")),r()("body").addClass("show_eu_cookie")},hide_cb:function(){r()("body").removeClass("show_eu_cookie")}}),this.appView.show("loading")},login:function(e){this.appView.show("login",{error:e})},logout:function(){$.get().logout().always(function(){u(h())}.bind(this))},path:function(e){this.auth.isAuthorized()?this.appView.show("filemanager",{path:e,shareInfo:this.shareInfo}):this.navigate("login",!0)},error:function(e){this.appView.show("error",{code:e})},sharelink:function(){this.appView.show("sharelink",{sid:this.sid})}}),Bl=/#.[^:]+(:.*)?$/gm,ql=/[/](lnk|share)[/][a-zA-Z0-9.-]{8,}/gm;function Ul(e){return e.replace(ql,"/$1/".concat("XXXXX")).replace(Bl,"$1")}var Hl={format:function(e,t,n,i,r){var o,a,s,l="";return"string"==typeof t&&(l=Ul(t)),o=[e," in ",l,":",n,":",i].join(""),r&&(s=r.stack,a=r.message||"<no message>"),s?[a,s=Ul(s)].join("\n"):o}},Wl=[/^\s*$/,/^Java exception was raised during method invocation/,/Content Security Policy directive: "default-src x-apple-ql-id: 'unsafe-inline'"/,/^can't redefine non-configurable property "userAgent"/,/^Cannot read property '_avast_submit' of undefined/,/moz-extension:\/\//,/_submitInjector@/,/^[^\n\r]*\sin\s(undefined)?:0?:\s*$/],Gl=function(e){return Wl.some((function(t){return e.match(t)}))};var Kl,Xl={send:function(e){var t=r.a.Deferred(),n=new XMLHttpRequest;return n.open("POST","/jserror"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.addEventListener("load",(function(){200!==n.status?t.reject():t.resolve()})),n.send("msg="+encodeURIComponent(e)),t.promise()}},Yl=0,Jl=!1;function Ql(){Jl=!0}function Zl(e,t,n,i,r){var o,a,s,l="version: "+Kl;if(!(0===n&&0===i||(Yl++,Jl||Yl>10)))try{if(o=Hl.format(e,t,n,i,r),Gl(o))return;(a=[l,o].join("\n--\n")).length>2048&&(a=a.substring(0,2044),a+=" […]"),Xl.send(a).then(null,Ql)}catch(e){try{s=[l,"error while processing log request: "+e.toString()].join("\n--\n"),Xl.send(s).then(null,Ql)}catch(e){}console.error("error while processing log request:",e)}}var ec={install:function(){C(Zl),Yl=0,Jl=!1,Kl=q.getBuild()}},tc=n(48),nc=n.n(tc),ic=dr.extend({template:l.a.template(nc.a),initialize:function(e){this.data=e,this.okButton=new he({className:"confirm-overlay-ok",text:this.data.okButtonText||O.get("confirm.ok")}),this.listenTo(this.okButton,"click",this.onOk),this.cancelButton=new he({className:"confirm-overlay-cancel",text:this.data.cancelButtonText||O.get("confirm.cancel"),secondary:!0}),this.listenTo(this.cancelButton,"click",this.onCancel),this.affirmCheckbox=new Sr({name:"check-affirm",attributes:{"data-qa":"confirm_checkbox"},text:this.data.affirmMessage}),this.listenTo(this.affirmCheckbox,"check",this.onCheck)},onAfterOpen:function(){this.hotkeyManager.addHotkey(this,Yi.enter,this.onOk.bind(this))},render:function(){var e,t;return this.$overlayEl.addClass("confirm-overlay"),this.$el.html(this.template({affirmMessage:l.a.result(this.data,"affirmMessage"),message:l.a.result(this.data,"message"),title:l.a.result(this.data,"title")})),(e=this.$(".ok-target")).length&&e.replaceWith(this.okButton.render().$el),(t=this.$(".cancel-target")).length&&t.replaceWith(this.cancelButton.render().$el),this.data.affirmMessage&&this.$(".affirm-target").replaceWith(this.affirmCheckbox.render().$el),this},remove:function(){return this.okButton.remove(),this.cancelButton.remove(),this.affirmCheckbox.remove(),dr.prototype.remove.apply(this,arguments)},onOk:function(){this._isAffirmed()&&this.close(!0)},onCancel:function(){this.close(!1)},onCheck:function(e){e&&(this.$overlayEl.removeClass("has-error"),this.affirmCheckbox.toggleError(!1))},_isAffirmed:function(){var e;return!this.data.affirmMessage||(e=this.affirmCheckbox.getValue(),this.$overlayEl.toggleClass("has-error",!e),this.affirmCheckbox.toggleError(!e),e)}}),rc=n(49),oc=n.n(rc),ac=(dr.extend({template:l.a.template(oc.a),initialize:function(e){this.data=e,this.okButton=new he({className:"alert-overlay-ok",text:this.data.buttonText||O.get("confirm.ok")}),this.listenTo(this.okButton,"click",this.onOk)},onAfterOpen:function(){this.hotkeyManager.addHotkey(this,Yi.enter,this.onOk.bind(this))},render:function(){this.$overlayEl.addClass("alert-overlay"),this.$el.html(this.template({title:l.a.result(this.data,"title"),message:l.a.result(this.data,"message")}));var e=this.$(".ok-target");return e.length&&e.replaceWith(this.okButton.render().$el),this},remove:function(){return this.okButton.remove(),dr.prototype.remove.apply(this,arguments)},onOk:function(){this.close(!0)}}),function(e){if(!l.a.isObject(e)||!e.message&&!e.affirmMessage)throw new Error("No message for the confirm-dialog was provided.");var t=l.a.pick(e,"affirmMessage","message","title","okButtonText","cancelButtonText");return new ic(t).open()});var sc=n(50),lc=n.n(sc),cc=a.a.View.extend({_template:void 0,_defTemplate:l.a.template(lc.a),autoPlay:!1,initialize:function(e){this.downloadButton=new fe({alternative:!0,text:O.get("common.download"),iconClass:"icon-filesviewer-download"}),this.listenTo(this.downloadButton,"click",this._onDownload),e&&(e.tpl&&(this._template=this._defTemplate=l.a.template(e.tpl)),e.defTpl&&(this._defTemplate=l.a.template(e.defTpl)),e.autoPlay&&(this.autoPlay=!0===e.autoPlay)),this._downloading=!1},getMetaFields:function(){},getInfoMetaFields:function(){return[]},_render:function(){return this.$el.empty().addClass("fileview").append(this._defTemplate({file:this.model,lang:O,formatters:z})),this},preload:function(){},render:function(){return this._render(),this.$(".download-button-target").replaceWith(this.downloadButton.render().$el),this.next(),this},remove:function(){this.downloadButton.remove(),a.a.View.prototype.remove.call(this)},_onDownload:function(){this._downloading||(this._downloading=!0,vi.download(this.model).always(function(){this._downloading=!1}.bind(this)))},showError:function(){return this._render().next()},play:function(){},pause:function(){},seek:function(){},next:function(e){return this.trigger.apply(this,l.a.compact(["ended",e])),this},getStreamUrl:function(){var e=this.model,t={pid:e.getPid()};return $.get(e.getContext()).ajax({url:"/api/file/url",data:t,dataFilter:function(t){try{var n=JSON.parse(t);return n.url?JSON.stringify(l.a.extend(n,{url:n.url+"/"+e.get("name")})):t}catch(e){return t}}})},getFileUrl:function(){var e="/api/file?pid="+this.model.getPid();return $.get(this.model.getContext()).addAuthToUrl(e)}}),uc="fadein",dc="fadeout",hc="show",fc="hide",pc=cc.extend({className:"imageview",imageSize:null,lastThumbSize:null,renderId:0,initialize:function(){this._image=null,this.resize=l.a.throttle(this._onResize.bind(this),250),cc.prototype.initialize.apply(this,arguments)},getMetaFields:function(){return["image.width","image.height"]},getInfoMetaFields:function(){return["image.exif"]},render:function(e,t,n){return this.$el.html('<div class="placeholder"></div><span class="filesviewer-loader icon-loading"></span>'),this.$placeholder=this.$(".placeholder"),this._storeMetaData(e),this._renderInitial(t,n),this},preload:function(e,t,n){this._storeMetaData(e),this._loadImage(t,n)},remove:function(){return this.renderId=-1,cc.prototype.remove.apply(this,arguments)},_onResize:function(e,t){this.imageSize&&this._renderResize(e,t)},_storeMetaData:function(e){e.image?this.imageSize=l.a.pick(e.image,"height","width"):this.imageSize={}},_loadImage:function(e,t){var n=_i(this.imageSize.width,this.imageSize.height,e,t);n=l.a.pick(n,"width","height"),this.lastThumbSize=n,this._image=vi.getThumbnail(this.model,n).then(bi)},_toggleLoading:function(e){var t=this.el.querySelector(".filesviewer-loader");e?t.classList.add("loading"):t.classList.remove("loading")},_togglePlaceholder:function(e){var t=this.$placeholder[0].classList;e===uc?(t.add("transitioned"),t.remove("hidden")):e===dc?(t.add("transitioned"),t.add("hidden")):e===hc?(t.remove("transitioned"),t.remove("hidden")):e===fc&&(t.remove("transitioned"),t.add("hidden"))},_renderInitial:function(e,t){var n,i=_i(this.imageSize.width,this.imageSize.height,e,t),r={width:e,height:t};this._hasKnownImageSize()&&this._updateScaling(i,this.imageSize.width,this.imageSize.height),this.lastThumbSize=i,this._image&&"pending"!==this._image.state()||this._toggleLoading(!0),this._image&&"rejected"!==this._image.state()||this._loadImage(e,t),n=++this.renderId,vi.getThumbnail(this.model,{width:210,height:210}).then(this._placeholderLoaded.bind(this,n,!0)),this._image.done(this._initiallyLoaded.bind(this,n)).then(this._imageLoaded.bind(this,n,r),this._imageFailed.bind(this))},_renderResize:function(e,t){var n,i=_i(this.imageSize.width,this.imageSize.height,e,t),r=this.lastThumbSize||{},o={width:e,height:t};l.a.isEqual(r,i)||(this._hasKnownImageSize()&&this._updateScaling(i,this.imageSize.width,this.imageSize.height),this.lastThumbSize=i,((i.width||0)>(r.width||0)||(i.height||0)>(r.height||0))&&(this._loadImage(e,t),n=++this.renderId,vi.getThumbnail(this.model,l.a.pick(r,"width","height")).then(this._placeholderLoaded.bind(this,n,!1)),this._image.then(this._imageLoaded.bind(this,n,o))))},_placeholderLoaded:function(e,t,n){"resolved"!==this._image.state()&&e===this.renderId&&(this.$placeholder.css("background-image","url("+n+")"),t?this._togglePlaceholder(uc):this._togglePlaceholder(hc))},_initiallyLoaded:function(e){e===this.renderId&&this.next(6e3)},_imageLoaded:function(e,t,n){var i,r=t.width,o=t.height;e===this.renderId&&(this._hasKnownImageSize()||(i=_i(n.width,n.height,r,o),this._updateScaling(i,n.width,n.height),i.shouldScale||(this.imageSize=l.a.pick(n,"width","height"))),this.$el.css("background-image","url("+n.src+")"),this._toggleLoading(!1),this._togglePlaceholder(dc))},_imageFailed:function(){cc.prototype.render.call(this,this.metaData)},_updateScaling:function(e,t,n){var i;e.shouldScale?(this.$placeholder.css("background-size","contain"),this.$el.css("background-size","contain")):(i=(e.width?t+"px":"auto")+" "+(e.height?n+"px":"auto"),this.$placeholder.css("background-size",i),this.$el.css("background-size",""))},_hasKnownImageSize:function(){return!!this.imageSize.width||!!this.imageSize.height}});function gc(e){return function(e){if(Array.isArray(e))return mc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return mc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mc(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var vc,yc=cc.extend({mediaType:"",getMetaFields:function(){return["mime_type"]},_streamUrl:void 0,_template:void 0,initialize:function(){this._boundPlayerEvents=[],cc.prototype.initialize.apply(this,arguments)},render:function(e){var t=this;return this.trigger("canPlay",!1),this.metaData=e,this._streamUrl=this.getStreamUrl().done((function(n){n.url?(t.el.innerHTML=t._template({file:t.model,lang:O,formatters:z}),t.player=t.el.querySelector(t.mediaType),e.mime_type&&""!==t.player.canPlayType(e.mime_type)?(t._bindPlayerEvents(),t.player.src=n.url,t.player.autoplay=!!t.autoPlay,t.trigger("canPlay",!0)):t._renderDefaultView()):t.showError()})).fail((function(){return t.showError()})),this},_bindPlayerEvents:function(){var e=this;this._bindPlayerEvent("error",(function(){e.trigger("canPlay",!1),e._renderDefaultView()})),this._bindPlayerEvent("loadedmetadata",(function(t){e.trigger("loadedmetadata",t),e.player.duration>0&&isFinite(e.player.duration)&&e.trigger("setDuration",e.player.duration)})),this._bindPlayerEvent("play",(function(t){return e.trigger("playing",t)})),this._bindPlayerEvent("pause",(function(t){return e.trigger("pause",t)})),this._bindPlayerEvent("timeupdate",(function(){return e.trigger("timeupdate",e.player.currentTime)})),this._bindPlayerEvent("ended",(function(){return e.next(1e3)}))},_bindPlayerEvent:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this._boundPlayerEvents.push([].concat(n)),(e=this.player).addEventListener.apply(e,n)},_unbindPlayerEvents:function(){for(var e;e=this._boundPlayerEvents.pop();){var t;(t=this.player).removeEventListener.apply(t,gc(e))}},_renderDefaultView:function(){this.trigger("setDuration",0),cc.prototype.render.call(this,this.metaData)},remove:function(){var e=this;this._streamUrl&&(this._streamUrl.abort(),this._streamUrl.always((function(){return e._unbindPlayerEvents()}))),cc.prototype.remove.call(this)},play:function(){this.player.play()},pause:function(){this.player.pause()},seek:function(e){this.player.currentTime=e},next:function(){var e=this;this._streamUrl&&this._streamUrl.always((function(){return cc.prototype.next.call(e)}))}}),wc=n(51),bc=n.n(wc),_c=yc.extend({className:"videoview",mediaType:"video",_template:l.a.template(bc.a),initialize:function(){yc.prototype.initialize.apply(this,arguments),this.listenTo(this,"loadedmetadata",this._onLoadedMetadata)},_onLoadedMetadata:function(e){var t=e.target;t.width=t.width||Math.max(t.videoWidth||0,300),t.height=t.height||Math.max(t.videoHeight||0,150)}}),xc=n(52),kc=n.n(xc),Ec=yc.extend({className:"audioview",mediaType:"audio",_template:l.a.template(kc.a)}),Sc=cc.extend({className:"textview",bytesSizeLimit:102400,render:function(e){if(!(e.size&&e.size<=this.bytesSizeLimit))return cc.prototype.render.call(this);var t={pid:this.model.get("id"),context:this.model.getContext()};return vi.getFile(t).done(function(e){var t=document.createElement("div"),n=document.createElement("textarea");t.className="text-content",n.readOnly=!0,r()(n).text(e),t.appendChild(n),this.$el.append(t),this.next()}.bind(this)).fail(function(){this.showError()}.bind(this)),this}}),Tc=function(e){var t=q.get("cacheBuster");return t?"".concat(t,"/").concat(e):e},Cc=n(53),jc=n.n(Cc);function Dc(e){return e&&"resolved"===e.state()?e:null}function Oc(e){var t=r.a.Deferred();return e.then(t.resolve,t.reject),t.promise()}var Pc=cc.extend({className:"pdfview",_renderId:0,_pdf:void 0,_pdfPro:void 0,_page:void 0,_pagePro:void 0,_htmlPro:void 0,_drawPro:void 0,_onFirstResize:void 0,_onLastResize:void 0,_currentPage:void 0,_rejectedPro:r.a.Deferred().reject().promise(),_template:l.a.template(jc.a),events:{"click button.pdf-next-page":"onNextPage","click button.pdf-prev-page":"onPrevPage","change input.current-page":"onPageChange"},initialize:function(e){this._currentPage=1,this.onFirstResize=l.a.debounce(this._onResizeStart,300,!0),this.onLastResize=l.a.debounce(this._onResizeEnd,300),e&&e.tpl&&(this._template=l.a.template(e.tpl)),cc.prototype.initialize.apply(this,arguments)},remove:function(){return this._pdf&&this._pdf.destroy(),this._page&&this._page.cleanup(!0),delete this._newPage,delete this._newCanvas,delete this._newDrawnScale,this._renderId=-1,cc.prototype.remove.apply(this,arguments)},_renderObject:function(e,t,n){pe.supportPdf().then(function(){return this.getStreamUrl().done(function(t){r()("object",e).attr("type","application/pdf"),r()("object",e).attr("data",t.url),r()(".filesviewer-loader",e).hide(),r()("canvas",e).remove(),this.$el.html(e.html()),this.next(16e3)}.bind(this))}.bind(this)).fail(this._renderCanvas.bind(this,e,t,n))},_renderCanvas:function(e,t,n){r()("canvas",e).length?(this._renderId++,t&&(this._width=t),n&&(this._height=n),this.$el.html(e.html()),this._chain()):cc.prototype.render.apply(this,arguments)},render:function(e,t,n){var i=r()("<div></div>").html(this._template({lang:O,pdfInfo:null}));return r()("object",i).length?this._renderObject(i,t,n):this._renderCanvas(i,t,n),this},_chain:function(){this.$("canvas").length&&this._loadScripts().then(this._loadPdf.bind(this,this._renderId)).then(this._loadPage.bind(this,this._renderId)).then(this._showHtml.bind(this,this._renderId)).then(this._drawPage.bind(this,this._renderId)).then(this._postDraw.bind(this,this._renderId,this._canvas)).fail(this.showError.bind(this,this._renderId,this._canvas))},_loadScripts:function(){return this.$(".filesviewer-loader").show(),vc=Dc(vc)||r.a.getScript(Tc("external/pdfjs/pdf.js")).done((function(){pdfjsLib.GlobalWorkerOptions.workerSrc=Tc("external/pdfjs/pdf.worker.js")}))},_loadPdf:function(e){return this._renderId!==e?this._rejectedPro:(this._pdfPro=Dc(this._pdfPro)||Oc(pdfjsLib.getDocument({url:this.getFileUrl(),disableAutoFetch:!0,disableFontface:!0,disableStream:!0}).promise),this._pdfPro)},_loadPage:function(e,t){return this._renderId!==e?(this._pdfPro=this._rejectedPro,t&&t.destroy(),this._rejectedPro):(this._pdf=t,this._pagePro=Dc(this._pagePro)||Oc(t.getPage(this._currentPage)),this._pagePro)},_showHtml:function(e,t){return this._renderId!==e?(this._pagePro=this._rejectedPro,t&&t.cleanup(!0),this._rejectedPro):(this._htmlPro=Dc(this._htmlPro)||r.a.Deferred(function(){this.$el.html(this._template({lang:O,pdfInfo:{currentPage:this._currentPage,totalPages:this._pdf.numPages}})),this.$("object").remove()}.bind(this)).resolve(t),this._htmlPro)},_drawPage:function(e,t){var n,i,o,a,s;return this._renderId!==e?(this._pagePro=this._rejectedPro,t&&t.cleanup(!0),this._rejectedPro):(this._newPage=t,this._page=this._page||this._newPage,this._newCanvas=r()("<canvas>")[0],this._canvas=this._canvas||this._newCanvas,n=this.getViewProperties(),this._newDrawnScale=n.scale,this._drawnScale=this._drawnScale||this._newDrawnScale,i=t.getViewport({scale:n.scale}),o=this._newCanvas.getContext("2d"),(s=this.$("canvas")[0]).height=this._newCanvas.height=i.height,s.width=this._newCanvas.width=i.width,this.$el.css({marginTop:(n.height-i.height)/2,width:i.width}),a={canvasContext:o,viewport:i},this._drawPro=Dc(this._drawPro)||Oc(t.render(a).promise),this._drawPro)},_postDraw:function(e){return this._renderId!==e?(this._drawPro=this._rejectedPro,this._rejectedPro):(this._page=this._newPage,this._canvas=this._newCanvas,this._drawnScale=this._newDrawnScale,delete this._newPage,delete this._newCanvas,delete this._newDrawnScale,this.$("canvas").replaceWith(this._canvas),this.$(".filesviewer-loader").hide(),this.next(),null)},showError:function(e,t){if(this._renderId!==e)return this._rejectedPro;var n=t||this._canvas;return delete this._newPage,delete this._newCanvas,delete this._newDrawnScale,r()(n).replaceWith("<canvas>"),this.$(".filesviewer-loader").hide(),cc.prototype.render.apply(this,arguments)},_onResizeStart:function(){this._renderId++},_onResizeEnd:function(){this._drawPro=this._rejectedPro,this._chain()},getViewProperties:function(){var e=this._page.getViewport({scale:1}),t=this._width,n=this._height-this.$(".document-toolbar").height();return{width:t,height:n,scale:_i(e.width,e.height,t,n).width?t/e.width:n/e.height}},resize:function(e,t){if((this._width!==e||this._height!==t)&&(this._width=e,this._height=t,this.onFirstResize(),this.onLastResize(),this._page&&this._drawnScale)){var n=this.getViewProperties(),i=n.scale/this._drawnScale;this.$el.css({marginTop:(n.height-this._canvas.height*i)/2,width:this._canvas.width*i})}},_checkedSetCurrentPage:function(e){!e||e<1||e>this._pdf.numPages||e===this._currentPage||(this._currentPage=e,this._htmlPro=this._pagePro=this._drawPro=this._rejectedPro,this.render())},onNextPage:function(){this._checkedSetCurrentPage(this._currentPage+1)},onPrevPage:function(){this._checkedSetCurrentPage(this._currentPage-1)},onPageChange:function(e){this._checkedSetCurrentPage(parseInt(r()(e.target).val(),10))}}),Ac={googlemaps:"https://www.google.com/maps/search/?api=1&query=<%= lat %>,<%= lon %>",openstreetmap:"https://www.openstreetmap.org/?mlat=<%= lat %>&mlon=<%= lon %>"},Mc={getMapLink:function(e,t,n){var i=Ac[e];if(!i)throw new Error("mapLinksHelper: unknown service '"+e+"'");return l.a.template(i)({lat:encodeURIComponent(t),lon:encodeURIComponent(n)})}},Ic=n(54),Fc=n.n(Ic);function zc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Lc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nc(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Vc=Y.extend({className:"detailView sj-selectable",template:l.a.template(Fc.a),templateData:function(){return{model:this.model.get("currentModel"),detail:this._getDetails(),mapLinksHelper:Mc}},initialize:function(){this.listenTo(this.model,"change:meta",this.render)},_getDetails:function(){var e=this.model.get("meta")||{},t=e.image,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zc(Object(n),!0).forEach((function(t){Lc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Nc(e,["image"])),i=t||{},r=i.exif,o=Nc(i,["exif"]);return t&&(n.image=o),r&&(n.exif=r),n}}),$c=n(55),Rc=n.n($c),Bc=a.a.View.extend({template:l.a.template("<div class='bar'></div><input class='handle' type='range' max='100' min='0' step='0.01' />"),events:{"change .handle":"_onHandleChange","input .handle":"_onHandleChange","mousedown .handle":"_onMouseDown","mouseup .handle":"_onMouseUp"},render:function(){return this.$el.html(this.template()),this.update(0),this.delegateEvents(),this},update:function(e){this.value=""+e.toFixed(2),this.$(".bar").width(this.value+"%"),this.$(".handle").prop("value",this.value)},_onHandleChange:function(){var e=parseFloat(this.$(".handle").prop("value")).toFixed(2);e!==this.value&&(this.value=e,this.trigger("change",this.value))},_onMouseDown:function(){this.trigger("drag:start")},_onMouseUp:function(){this.trigger("drag:stop")}}),qc=n(56),Uc=n.n(qc),Hc=a.a.View.extend({tagName:"ul",className:"content",tpl:l.a.template(Uc.a),render:function(){return this.$el.html(this.tpl({model:this.model,lang:O})),this}}),Wc=Yr.Flyout.extend({events:{"click .trigger":"toggle"},tpl:l.a.template(['<a class="trigger">','<span class="icon icon-filesviewer-toolbar"></span>',"</a>"].join("")),initialize:function(){this.triggerView=r()(this.tpl({lang:O})),this.contentView=new Hc({model:this.model}),this.listenTo(this,"mousestopped",this.close)}}),Gc=a.a.View.extend({className:"statusview",events:{"click .action-download":"onDownload","click .action-unzip":"onUnzip","click .action-info":"onInfo","click .action-delete":"onDelete","click .action-close":"onClose","click .control-buttons .play":"onPlay","click .control-buttons .pause":"onPause","click .control-buttons .start-diashow":"onStartDiashow","click .control-buttons .stop-diashow":"onStopDiashow","click .control-buttons .next":"onNext","click .control-buttons .previous":"onPrevious",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},currentModel:null,_template:l.a.template(Rc.a),initialize:function(){this._progressBarView=new Bc,this.listenTo(this.model,"change:currentModel",this.onChangeCurrentModel),this.listenTo(this._progressBarView,"change",this.onChangeSlider),this.listenTo(this._progressBarView,"drag:start",this.onPause),this.listenTo(this._progressBarView,"drag:stop",this.onPlay),this.listenTo(this.model,"change:mouseMove",this._onModelMouseMove),this.onChangeCurrentModel(null,this.model.get("currentModel")),this.listenTo(this.model,"change:error",this.setButtons),this.listenTo(this.model,"change:playing",this.setControlState),this.listenTo(this.model,"change:diashow",this.setControlState),this.listenTo(this.model,"change:canPlay",this.setControlState),this.listenTo(this.model,"change:canNavigate",this.setControlState),this.listenTo(this.model,"change:duration",this._onDurationChange),this.listenTo(this.model,"change:currentTime",this._onCurrentTimeChange),this._downloading=!1},clear:function(){this._moreMenu.remove()},remove:function(){return this.clear(),this._progressBarView.remove(),a.a.View.prototype.remove.apply(this,arguments)},onChangeCurrentModel:function(e,t){t&&(this.currentModel&&(this.stopListening(this.currentModel),this.clear()),this.currentModel=t,this.listenTo(this.currentModel,"change",this.render),this.render())},setButtons:function(){var e=this.model.get("currentModel"),t=!!e.get("parent_writable"),n=t&&le.isRegistered("deleteFiles"),i=!!this.model.get("error"),r=e.getContext()!==N.authContext.default,o=!i&&t&&"zip"===e.get("ext")&&le.isRegistered("unzip")&&!r;this.$(".action-download").toggleClass("enabled",!i),this.$(".action-unzip").toggleClass("enabled",o),this.$(".action-info").toggleClass("enabled",!i),this.$(".action-delete").toggleClass("enabled",n)},_clearMouseTimer:function(){this._mouseWithinTimer&&(clearTimeout(this._mouseWithinTimer),this._mouseWithinTimer=null)},_startMouseTimer:function(){this._clearMouseTimer(),this._mouseWithinTimer=setTimeout(function(){this._isMouseWithin||(this.$el.removeClass("mousemoved"),this.$el.addClass("mousestopped"),this._moreMenu.trigger("mousestopped"))}.bind(this),2e3)},_onModelMouseMove:function(){this._setMouseClasses(),this._startMouseTimer()},_setMouseClasses:function(){this.$el.hasClass("mousemoved")||(this.$el.removeClass("mousestopped"),this.$el.addClass("mousemoved"))},onMouseMove:function(e){e.stopPropagation()},onMouseEnter:function(){this._isMouseWithin=!0,this._setMouseClasses(),this._clearMouseTimer()},onMouseLeave:function(){this._isMouseWithin=!1,this._startMouseTimer()},onDownload:function(){this._downloading||(this._downloading=!0,(this.currentModel instanceof On?vi.downloadSharelink:vi.download)(this.currentModel).always(function(){this._downloading=!1}.bind(this)))},onUnzip:function(){var e=new sl({id:this.currentModel.get("parent_id"),path:this.currentModel.get("parentPath")},{parse:!0,context:this.currentModel.getContext()});if(!this.currentModel.get("parent_writable"))throw new Error("Parent folder should be writtable for unzip action.");le.execute("unzip",{zipFile:this.currentModel,parentFolder:e}),this.onClose()},onDelete:function(){le.execute("deleteFiles",[this.currentModel])},onPlay:function(){this.trigger("play")},onPause:function(){this.trigger("pause")},onStartDiashow:function(){this.trigger("start-diashow")},onStopDiashow:function(){this.trigger("stop-diashow")},setControlState:function(){this.setDiashowState(),this.setPlayState()},setDiashowState:function(){var e=!!this.model.get("canNavigate"),t=!!this.model.get("diashow"),n=!!this.model.get("playing"),i=!!this.model.get("canPlay"),r=this.el.querySelector(".control-buttons .start-diashow"),o=this.el.querySelector(".control-buttons .stop-diashow");r.disabled=i&&!n||!e||t,o.disabled=n||i||!e||!t},setPlayState:function(){var e=!!this.model.get("playing"),t=!!this.model.get("canPlay"),n=this.el.querySelector(".control-buttons .play"),i=this.el.querySelector(".control-buttons .pause");n.disabled=!t||e,i.disabled=!t||!e},onPrevious:function(){this.trigger("previous")},onNext:function(){this.trigger("next")},onInfo:function(){this.trigger("info:open")},onClose:function(){this.trigger("close")},render:function(){this._moreMenu=new Wc({model:this.currentModel}),this.$el.html(this._template({lang:O,model:this.currentModel,index:this.model.get("currentIndex")+1,count:this.collection.length,canNavigate:this.model.get("canNavigate")})),this.$(".more-menu").html(this._moreMenu.render().$el);var e=this.$(".progress-bar");return e.length&&e.html(this._progressBarView.render().$el),this.setButtons(),this.setControlState(),this},_formatTime:function(e){var t,n,i;return isNaN(e)?e:(t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),(i=Math.floor(e-3600*t-60*n))<10&&(i="0"+i),t>0?(n<10&&(n="0"+n),t+":"+n+":"+i):n+":"+i)},_onDurationChange:function(e,t){t>0?(this.$(".progress-current").text(this._formatTime(0)),this.$(".progress-total").text(this._formatTime(t))):(this.$(".progress-current").empty(),this.$(".progress-total").empty()),this._progressBarView.update(0)},_onCurrentTimeChange:function(e,t){var n=this.model.get("duration"),i=0;n>0&&(i=t/n*100,this.$(".progress-current").text(this._formatTime(t))),this._progressBarView.update(i)},onChangeSlider:function(e){var t=this.model.get("duration")*e/100;this.trigger("seek",t)}}),Kc=n(57),Xc=n.n(Kc);function Yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Jc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yc(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zc(e){return function(e){if(Array.isArray(e))return eu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return eu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eu(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var tu=Yr.BaseOverlayView.extend({overlayTemplate:l.a.template(Xc.a),overlayContentContainer:".filesviewer-content",overlayTemplateData:function(){return{showNavButtons:this.state.get("canNavigate")}},minMouseMovePixels:5,autoPlay:!1,autoContinue:!1,initialize:function(e){var t,n,i=this;if(!this.model)throw new Error("model missing in FilesViewer");if(this.itemType=this.model.getItemType(),t=this.model.get("group"),this.contentViewTemplates={},e&&(l.a.has(e,"autoPlay")&&(this.autoPlay=e.autoPlay),l.a.has(e,"autoContinue")&&(this.autoContinue=e.autoContinue)),!(n=(e.modelsArray&&e.modelsArray.length?e.modelsArray:[this.model]).filter((function(n){return n.get("type")===L.file&&n.get("readable")&&(!e.filtered||n.get("group")===t)}))).length)throw new Error("no models to show in FilesViewer");if(n.find((function(e){return e.getItemType()!==i.itemType})))throw new Error("models differ in itemType/authContext");this.collection=new a.a.Collection(n),this._cache={},this.allowedGroups=["thumb","audio","video"],this.state=new a.a.Model({meta:{},extendedMeta:!1,currentModel:this.model,currentIndex:this.collection.indexOf(this.model),canNavigate:this.collection.length>1&&(!e.filtered||l.a.contains(this.allowedGroups,t)),canPlay:!1,mouseMove:!1,playing:!1,diashow:!1,error:!1}),this.listenTo(this.state,"change:currentModel",this._renderContentView),this.statusView=new Gc({model:this.state,collection:this.collection}),r()(window).on("resize.filesviewer",this._onResize.bind(this)),this.listenTo(this.statusView,"info:open",this._toggleDetailView),this.listenTo(this.statusView,"play",this._onPlay),this.listenTo(this.statusView,"pause",this._onPause),this.listenTo(this.statusView,"start-diashow",this._onStartDiashow),this.listenTo(this.statusView,"stop-diashow",this._onStopDiashow),this.listenTo(this.statusView,"next",this.gotoNext),this.listenTo(this.statusView,"previous",this.gotoPrevious),this.listenTo(this.statusView,"seek",this._onSeek),this.listenTo(this.statusView,"close",this.close),this.lastMousePosition={X:0,Y:0},this.$overlayEl.on("mousemove click",l.a.throttle((function(e){("click"===e.type||Math.abs(i.lastMousePosition.X-e.clientX)>i.minMouseMovePixels||Math.abs(i.lastMousePosition.Y-e.clientY)>i.minMouseMovePixels)&&(i.state.set({mouseMove:!i.state.get("mouseMove")}),i.lastMousePosition.X=e.clientX,i.lastMousePosition.Y=e.clientY)}),200,{leading:!0})),this.listenTo(Ct,"added",this._onFileDelete),this.$overlayEl.on("click","[data-action='next-item']",this.gotoNext.bind(this)),this.$overlayEl.on("click","[data-action='previous-item']",this.gotoPrevious.bind(this))},onAfterOpen:function(){this.hotkeyManager.addHotkey(this,Yi.rightArrow,this.gotoNext.bind(this)),this.hotkeyManager.addHotkey(this,Yi.leftArrow,this.gotoPrevious.bind(this))},render:function(){return this.$overlayEl.addClass("filesviewer-overlay"),this._renderContentView(),this.$overlayEl.find(".filesviewer").append(this.statusView.render().$el),this.trigger("rendered"),this},_getMeta:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=l.a.union(t,["mtime","name","size"]);return e.getMeta(n)},clearContent:function(){var e=this.collection.at(this._getPreviousIndex()),t=this.state.get("currentModel"),n=this.collection.at(this._getNextIndex());this._cancelMetaRequests(!1),this._cacheCleanup([e.cid,t.cid,n.cid]),this.contentView&&this.stopListening(this.contentView)},remove:function(){return this.statusView.remove(),this._removeDetailView(),this._cancelMetaRequests(!0),this._cacheCleanup(),this.$overlayEl.off(),r()(window).off(".filesviewer"),this.trigger("removed"),Yr.BaseOverlayView.prototype.remove.apply(this,arguments)},_cancelMetaRequests:function(e){var t,n,i=this.state.get("currentModel").cid;for(t in this._cache)(t!==i||e)&&(n=this._cache[t].metaRequest)&&n.abort()},_cacheCleanup:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(e in this._cache)-1===n.indexOf(e)&&(t=this._cache[e].view,this.stopListening(t),t.remove(),delete this._cache[e])},_getNewIndexAfterDelete:function(e,t,n){var i,r,o;return(i=(n=n.slice(0)).indexOf(t)>-1)&&n.splice(n.indexOf(t),1),o=(r=l.a.difference(e,n)).indexOf(t),i&&(r.splice(o,1),o=o<r.length-1?o:r.length-1),o},_onFileDelete:function(e,t){var n=this;if(e===this.itemType){var i=this.state.get("currentModel"),r=t.map((function(e){return n.collection.get(e.id)})),o=this._getNewIndexAfterDelete(this.collection.models,i,r);this.collection.remove(t),1===this.collection.length&&this.state.set({diashow:!1,canNavigate:!1}),this.collection.models.length?this._gotoIndex(o):this.remove()}},_clearResume:function(){this._resumeTimeout&&clearTimeout(this._resumeTimeout)},_resume:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;this._clearResume(),this._resumeTimeout=l.a.delay(function(){this.state.get("diashow")&&this._gotoIndex(this._getNextIndex())}.bind(this),e)},_getNextIndex:function(){var e=this.state.get("currentIndex")||0;return e<this.collection.length-1?e+1:0},gotoNext:function(){this.state.set({playing:!1,diashow:!1}),this._gotoIndex(this._getNextIndex())},_getPreviousIndex:function(){var e=this.state.get("currentIndex")||0;return e>0?e-1:this.collection.length-1},gotoPrevious:function(){this.state.set({playing:!1,diashow:!1}),this._gotoIndex(this._getPreviousIndex())},_gotoIndex:function(e){var t=this;this._clearResume();var n=this.state.get("currentModel"),i=this.collection.at(e);l.a.without(Object.keys(this.state.attributes),"currentIndex","currentModel","canNavigate","diashow","error","mouseMove").forEach((function(e){t.state.unset(e)})),this.state.set({currentIndex:e,currentModel:i}),i===n&&this.state.trigger("change:currentModel",this.state,i)},_renderContentView:function(){var e,t,n=this,i=this.state.get("currentModel");this.clearContent(),t=this.$overlayEl.find(".filesviewer-content"),e=this._getFromCache(i),this.contentView=e.view,this._bindContentViewEvents(),this.$overlayEl.find(".filesviewer-overlay-filename").text(i.get("base_name")),this.$overlayEl.removeClass("has-duration");var r=function(e){n.state.set({meta:e,error:!1}),n.contentView.render(e,t.width(),t.height()),t.html(n.contentView.$el),n.detailView&&n._getExtendedMeta()};e.metaRequest?e.metaRequest.then((function(t){e.metaData=t,e.metaRequest=null,r(t)})):e.metaRequest=this._getMeta(i,this.contentView.getMetaFields()).done(r).fail((function(e,i){"abort"!==i&&(n.state.set({meta:{},error:!0}),t.html(n.contentView.showError().$el))})),this._preloadSiblings()},_preloadSiblings:function(){var e=this,t=this.collection.at(this._getPreviousIndex()),n=this.state.get("currentModel"),i=this.collection.at(this._getNextIndex()),r=this.$overlayEl.find(".filesviewer-content"),o=[t,i];o=l.a.unique(o),(o=l.a.without(o,n)).forEach((function(t){var n=e._getFromCache(t),i=n.view;n.metaRequest=e._getMeta(t,i.getMetaFields()).done((function(e){n.metaData=e,i.preload(e,r.width(),r.height())})).fail((function(){n.metaRequest=null}))}))},_bindContentViewEvents:function(){this.listenTo(this.contentView,"playing",this._onPlaying),this.listenTo(this.contentView,"pause",this._onPaused),this.listenTo(this.contentView,"setDuration",this._onSetDuration),this.listenTo(this.contentView,"timeupdate",this._onTimeUpdate),this.listenTo(this.contentView,"ended",this._resume),this.listenTo(this.contentView,"canPlay",this._onCanPlay)},_getFromCache:function(e){return e.cid in this._cache||(this._cache[e.cid]={view:this._createContentView(e)}),this._cache[e.cid]},_getContentView:function(e){return this._getFromCache(e).view},_createContentView:function(e){var t=e.get("group"),n={thumb:pc,video:_c,audio:Ec,text:Sc,pdf:Pc};return e instanceof On&&(t="thumb"===t?"thumb":"default"),new(l.a.has(n,t)?n[t]:cc)({model:e,tpl:this.contentViewTemplates[t],defTpl:this.contentViewTemplates.default,autoPlay:this.autoPlay})},_onResize:function(){if(this.contentView&&l.a.isFunction(this.contentView.resize)){var e=this.$overlayEl.find(".filesviewer-content"),t=e.width(),n=e.height();if(!t||!n)return;this.contentView.resize(t,n)}},_onCanPlay:function(e){this.state.set("canPlay",e)},_onPlay:function(){this.state.set({playing:!0}),this.contentView.play()},_onPause:function(){this.state.set({playing:!1}),this.contentView.pause()},_onStartDiashow:function(){this.state.set({diashow:!0}),this.contentView.next()},_onStopDiashow:function(){this.state.set({diashow:!1})},_onPlaying:function(){this.state.set("playing",!0),this.autoContinue&&this.state.set("diashow",!0)},_onPaused:function(){this.state.set("playing",!1)},_onSetDuration:function(e){this.state.set("duration",e),e>0&&this.$overlayEl.addClass("has-duration")},_onTimeUpdate:function(e){this.state.set("currentTime",e)},_onSeek:function(e){this.contentView.seek(e)},_toggleDetailView:function(){this.detailView?this._hideDetailView():this._renderDetailView()},_renderDetailView:function(){var e=this;this._clearDetailsViewTransitionTimer(),this.detailView=new Vc({model:this.state}),this._getExtendedMeta(),this.$overlayEl.find(".filesviewer-wrapper").append(this.detailView.render().$el),this.$overlayEl.addClass("detailview-active"),setTimeout((function(){e.detailView.$el.addClass("active")}),0),this._detailsViewTransitionTimer=setTimeout((function(){e._detailsViewTransitionTimer=null,e._onResize()}),200)},_clearDetailsViewTransitionTimer:function(){this._detailsViewTransitionTimer&&(this._removeDetailView(),clearTimeout(this._detailsViewTransitionTimer),this._detailsViewTransitionTimer=null)},_hideDetailView:function(){var e=this;this.detailView.$el.removeClass("active"),this.$overlayEl.removeClass("detailview-active"),this._clearDetailsViewTransitionTimer(),this._detailsViewTransitionTimer=setTimeout((function(){e._removeDetailView(),e._onResize()}),200)},_removeDetailView:function(){this.detailView&&(this.detailView.remove(),delete this.detailView)},_getExtendedMeta:function(){var e,t=this.contentView,n=t.getInfoMetaFields(),i=t.getMetaFields(),r=this.state.get("currentModel"),o=this.state;n.length&&!o.get("extendedMeta")&&(e=[].concat(Zc(i),Zc(n)),this.meta=this._getMeta(r,e).done((function(e){r.getPid()===o.get("currentModel").getPid()&&o.set({meta:Jc(Jc({},o.get("meta")),e),extendedMeta:!0})})))}}),nu=new Yr.Toast,iu={};iu.deleteFiles={callback:function(e,t){var n;t=t||{},n=1===e.length?O.get("filemanager.delete.prompt.single",z.escapedBreakable(e[0].get("display_name"))):O.get("filemanager.delete.prompt.multi",e.length),ac({message:n,okButtonText:O.get("filemanager.delete.prompt.ok"),cancelButtonText:O.get("filemanager.delete.prompt.cancel")}).then(function(n){n?vi.deleteFiles(e).always((function(e,n,i){!function(e,t,n,i){var r;"timeout"!==n.statusText?e.length&&(r=t&&t.length?O.bind("filemanager.delete.error.some",[t.length,e.length]):1===e.length?O.bind("filemanager.delete.error.one",z.breakable(e[0].get("display_name"))):O.bind("filemanager.delete.error.all",e.length),le.execute("showToast",{msg:r})):i.timeoutToast&&le.execute("showToast",{type:"info",msg:O.bind("filemanager.delete.timeout")})}(e,n,i,t)})):oe.track({op:"delete-abort",target:"confirm-dialog",data:e.length})}.bind(this))}},iu.deselectAll={callback:function(e){if(!l.a.isObject(e))throw new Error("Object-argument required for deselectAll action");if(!l.a.isFunction(e.deselectAll))throw new Error("Subject has no deselectAll method.");e.deselectAll()}},iu.newFolder={callback:function(e){var t=e.folder;vi.newFolder(t,O.get("filemanager.newfolder.defaultname"),!0).done((function(n){var i=e.targetView;oe.track({op:"new-folder",data:"created"}),(n=t.files.get(n))&&le.execute("rename",{model:n,view:i})})).fail(function(e,t){oe.track({op:"new-folder",data:"error.code."+t.status}),le.execute("showToast",{msg:O.bind("filemanager.newfolder.error.common")})}.bind(this))}},iu.rename={callback:function(e){var t,n;if(!e||!l.a.isObject(e))throw new Error("The action needs a valid params-object.");if(t=e.model,!(n=e.view))throw new Error("A valid view needs to be provided.");if(!(t instanceof a.a.Model))throw new Error("A valid model needs to be provided.");if(!l.a.isFunction(n.rename))throw new Error('The provided view needs to have a "rename" method.');l.a.isFunction(n.scrollIntoView)&&n.scrollIntoView(t.id),n.rename(t)}},iu.selectAll={callback:function(e){if(!l.a.isObject(e))throw new Error("Object-argument required for selectAll action");if(!l.a.isFunction(e.selectAll))throw new Error("Subject has no selectAll method.");e.selectAll()}},iu.showFile={callback:function(e,t,n){var i,r=e.get("ext");return r&&oe.track({op:"open",target:r}),(i=new tu(l.a.extend({},n,{model:e,modelsArray:t}))).open(),i},config:{filtered:!1,autoPlay:!0,autoContinue:!0}},iu.showToast={callback:function(e){nu.render(e)}},le.registerAll(iu);var ru={run:function(){var e;e=window.router=new Rl,a.a.history.start({silent:!0}),e.start(),Te(),ec.install()}};r()(document).ready((function(){ru.run()}))}]);
//# sourceMappingURL=hdshare.js.map